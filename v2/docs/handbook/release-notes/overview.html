<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.13.67"/><style>@keyframes css-1{from{opacity:0;}to{opacity:1;}}@keyframes css-2{from{opacity:1;}to{opacity:0;}}@keyframes css-3{from{transform:translate3d(-10px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-4{from{transform:translate3d(-20px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-5{from{transform:translate3d(-40px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-6{from{transform:translate3d(-400px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-7{from{transform:translate3d(10px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-8{from{transform:translate3d(20px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-9{from{transform:translate3d(40px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-10{from{transform:translate3d(400px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-11{from{transform:translate3d(0,10px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-12{from{transform:translate3d(0,20px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-13{from{transform:translate3d(0,-10px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-14{from{transform:translate3d(0,-20px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-15{from{transform:translate3d(0,0,0);}to{transform:translate3d(10px,0,0);}}@keyframes css-16{from{transform:translate3d(0,0,0);}to{transform:translate3d(20px,0,0);}}@keyframes css-17{from{transform:translate3d(0,0,0);}to{transform:translate3d(40px,0,0);}}@keyframes css-18{from{transform:translate3d(0,0,0);}to{transform:translate3d(400px,0,0);}}@keyframes css-19{from{transform:translate3d(0,0,0);}to{transform:translate3d(-10px,0,0);}}@keyframes css-20{from{transform:translate3d(0,0,0);}to{transform:translate3d(-20px,0,0);}}@keyframes css-21{from{transform:translate3d(0,0,0);}to{transform:translate3d(-40px,0,0);}}@keyframes css-22{from{transform:translate3d(0,0,0);}to{transform:translate3d(-400px,0,0);}}@keyframes css-23{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,-10px,0);}}@keyframes css-24{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,-20px,0);}}@keyframes css-25{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,10px,0);}}@keyframes css-26{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,20px,0);}}@keyframes css-27{from{transform:scale3d(.98,.98,1);}to{transform:scale3d(1,1,1);}}@keyframes css-28{from{transform:scale3d(1,1,1);}to{transform:scale3d(.98,.98,1);}}@keyframes css-29{from{transform:scale3d(1.03,1.03,1);}to{transform:scale3d(1,1,1);}}@keyframes css-30{from{transform:scale3d(1,1,1);}to{transform:scale3d(1.03,1.03,1);}}@keyframes css-31{from{transform:rotateZ(0deg);}to{transform:rotateZ(90deg);}}@keyframes css-32{from{transform:rotateZ(0deg);}to{transform:rotateZ(-90deg);}}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI Light'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI SemiLight'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI SemiBold'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-bold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-bold.woff') format('woff');font-weight:600;font-style:normal;}@keyframes css-37{0%{transform:translate(0, 0);animation-timing-function:linear;}78.57%{transform:translate(0, 0);animation-timing-function:cubic-bezier(0.62, 0, 0.56, 1);}82.14%{transform:translate(0, -5px);animation-timing-function:cubic-bezier(0.58, 0, 0, 1);}84.88%{transform:translate(0, 9px);animation-timing-function:cubic-bezier(1, 0, 0.56, 1);}88.1%{transform:translate(0, -2px);animation-timing-function:cubic-bezier(0.58, 0, 0.67, 1);}90.12%{transform:translate(0, 0);animation-timing-function:linear;}100%{transform:translate(0, 0);}}@keyframes css-38{0%{transform: scale(0);animation-timing-function:linear;}14.29%{transform:scale(0);animation-timing-function:cubic-bezier(0.84, 0, 0.52, 0.99);}16.67%{transform:scale(1.15);animation-timing-function:cubic-bezier(0.48, -0.01, 0.52, 1.01);}19.05%{transform:scale(0.95);animation-timing-function:cubic-bezier(0.48, 0.02, 0.52, 0.98);}21.43%{transform:scale(1);animation-timing-function:linear;}42.86%{transform:scale(1);animation-timing-function:cubic-bezier(0.48, -0.02, 0.52, 1.02);}45.71%{transform:scale(0.8);animation-timing-function:cubic-bezier(0.48, 0.01, 0.52, 0.99);}50%{transform:scale(1);animation-timing-function:linear;}90.12%{transform:scale(1);animation-timing-function:cubic-bezier(0.48, -0.02, 0.52, 1.02);}92.98%{transform:scale(0.8);animation-timing-function:cubic-bezier(0.48, 0.01, 0.52, 0.99);}97.26%{transform:scale(1);animation-timing-function:linear;}100%{transform:scale(1);}}@keyframes css-39{0%{transform:rotate(0deg);animation-timing-function:linear;}83.33%{transform: rotate(0deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}83.93%{transform:rotate(15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}84.52%{transform:rotate(-15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}85.12%{transform:rotate(15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}85.71%{transform:rotate(-15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}86.31%{transform:rotate(0deg);animation-timing-function:linear;}100%{transform:rotate(0deg);}}@keyframes css-40{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}@keyframes css-41{0%{left:-30%;}100%{left:100%;}}@keyframes css-42{100%{right:-30%;}0%{right:100%;}}@keyframes css-43{0%{background-position:-1000%;}100%{background-position:1000%;}}@keyframes css-44{100%{background-position:-1000%;}0%{background-position:1000%;}}@keyframes css-45{0%{opacity:0;animation-timing-function:cubic-bezier(.1,.9,.2,1);transform:scale3d(.90,.90,.90);}100%{opacity:1;transform:scale3d(1,1,1);}}</style><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link as="script" rel="preload" href="/component---src-templates-handbook-tsx-16ee75366df1adfb048f.js"/><link as="script" rel="preload" href="/app-352c7c1acacfeb7cf5bd.js"/><link as="script" rel="preload" href="/webpack-runtime-5e1ec6c861ae70872e2b.js"/><link as="fetch" rel="preload" href="/page-data/docs/handbook/release-notes/overview.html/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/"></a></h3></header><main><div><p>{% raw %}This page is a shorter overview of features added per version.</p>
<h2>TypeScript 3.6</h2>
<h2>Stricter Generators</h2>
<p>TypeScript 3.6 introduces stricter checking for iterators and generator functions.
In earlier versions, users of generators had no way to differentiate whether a value was yielded or returned from a generator.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"Finished!"</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iter <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> curr <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>curr<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TypeScript 3.5 and prior thought this was a 'string | number'.</span>
    <span class="token comment">// It should know it's 'string' since 'done' was 'true'!</span>
    curr<span class="token punctuation">.</span>value
<span class="token punctuation">}</span></code></pre></div>
<p>Additionally, generators just assumed the type of <code class="language-text">yield</code> was always <code class="language-text">any</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">yield</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iter <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// oops! runtime error!</span></code></pre></div>
<p>In TypeScript 3.6, the checker now knows that the correct type for <code class="language-text">curr.value</code> should be <code class="language-text">string</code> in our first example, and will correctly error on our call to <code class="language-text">next()</code> in our last example.
This is thanks to some changes in the <code class="language-text">Iterator</code> and <code class="language-text">IteratorResult</code> type declarations to include a few new type parameters, and to a new type that TypeScript uses to represent generators called the <code class="language-text">Generator</code> type.</p>
<p>The <code class="language-text">Iterator</code> type now allows users to specify the yielded type, the returned type, and the type that <code class="language-text">next</code> can accept.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Iterator</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> TNext <span class="token operator">=</span> undefined<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// Takes either 0 or 1 arguments - doesn't accept 'undefined'</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span>TNext<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token punctuation">:</span> TReturn<span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Building on that work, the new <code class="language-text">Generator</code> type is an <code class="language-text">Iterator</code> that always has both the <code class="language-text">return</code> and <code class="language-text">throw</code> methods present, and is also iterable.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Generator</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> TReturn <span class="token operator">=</span> <span class="token builtin">any</span><span class="token punctuation">,</span> TNext <span class="token operator">=</span> <span class="token builtin">unknown</span><span class="token operator">></span>
        <span class="token keyword">extends</span> <span class="token class-name">Iterator</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token punctuation">,</span> TNext<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span>TNext<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> TReturn<span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span><span class="token punctuation">(</span>e<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Generator<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn<span class="token punctuation">,</span> TNext<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>To allow differentiation between returned values and yielded values, TypeScript 3.6 converts the <code class="language-text">IteratorResult</code> type to a discriminated union type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> TReturn <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">></span> <span class="token operator">=</span> IteratorYieldResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">|</span> IteratorReturnResult<span class="token operator">&lt;</span>TReturn<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IteratorYieldResult</span><span class="token operator">&lt;</span>TYield<span class="token operator">></span> <span class="token punctuation">{</span>
    done<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    value<span class="token punctuation">:</span> TYield<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IteratorReturnResult</span><span class="token operator">&lt;</span>TReturn<span class="token operator">></span> <span class="token punctuation">{</span>
    done<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    value<span class="token punctuation">:</span> TReturn<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In short, what this means is that you’ll be able to appropriately narrow down values from iterators when dealing with them directly.</p>
<p>To correctly represent the types that can be passed in to a generator from calls to <code class="language-text">next()</code>, TypeScript 3.6 also infers certain uses of <code class="language-text">yield</code> within the body of a generator function.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">yield</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
x<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// first call to 'next' is always ignored</span>
x<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error! 'number' is not assignable to 'string'</span></code></pre></div>
<p>If you’d prefer to be explicit, you can also enforce the type of values that can be returned, yielded, and evaluated from <code class="language-text">yield</code> expressions using an explicit return type.
Below, <code class="language-text">next()</code> can only be called with <code class="language-text">boolean</code>s, and depending on the value of <code class="language-text">done</code>, <code class="language-text">value</code> is either a <code class="language-text">string</code> or a <code class="language-text">number</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">/**
 * - yields numbers
 * - returns strings
 * - can be passed in booleans
 */</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Generator<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">"done!"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> iter <span class="token operator">=</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> curr <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>curr<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    curr <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// prints:</span>
<span class="token comment">//</span>
<span class="token comment">// 0</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
<span class="token comment">// 4</span>
<span class="token comment">// 5</span>
<span class="token comment">// DONE!</span></code></pre></div>
<p>For more details on the change, <a href="https://github.com/Microsoft/TypeScript/issues/2983">see the pull request here</a>.</p>
<h2>More Accurate Array Spread</h2>
<p>In pre-ES2015 targets, the most faithful emit for constructs like <code class="language-text">for</code>/<code class="language-text">of</code> loops and array spreads can be a bit heavy.
For this reason, TypeScript uses a simpler emit by default that only supports array types, and supports iterating on other types using the <code class="language-text">--downlevelIteration</code> flag.
The looser default without <code class="language-text">--downlevelIteration</code> works fairly well; however, there were some common cases where the transformation of array spreads had observable differences.
For example, the following array containing a spread</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre></div>
<p>can be rewritten as the following array literal</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span></code></pre></div>
<p>However, TypeScript would instead transform the original code into this code:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>which is slightly different.
<code class="language-text">Array(5)</code> produces an array with a length of 5, but with no defined property slots.</p>
<p>TypeScript 3.6 introduces a new <code class="language-text">__spreadArrays</code> helper to accurately model what happens in ECMAScript 2015 in older targets outside of <code class="language-text">--downlevelIteration</code>.
<code class="language-text">__spreadArrays</code> is also available in <a href="https://github.com/Microsoft/tslib/">tslib</a>.</p>
<p>For more information, <a href="https://github.com/microsoft/TypeScript/pull/31166">see the relevant pull request</a>.</p>
<h2>Improved UX Around Promises</h2>
<p>TypeScript 3.6 introduces some improvements for when <code class="language-text">Promise</code>s are mis-handled.</p>
<p>For example, it’s often very common to forget to <code class="language-text">.then()</code> or <code class="language-text">await</code> the contents of a <code class="language-text">Promise</code> before passing it to another function.
TypeScript’s error messages are now specialized, and inform the user that perhaps they should consider using the <code class="language-text">await</code> keyword.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">getUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">displayUser</span><span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">:</span> User</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">displayUser</span><span class="token punctuation">(</span><span class="token function">getUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//              ~~~~~~~~~~~~~</span>
<span class="token comment">// Argument of type 'Promise&lt;User>' is not assignable to parameter of type 'User'.</span>
<span class="token comment">//   ...</span>
<span class="token comment">// Did you forget to use 'await'?</span>
<span class="token punctuation">}</span></code></pre></div>
<p>It’s also common to try to access a method before <code class="language-text">await</code>-ing or <code class="language-text">.then()</code>-ing a <code class="language-text">Promise</code>.
This is another example, among many others, where we’re able to do better.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCuteAnimals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://reddit.com/r/aww.json"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">//   ~~~~</span>
    <span class="token comment">// Property 'json' does not exist on type 'Promise&lt;Response>'.</span>
    <span class="token comment">//</span>
    <span class="token comment">// Did you forget to use 'await'?</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/issues/30646">see the originating issue</a>, as well as the pull requests that link back to it.</p>
<h2>Better Unicode Support for Identifiers</h2>
<p>TypeScript 3.6 contains better support for Unicode characters in identifiers when emitting to ES2015 and later targets.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> 𝓱𝓮𝓵𝓵𝓸 <span class="token operator">=</span> <span class="token string">"world"</span><span class="token punctuation">;</span> <span class="token comment">// previously disallowed, now allowed in '--target es2015'</span></code></pre></div>
<h2><code class="language-text">import.meta</code> Support in SystemJS</h2>
<p>TypeScript 3.6 supports transforming <code class="language-text">import.meta</code> to <code class="language-text">context.meta</code> when your <code class="language-text">module</code> target is set to <code class="language-text">system</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// This module:</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

<span class="token comment">// gets turned into the following:</span>

System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    setters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">execute</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2><code class="language-text">get</code> and <code class="language-text">set</code> Accessors Are Allowed in Ambient Contexts</h2>
<p>In previous versions of TypeScript, the language didn’t allow <code class="language-text">get</code> and <code class="language-text">set</code> accessors in ambient contexts (like in <code class="language-text">declare</code>-d classes, or in <code class="language-text">.d.ts</code> files in general).
The rationale was that accessors weren’t distinct from properties as far as writing and reading to these properties;
however, <a href="https://github.com/tc39/proposal-class-fields/issues/248">because ECMAScript’s class fields proposal may have differing behavior from in existing versions of TypeScript</a>, we realized we needed a way to communicate this different behavior to provide appropriate errors in subclasses.</p>
<p>As a result, users can write getters and setters in ambient contexts in TypeScript 3.6.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token comment">// Allowed in 3.6+.</span>
    <span class="token keyword">get</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> <span class="token function">x</span><span class="token punctuation">(</span>val<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In TypeScript 3.7, the compiler itself will take advantage of this feature so that generated <code class="language-text">.d.ts</code> files will also emit <code class="language-text">get</code>/<code class="language-text">set</code> accessors.</p>
<h2>Ambient Classes and Functions Can Merge</h2>
<p>In previous versions of TypeScript, it was an error to merge classes and functions under any circumstances.
Now, ambient classes and functions (classes/functions with the <code class="language-text">declare</code> modifier, or in <code class="language-text">.d.ts</code> files) can merge.
This means that now you can write the following:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">Point2D</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> Point2D<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>instead of needing to use </p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">var</span> Point2D<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Point2D<span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Point2D<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>One advantage of this is that the callable constructor pattern can be easily expressed while also allowing namespaces to merge with these declarations (since <code class="language-text">var</code> declarations can’t merge with <code class="language-text">namespace</code>s).</p>
<p>In TypeScript 3.7, the compiler will take advantage of this feature so that <code class="language-text">.d.ts</code> files generated from <code class="language-text">.js</code> files can appropriately capture both the callability and constructability of a class-like function.</p>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/32584">see the original PR on GitHub</a>.</p>
<h2>APIs to Support <code class="language-text">--build</code> and <code class="language-text">--incremental</code></h2>
<p>TypeScript 3.0 introduced support for referencing other and building them incrementally using the <code class="language-text">--build</code> flag.
Additionally, TypeScript 3.4 introduced the <code class="language-text">--incremental</code> flag for saving information about previous compilations to only rebuild certain files.
These flags were incredibly useful for structuring projects more flexibly and speeding builds up.
Unfortunately, using these flags didn’t work with 3rd party build tools like Gulp and Webpack.
TypeScript 3.6 now exposes two sets of APIs to operate on project references and incremental program building.</p>
<p>For creating <code class="language-text">--incremental</code> builds, users can leverage the <code class="language-text">createIncrementalProgram</code> and <code class="language-text">createIncrementalCompilerHost</code> APIs.
Users can also re-hydrate old program instances from <code class="language-text">.tsbuildinfo</code> files generated by this API using the newly exposed <code class="language-text">readBuilderProgram</code> function, which is only meant to be used as for creating new programs (i.e. you can’t modify the returned instance - it’s only meant to be used for the <code class="language-text">oldProgram</code> parameter in other <code class="language-text">create*Program</code> functions).</p>
<p>For leveraging project references, a new <code class="language-text">createSolutionBuilder</code> function has been exposed, which returns an instance of the new type <code class="language-text">SolutionBuilder</code>.</p>
<p>For more details on these APIs, you can <a href="https://github.com/microsoft/TypeScript/pull/31432">see the original pull request</a>.</p>
<h2>Semicolon-Aware Code Edits</h2>
<p>Editors like Visual Studio and Visual Studio Code can automatically apply quick fixes, refactorings, and other transformations like automatically importing values from other modules.
These transformations are powered by TypeScript, and older versions of TypeScript unconditionally added semicolons to the end of every statement; unfortunately, this disagreed with many users’ style guidelines, and many users were displeased with the editor inserting semicolons.</p>
<p>TypeScript is now smart enough to detect whether your file uses semicolons when applying these sorts of edits.
If your file generally lacks semicolons, TypeScript won’t add one.</p>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/31801">see the corresponding pull request</a>.</p>
<h2>Smarter Auto-Import Syntax</h2>
<p>JavaScript has a lot of different module syntaxes or conventions: the one in the ECMAScript standard, the one Node already supports (CommonJS), AMD, System.js, and more!
For the most part, TypeScript would default to auto-importing using ECMAScript module syntax, which was often inappropriate in certain TypeScript projects with different compiler settings, or in Node projects with plain JavaScript and <code class="language-text">require</code> calls.</p>
<p>TypeScript 3.6 is now a bit smarter about looking at your existing imports before deciding on how to auto-import other modules.
You can <a href="https://github.com/microsoft/TypeScript/pull/32684">see more details in the original pull request here</a>.</p>
<h2><code class="language-text">await</code> Completions on Promises</h2>
<h2>New TypeScript Playground</h2>
<p>The TypeScript playground has received a much-needed refresh with handy new functionality!
The new playground is largely a fork of <a href="https://github.com/agentcooper">Artem Tyurin</a>’s <a href="https://github.com/agentcooper/typescript-play">TypeScript playground</a> which community members have been using more and more.
We owe Artem a big thanks for helping out here!</p>
<p>The new playground now supports many new options including:</p>
<ul>
<li>The <code class="language-text">target</code> option (allowing users to switch out of <code class="language-text">es5</code> to <code class="language-text">es3</code>, <code class="language-text">es2015</code>, <code class="language-text">esnext</code>, etc.)</li>
<li>All the strictness flags (including just <code class="language-text">strict</code>)</li>
<li>Support for plain JavaScript files (using <code class="language-text">allowJS</code> and optionally <code class="language-text">checkJs</code>)</li>
</ul>
<p>These options also persist when sharing links to playground samples, allowing users to more reliably share examples without having to tell the recipient “oh, don’t forget to turn on the <code class="language-text">noImplicitAny</code> option!“.</p>
<p>In the near future, we’re going to be refreshing the playground samples, adding JSX support, and polishing automatic type acquisition, meaning that you’ll be able to see the same experience on the playground as you’d get in your personal editor.</p>
<p>As we improve the playground and the website, <a href="https://github.com/microsoft/TypeScript-Website/">we welcome feedback and pull requests on GitHub</a>!</p>
<h2>TypeScript 3.5</h2>
<h2>Speed improvements</h2>
<p>TypeScript 3.5 introduces several optimizations around type-checking and incremental builds.</p>
<h3>Type-checking speed-ups</h3>
<p>TypeScript 3.5 contains certain optimizations over TypeScript 3.4 for type-checking more efficiently.
These improvements are significantly more pronounced in editor scenarios where type-checking drives operations like code completion lists.</p>
<h3><code class="language-text">--incremental</code> improvements</h3>
<p>TypeScript 3.5 improves on 3.4’s <code class="language-text">--incremental</code> build mode, by saving information about how the state of the world was calculated - compiler settings, why files were looked up, where files were found, etc.
In scenarios involving hundreds of projects using TypeScript’s project references in <code class="language-text">--build</code> mode, <a href="https://github.com/Microsoft/TypeScript/pull/31101">we’ve found that the amount of time rebuilding can be reduced by as much as 68% compared to TypeScript 3.4</a>!</p>
<p>For more details, you can see the pull requests to</p>
<ul>
<li><a href="https://github.com/Microsoft/TypeScript/pull/31100">cache module resolution</a></li>
<li><a href="https://github.com/Microsoft/TypeScript/pull/31101">cache settings calculated from <code class="language-text">tsconfig.json</code></a></li>
</ul>
<h2>The <code class="language-text">Omit</code> helper type</h2>
<p>TypeScript 3.5 introduces the new <code class="language-text">Omit</code> helper type, which creates a new type with some properties dropped from the original.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> QuantumPerson <span class="token operator">=</span> Omit<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">"location"</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// equivalent to</span>
<span class="token keyword">type</span> QuantumPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Here we were able to copy over all the properties of <code class="language-text">Person</code> except for <code class="language-text">location</code> using the <code class="language-text">Omit</code> helper.</p>
<p>For more details, <a href="https://github.com/Microsoft/TypeScript/pull/30552">see the pull request on GitHub to add <code class="language-text">Omit</code></a>, as well as <a href="https://github.com/microsoft/TypeScript/pull/31134">the change to use <code class="language-text">Omit</code> for object rest</a>.</p>
<h3>Improved excess property checks in union types</h3>
<p>In TypeScript 3.4 and earlier, certain excess properties were allowed in situations where they really shouldn’t have been.
For instance, TypeScript 3.4 permitted the incorrect <code class="language-text">name</code> property in the object literal even though its types don’t match between <code class="language-text">Point</code> and <code class="language-text">Label</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> Label <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> thing<span class="token punctuation">:</span> Point <span class="token operator">|</span> Label <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// uh-oh!</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Previously, a non-disciminated union wouldn’t have <em>any</em> excess property checking done on its members, and as a result, the incorrectly typed <code class="language-text">name</code> property slipped by.</p>
<p>In TypeScript 3.5, the type-checker at least verifies that all the provided properties belong to <em>some</em> union member and have the appropriate type, meaning that the sample above correctly issues an error.</p>
<p>Note that partial overlap is still permitted as long as the property types are valid.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> pl<span class="token punctuation">:</span> Point <span class="token operator">|</span> Label <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">"origin"</span> <span class="token comment">// okay</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2>The <code class="language-text">--allowUmdGlobalAccess</code> flag</h2>
<p>In TypeScript 3.5, you can now reference UMD global declarations like</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">export as namespace foo;</code></pre></div>
<p>from anywhere - even modules - using the new <code class="language-text">--allowUmdGlobalAccess</code> flag.</p>
<p>This mode adds flexibility for mixing and matching the way 3rd party libraries, where globals that libraries declare can always be consumed, even from within modules.</p>
<p>For more details, <a href="https://github.com/Microsoft/TypeScript/pull/30776/files">see the pull request on GitHub</a>.</p>
<h2>Smarter union type checking</h2>
<p>In TypeScript 3.4 and prior, the following example would fail:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token punctuation">{</span> done<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token constant">T</span> <span class="token operator">=</span>
    <span class="token operator">|</span> <span class="token punctuation">{</span> done<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>
    <span class="token operator">|</span> <span class="token punctuation">{</span> done<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> source<span class="token punctuation">:</span> <span class="token constant">S</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> target<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

target <span class="token operator">=</span> source<span class="token punctuation">;</span></code></pre></div>
<p>That’s because <code class="language-text">S</code> isn’t assignable to <code class="language-text">{ done: false, value: number }</code> nor <code class="language-text">{ done: true, value: number }</code>.
Why?
Because the <code class="language-text">done</code> property in <code class="language-text">S</code> isn’t specific enough - it’s <code class="language-text">boolean</code> whereas each constituent of <code class="language-text">T</code> has a <code class="language-text">done</code> property that’s specifically <code class="language-text">true</code> or <code class="language-text">false</code>.
That’s what we meant by each constituent type being checked in isolation: TypeScript doesn’t just union each property together and see if <code class="language-text">S</code> is assignable to that.
If it did, some bad code could get through like the following:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
    value<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"bar"</span><span class="token punctuation">;</span>
    value<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Foo <span class="token operator">|</span> Bar</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"foo"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// uh-oh - luckily TypeScript errors here!</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
    value<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>However, this was a bit overly strict for the original example.
If you figure out the precise type of any possible value of <code class="language-text">S</code>, you can actually see that it matches the types in <code class="language-text">T</code> exactly.</p>
<p>In TypeScript 3.5, when assigning to types with discriminant properties like in <code class="language-text">T</code>, the language actually <em>will</em> go further and decompose types like <code class="language-text">S</code> into a union of every possible inhabitant type.
In this case, since <code class="language-text">boolean</code> is a union of <code class="language-text">true</code> and <code class="language-text">false</code>, <code class="language-text">S</code> will be viewed as a union of <code class="language-text">{ done: false, value: number }</code> and <code class="language-text">{ done: true, value: number }</code>.</p>
<p>For more details, you can <a href="https://github.com/microsoft/TypeScript/pull/30779">see the original pull request on GitHub</a>.</p>
<h2>Higher order type inference from generic constructors</h2>
<p>In TypeScript 3.4, we improved inference for when generic functions that return functions like so:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> compose<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">></span><span class="token punctuation">(</span>
    <span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token function-variable function">g</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">y<span class="token punctuation">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">V</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">return</span> <span class="token parameter">x</span> <span class="token operator">=></span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>took other generic functions as arguments, like so:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> arrayify<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Box<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token constant">U</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> boxify<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Box<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> y <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newFn <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>arrayify<span class="token punctuation">,</span> boxify<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Instead of a relatively useless type like <code class="language-text">(x: {}) =&gt; Box&lt;{}[]&gt;</code>, which older versions of the language would infer, TypeScript 3.4’s inference allows <code class="language-text">newFn</code> to be generic.
Its new type is <code class="language-text">&lt;T&gt;(x: T) =&gt; Box&lt;T[]&gt;</code>.</p>
<p>TypeScript 3.5 generalizes this behavior to work on constructor functions as well.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"box"</span><span class="token punctuation">;</span>
    value<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bag</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"bag"</span><span class="token punctuation">;</span>
    value<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> composeCtor<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">></span><span class="token punctuation">(</span>
    <span class="token constant">F</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">G</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token parameter">y<span class="token punctuation">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">V</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">return</span> <span class="token parameter">x</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">G</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token function">composeCtor</span><span class="token punctuation">(</span>Box<span class="token punctuation">,</span> Bag<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// has type '&lt;T>(x: T) => Bag&lt;Box&lt;T>>'</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// has type 'Bag&lt;Box&lt;number>>'</span></code></pre></div>
<p>In addition to compositional patterns like the above, this new inference on generic constructors means that functions that operate on class components in certain UI libraries like React can more correctly operate on generic class components.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> ComponentClass<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">:</span> <span class="token constant">P</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> Component<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span> <span class="token punctuation">{</span>
    props<span class="token punctuation">:</span> <span class="token constant">P</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">:</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> myHoc<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">:</span> ComponentClass<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> ComponentClass<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">type</span> NestedProps<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> stuff<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">GenericComponent</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token operator">&lt;</span>NestedProps<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// type is 'new &lt;T>(props: NestedProps&lt;T>) => Component&lt;NestedProps&lt;T>>'</span>
<span class="token keyword">const</span> GenericComponent2 <span class="token operator">=</span> <span class="token function">myHoc</span><span class="token punctuation">(</span>GenericComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>To learn more, <a href="https://github.com/microsoft/TypeScript/pull/31116">check out the original pull request on GitHub</a>.</p>
<h2>TypeScript 3.4</h2>
<h2>Faster subsequent builds with the <code class="language-text">--incremental</code> flag</h2>
<p>TypeScript 3.4 introduces a new flag called <code class="language-text">--incremental</code> which tells TypeScript to save information about the project graph from the last compilation.
The next time TypeScript is invoked with <code class="language-text">--incremental</code>, it will use that information to detect the least costly way to type-check and emit changes to your project.</p>
<div class="gatsby-highlight" data-language="json5"><pre class="language-json5"><code class="language-json5"><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token property">"incremental"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./lib"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./src"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>By default with these settings, when we run <code class="language-text">tsc</code>, TypeScript will look for a file called <code class="language-text">.tsbuildinfo</code> in the output directory (<code class="language-text">./lib</code>).
If <code class="language-text">./lib/.tsbuildinfo</code> doesn’t exist, it’ll be generated.
But if it does, <code class="language-text">tsc</code> will try to use that file to incrementally type-check and update our output files.</p>
<p>These <code class="language-text">.tsbuildinfo</code> files can be safely deleted and don’t have any impact on our code at runtime - they’re purely used to make compilations faster.
We can also name them anything that we want, and place them anywhere we want using the <code class="language-text">--tsBuildInfoFile</code> flag.</p>
<div class="gatsby-highlight" data-language="json5"><pre class="language-json5"><code class="language-json5"><span class="token comment">// front-end.tsconfig.json</span>
<span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"incremental"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"tsBuildInfoFile"</span><span class="token operator">:</span> <span class="token string">"./buildcache/front-end"</span><span class="token punctuation">,</span>
        <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./lib"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./src"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Composite projects</h3>
<p>Part of the intent with composite projects (<code class="language-text">tsconfig.json</code>s with <code class="language-text">composite</code> set to <code class="language-text">true</code>) is that references between different projects can be built incrementally.
As such, composite projects will <strong>always</strong> produce <code class="language-text">.tsbuildinfo</code> files.</p>
<h3><code class="language-text">outFile</code></h3>
<p>When <code class="language-text">outFile</code> is used, the build information file’s name will be based on the output file’s name.
As an example, if our output JavaScript file is <code class="language-text">./output/foo.js</code>, then under the <code class="language-text">--incremental</code> flag, TypeScript will generate the file <code class="language-text">./output/foo.tsbuildinfo</code>.
As above, this can be controlled with the <code class="language-text">--tsBuildInfoFile</code> flag.</p>
<h2>Higher order type inference from generic functions</h2>
<p>TypeScript 3.4 can now produce generic function types when inference from other generic functions produces free type variables for inferences.
This means many function composition patterns now work better in 3.4.</p>
<p>To get more specific, let’s build up some motivation and consider the following <code class="language-text">compose</code> function:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> compose<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">:</span> <span class="token constant">A</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token function-variable function">g</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">:</span> <span class="token constant">B</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">:</span> <span class="token constant">A</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">C</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token parameter">x</span> <span class="token operator">=></span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">compose</code> takes two other functions:</p>
<ul>
<li><code class="language-text">f</code> which takes some argument (of type <code class="language-text">A</code>) and returns a value of type <code class="language-text">B</code></li>
<li><code class="language-text">g</code> which takes an argument of type <code class="language-text">B</code> (the type <code class="language-text">f</code> returned), and returns a value of type <code class="language-text">C</code></li>
</ul>
<p><code class="language-text">compose</code> then returns a function which feeds its argument through <code class="language-text">f</code> and then <code class="language-text">g</code>.</p>
<p>When calling this function, TypeScript will try to figure out the types of <code class="language-text">A</code>, <code class="language-text">B</code>, and <code class="language-text">C</code> through a process called <em>type argument inference</em>.
This inference process usually works pretty well:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getDisplayName</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">:</span> Person</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> p<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// has type '(p: Person) => number'</span>
<span class="token keyword">const</span> getDisplayNameLength <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>
    getDisplayName<span class="token punctuation">,</span>
    getLength<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// works and returns the type 'number'</span>
<span class="token function">getDisplayNameLength</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Person McPersonface"</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The inference process is fairly straightforward here because <code class="language-text">getDisplayName</code> and <code class="language-text">getLength</code> use types that can easily be referenced.
However, in TypeScript 3.3 and earlier, generic functions like <code class="language-text">compose</code> didn’t work so well when passed other generic functions.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> makeArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> makeBox<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Box<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// has type '(arg: {}) => Box&lt;{}[]>'</span>
<span class="token keyword">const</span> makeBoxedArray <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>
    makeArray<span class="token punctuation">,</span>
    makeBox<span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token function">makeBoxedArray</span><span class="token punctuation">(</span><span class="token string">"hello!"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                                ~~~~~~~~~~~</span>
<span class="token comment">// error: Property 'toUpperCase' does not exist on type '{}'.</span></code></pre></div>
<p>In older versions, TypeScript would infer the empty object type (<code class="language-text">{}</code>) when inferring from other type variables like <code class="language-text">T</code> and <code class="language-text">U</code>.</p>
<p>During type argument inference in TypeScript 3.4, for a call to a generic function that returns a function type, TypeScript <em>will</em>, as appropriate, propagate type parameters from generic function arguments onto the resulting function type.</p>
<p>In other words, instead of producing the type</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">(arg: {}) =&gt; Box&lt;{}[]&gt;</code></pre></div>
<p>TypeScript 3.4 produces the type</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> Box<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></code></pre></div>
<p>Notice that <code class="language-text">T</code> has been propagated from <code class="language-text">makeArray</code> into the resulting type’s type parameter list.
This means that genericity from <code class="language-text">compose</code>’s arguments has been preserved and our <code class="language-text">makeBoxedArray</code> sample will just work!</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> makeArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> makeBox<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Box<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// has type '&lt;T>(arg: T) => Box&lt;T[]>'</span>
<span class="token keyword">const</span> makeBoxedArray <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>
    makeArray<span class="token punctuation">,</span>
    makeBox<span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token comment">// works with no problem!</span>
<span class="token function">makeBoxedArray</span><span class="token punctuation">(</span><span class="token string">"hello!"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>For more details, you can <a href="https://github.com/Microsoft/TypeScript/pull/30215">read more at the original change</a>.</p>
<h2>Improvements for <code class="language-text">ReadonlyArray</code> and <code class="language-text">readonly</code> tuples</h2>
<p>TypeScript 3.4 makes it a little bit easier to use read-only array-like types.</p>
<h3>A new syntax for <code class="language-text">ReadonlyArray</code></h3>
<p>The <code class="language-text">ReadonlyArray</code> type describes <code class="language-text">Array</code>s that can only be read from.
Any variable with a reference to a <code class="language-text">ReadonlyArray</code> can’t add, remove, or replace any elements of the array.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// okay</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"hello!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>While it’s good practice to use <code class="language-text">ReadonlyArray</code> over <code class="language-text">Array</code> when no mutation is intended, it’s often been a pain given that arrays have a nicer syntax.
Specifically, <code class="language-text">number[]</code> is a shorthand version of <code class="language-text">Array&lt;number&gt;</code>, just as <code class="language-text">Date[]</code> is a shorthand for <code class="language-text">Array&lt;Date&gt;</code>.</p>
<p>TypeScript 3.4 introduces a new syntax for <code class="language-text">ReadonlyArray</code> using a new <code class="language-text">readonly</code> modifier for array types.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">:</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// okay</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"hello!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span>
<span class="token punctuation">}</span></code></pre></div>
<h3><code class="language-text">readonly</code> tuples</h3>
<p>TypeScript 3.4 also introduces new support for <code class="language-text">readonly</code> tuples.
We can prefix any tuple type with the <code class="language-text">readonly</code> keyword to make it a <code class="language-text">readonly</code> tuple, much like we now can with array shorthand syntax.
As you might expect, unlike ordinary tuples whose slots could be written to, <code class="language-text">readonly</code> tuples only permit reading from those positions.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">pair<span class="token punctuation">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// okay</span>
    pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello!"</span><span class="token punctuation">;</span>     <span class="token comment">// error</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The same way that ordinary tuples are types that extend from <code class="language-text">Array</code> - a tuple with elements of type <code class="language-text">T</code><sub><code class="language-text">1</code></sub>, <code class="language-text">T</code><sub><code class="language-text">2</code></sub>, … <code class="language-text">T</code><sub><code class="language-text">n</code></sub> extends from <code class="language-text">Array&lt;</code> <code class="language-text">T</code><sub><code class="language-text">1</code></sub> | <code class="language-text">T</code><sub><code class="language-text">2</code></sub> | … <code class="language-text">T</code><sub><code class="language-text">n</code></sub> <code class="language-text">&gt;</code> - <code class="language-text">readonly</code> tuples are types that extend from <code class="language-text">ReadonlyArray</code>. So a <code class="language-text">readonly</code> tuple with elements <code class="language-text">T</code><sub><code class="language-text">1</code></sub>, <code class="language-text">T</code><sub><code class="language-text">2</code></sub>, … <code class="language-text">T</code><sub><code class="language-text">n</code></sub> extends from <code class="language-text">ReadonlyArray&lt;</code> <code class="language-text">T</code><sub><code class="language-text">1</code></sub> | <code class="language-text">T</code><sub><code class="language-text">2</code></sub> | … <code class="language-text">T</code><sub><code class="language-text">n</code></sub> <code class="language-text">&gt;</code>.</p>
<h3><code class="language-text">readonly</code> mapped type modifiers and <code class="language-text">readonly</code> arrays</h3>
<p>In earlier versions of TypeScript, we generalized mapped types to operate differently on array-like types.
This meant that a mapped type like <code class="language-text">Boxify</code> could work on arrays and tuples alike.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span>

<span class="token keyword">type</span> Boxify<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Box<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">></span>
<span class="token punctuation">}</span>

<span class="token comment">// { a: Box&lt;string>, b: Box&lt;number> }</span>
<span class="token keyword">type</span> <span class="token constant">A</span> <span class="token operator">=</span> Boxify<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// Array&lt;Box&lt;number>></span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> Boxify<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// [Box&lt;string>, Box&lt;number>]</span>
<span class="token keyword">type</span> <span class="token constant">C</span> <span class="token operator">=</span> Boxify<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>Unfortunately, mapped types like the <code class="language-text">Readonly</code> utility type were effectively no-ops on array and tuple types.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// lib.d.ts</span>
<span class="token keyword">type</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// How code acted *before* TypeScript 3.4</span>

<span class="token comment">// { readonly a: string, readonly b: number }</span>
<span class="token keyword">type</span> <span class="token constant">A</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// number[]</span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// [string, boolean]</span>
<span class="token keyword">type</span> <span class="token constant">C</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>In TypeScript 3.4, the <code class="language-text">readonly</code> modifier in a mapped type will automatically convert array-like types to their corresponding <code class="language-text">readonly</code> counterparts.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// How code acts now *with* TypeScript 3.4</span>

<span class="token comment">// { readonly a: string, readonly b: number }</span>
<span class="token keyword">type</span> <span class="token constant">A</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// readonly number[]</span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// readonly [string, boolean]</span>
<span class="token keyword">type</span> <span class="token constant">C</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>Similarly, you could write a utility type like <code class="language-text">Writable</code> mapped type that strips away <code class="language-text">readonly</code>-ness, and that would convert <code class="language-text">readonly</code> array containers back to their mutable equivalents.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Writable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// { a: string, b: number }</span>
<span class="token keyword">type</span> <span class="token constant">A</span> <span class="token operator">=</span> Writable<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// number[]</span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> Writable<span class="token operator">&lt;</span><span class="token keyword">readonly</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// [string, boolean]</span>
<span class="token keyword">type</span> <span class="token constant">C</span> <span class="token operator">=</span> Writable<span class="token operator">&lt;</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<h3>Caveats</h3>
<p>Despite its appearance, the <code class="language-text">readonly</code> type modifier can only be used for syntax on array types and tuple types.
It is not a general-purpose type operator.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> err1<span class="token punctuation">:</span> <span class="token keyword">readonly</span> Set<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// error!</span>
<span class="token keyword">let</span> err2<span class="token punctuation">:</span> <span class="token keyword">readonly</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// error!</span>

<span class="token keyword">let</span> okay<span class="token punctuation">:</span> <span class="token keyword">readonly</span> <span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// works fine</span></code></pre></div>
<p>You can <a href="https://github.com/Microsoft/TypeScript/pull/29435">see more details in the pull request</a>.</p>
<h2><code class="language-text">const</code> assertions</h2>
<p>TypeScript 3.4 introduces a new construct for literal values called <em><code class="language-text">const</code></em> assertions.
Its syntax is a type assertion with <code class="language-text">const</code> in place of the type name (e.g. <code class="language-text">123 as const</code>).
When we construct new literal expressions with <code class="language-text">const</code> assertions, we can signal to the language that</p>
<ul>
<li>no literal types in that expression should be widened (e.g. no going from <code class="language-text">&quot;hello&quot;</code> to <code class="language-text">string</code>)</li>
<li>object literals get <code class="language-text">readonly</code> properties</li>
<li>array literals become <code class="language-text">readonly</code> tuples</li>
</ul>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Type '"hello"'</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">"hello"</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment">// Type 'readonly [10, 20]'</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment">// Type '{ readonly text: "hello" }'</span>
<span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"hello"</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span></code></pre></div>
<p>Outside of <code class="language-text">.tsx</code> files, the angle bracket assertion syntax can also be used.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Type '"hello"'</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token keyword">const</span><span class="token operator">></span><span class="token string">"hello"</span><span class="token punctuation">;</span>

<span class="token comment">// Type 'readonly [10, 20]'</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token keyword">const</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Type '{ readonly text: "hello" }'</span>
<span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token keyword">const</span><span class="token operator">></span><span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"hello"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>This feature means that types that would otherwise be used just to hint immutability to the compiler can often be omitted.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Works with no types referenced or declared.</span>
<span class="token comment">// We only needed a single const assertion.</span>
<span class="token keyword">function</span> <span class="token function">getShapes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> kind<span class="token punctuation">:</span> <span class="token string">"circle"</span><span class="token punctuation">,</span> radius<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> kind<span class="token punctuation">:</span> <span class="token string">"square"</span><span class="token punctuation">,</span> sideLength<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> shape <span class="token keyword">of</span> <span class="token function">getShapes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Narrows perfectly!</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shape<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"circle"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Circle radius"</span><span class="token punctuation">,</span> shape<span class="token punctuation">.</span>radius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Square side length"</span><span class="token punctuation">,</span> shape<span class="token punctuation">.</span>sideLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Notice the above needed no type annotations.
The <code class="language-text">const</code> assertion allowed TypeScript to take the most specific type of the expression.</p>
<p>This can even be used to enable <code class="language-text">enum</code>-like patterns in plain JavaScript code if you choose not to use TypeScript’s <code class="language-text">enum</code> construct.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> Colors <span class="token operator">=</span> <span class="token punctuation">{</span>
    red<span class="token punctuation">:</span> <span class="token string">"RED"</span><span class="token punctuation">,</span>
    blue<span class="token punctuation">:</span> <span class="token string">"BLUE"</span><span class="token punctuation">,</span>
    green<span class="token punctuation">:</span> <span class="token string">"GREEN"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment">// or use an 'export default'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    red<span class="token punctuation">:</span> <span class="token string">"RED"</span><span class="token punctuation">,</span>
    blue<span class="token punctuation">:</span> <span class="token string">"BLUE"</span><span class="token punctuation">,</span>
    green<span class="token punctuation">:</span> <span class="token string">"GREEN"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span></code></pre></div>
<h3>Caveats</h3>
<p>One thing to note is that <code class="language-text">const</code> assertions can only be applied immediately on simple literal expressions.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Error! A 'const' assertion can only be applied to a</span>
<span class="token comment">// to a string, number, boolean, array, or object literal.</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment">// Works!</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span>
    <span class="token number">0</span> <span class="token keyword">as</span> <span class="token keyword">const</span> <span class="token punctuation">:</span>
    <span class="token number">1</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span></code></pre></div>
<p>Another thing to keep in mind is that <code class="language-text">const</code> contexts don’t immediately convert an expression to be fully immutable.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
    contents<span class="token punctuation">:</span> arr<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

foo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"bar"</span><span class="token punctuation">;</span>   <span class="token comment">// error!</span>
foo<span class="token punctuation">.</span>contents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// error!</span>

foo<span class="token punctuation">.</span>contents<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ...works!</span></code></pre></div>
<p>For more details, you can <a href="https://github.com/Microsoft/TypeScript/pull/29510">check out the respective pull request</a>.</p>
<h2>Type-checking for <code class="language-text">globalThis</code></h2>
<p>TypeScript 3.4 introduces support for type-checking ECMAScript’s new <code class="language-text">globalThis</code> - a global variable that, well, refers to the global scope.
Unlike the above solutions, <code class="language-text">globalThis</code> provides a standard way for accessing the global scope which can be used across different environments.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// in a global file:</span>

<span class="token keyword">var</span> abc <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">// Refers to 'abc' from above.</span>
globalThis<span class="token punctuation">.</span>abc <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></code></pre></div>
<p>Note that global variables declared with <code class="language-text">let</code> and <code class="language-text">const</code> don’t show up on <code class="language-text">globalThis</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token comment">// error! Property 'answer' does not exist on 'typeof globalThis'.</span>
globalThis<span class="token punctuation">.</span>answer <span class="token operator">=</span> <span class="token number">333333</span><span class="token punctuation">;</span></code></pre></div>
<p>It’s also important to note that TypeScript doesn’t transform references to <code class="language-text">globalThis</code> when compiling to older versions of ECMAScript.
As such, unless you’re targeting evergreen browsers (which already support <code class="language-text">globalThis</code>), you may want to <a href="https://github.com/ljharb/globalThis">use an appropriate polyfill</a> instead.</p>
<p>For more details on the implementation, see <a href="https://github.com/Microsoft/TypeScript/pull/29332">the feature’s pull request</a>.</p>
<h2>TypeScript 3.3</h2>
<h2>Improved behavior for calling union types</h2>
<p>In prior versions of TypeScript, unions of callable types could <em>only</em> be invoked if they had identical parameter lists.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Fruit <span class="token operator">=</span> <span class="token string">"apple"</span> <span class="token operator">|</span> <span class="token string">"orange"</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> Color <span class="token operator">=</span> <span class="token string">"red"</span> <span class="token operator">|</span> <span class="token string">"orange"</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token function-variable function">FruitEater</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fruit<span class="token punctuation">:</span> Fruit</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">number</span><span class="token punctuation">;</span>     <span class="token comment">// eats and ranks the fruit</span>
<span class="token keyword">type</span> <span class="token function-variable function">ColorConsumer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">:</span> Color</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// consumes and describes the colors</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> f<span class="token punctuation">:</span> FruitEater <span class="token operator">|</span> ColorConsumer<span class="token punctuation">;</span>

<span class="token comment">// Cannot invoke an expression whose type lacks a call signature.</span>
<span class="token comment">//   Type 'FruitEater | ColorConsumer' has no compatible call signatures.ts(2349)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>However, in the above example, both <code class="language-text">FruitEater</code>s and <code class="language-text">ColorConsumer</code>s should be able to take the string <code class="language-text">&quot;orange&quot;</code>, and return either a <code class="language-text">number</code> or a <code class="language-text">string</code>.</p>
<p>In TypeScript 3.3, this is no longer an error.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Fruit <span class="token operator">=</span> <span class="token string">"apple"</span> <span class="token operator">|</span> <span class="token string">"orange"</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> Color <span class="token operator">=</span> <span class="token string">"red"</span> <span class="token operator">|</span> <span class="token string">"orange"</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token function-variable function">FruitEater</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fruit<span class="token punctuation">:</span> Fruit</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">number</span><span class="token punctuation">;</span>     <span class="token comment">// eats and ranks the fruit</span>
<span class="token keyword">type</span> <span class="token function-variable function">ColorConsumer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">:</span> Color</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// consumes and describes the colors</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> f<span class="token punctuation">:</span> FruitEater <span class="token operator">|</span> ColorConsumer<span class="token punctuation">;</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// It works! Returns a 'number | string'.</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// error - Argument of type '"red"' is not assignable to parameter of type '"orange"'.</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// error - Argument of type '"red"' is not assignable to parameter of type '"orange"'.</span></code></pre></div>
<p>In TypeScript 3.3, the parameters of these signatures are <em>intersected</em> together to create a new signature.</p>
<p>In the example above, the parameters <code class="language-text">fruit</code> and <code class="language-text">color</code> are intersected together to a new parameter of type <code class="language-text">Fruit &amp; Color</code>.
<code class="language-text">Fruit &amp; Color</code> is really the same as <code class="language-text">(&quot;apple&quot; | &quot;orange&quot;) &amp; (&quot;red&quot; | &quot;orange&quot;)</code> which is equivalent to <code class="language-text">(&quot;apple&quot; &amp; &quot;red&quot;) | (&quot;apple&quot; &amp; &quot;orange&quot;) | (&quot;orange&quot; &amp; &quot;red&quot;) | (&quot;orange&quot; &amp; &quot;orange&quot;)</code>.
Each of those impossible intersections reduces to <code class="language-text">never</code>, and we’re left with <code class="language-text">&quot;orange&quot; &amp; &quot;orange&quot;</code> which is just <code class="language-text">&quot;orange&quot;</code>.</p>
<h3>Caveats</h3>
<p>This new behavior only kicks in when at most one type in the union has multiple overloads, and at most one type in the union has a generic signature.
That means methods on <code class="language-text">number[] | string[]</code> like <code class="language-text">map</code> (which is generic) still won’t be callable.</p>
<p>On the other hand, methods like <code class="language-text">forEach</code> will now be callable, but under <code class="language-text">noImplicitAny</code> there may be some issues.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"dog"</span>
    dogProp<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"cat"</span>
    catProp<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> catOrDogArray<span class="token punctuation">:</span> Dog<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> Cat<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

catOrDogArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">animal</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">//                ~~~~~~ error!</span>
    <span class="token comment">// Parameter 'animal' implicitly has an 'any' type.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This is still strictly more capable in TypeScript 3.3, and adding an explicit type annotation will work.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"dog"</span>
    dogProp<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"cat"</span>
    catProp<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> catOrDogArray<span class="token punctuation">:</span> Dog<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> Cat<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
catOrDogArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">animal<span class="token punctuation">:</span> Dog <span class="token operator">|</span> Cat</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>animal<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"dog"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        animal<span class="token punctuation">.</span>dogProp<span class="token punctuation">;</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>animal<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"cat"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        animal<span class="token punctuation">.</span>catProp<span class="token punctuation">;</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Incremental file watching for composite projects in <code class="language-text">--build --watch</code></h2>
<p>TypeScript 3.0 introduced a new feature for structuring builds called “composite projects”.
Part of the goal here was to ensure users could break up large projects into smaller parts that build quickly and preserve project structure, without compromising the existing TypeScript experience.
Thanks to composite projects, TypeScript can use <code class="language-text">--build</code> mode to recompile only the set of projects and dependencies.
You can think of this as optimizing <em>inter</em>-project builds.</p>
<p>TypeScript 2.7 also introduced <code class="language-text">--watch</code> mode builds via a new incremental “builder” API.
In a similar vein, the entire idea is that this mode only re-checks and re-emits changed files or files whose dependencies might impact type-checking.
You can think of this as optimizing <em>intra</em>-project builds.</p>
<p>Prior to 3.3, building composite projects using <code class="language-text">--build --watch</code> actually didn’t use this incremental file watching infrastructure.
An update in one project under <code class="language-text">--build --watch</code> mode would force a full build of that project, rather than determining which files within that project were affected.</p>
<p>In TypeScript 3.3, <code class="language-text">--build</code> mode’s <code class="language-text">--watch</code> flag <em>does</em> leverage incremental file watching as well.
That can mean signficantly faster builds under <code class="language-text">--build --watch</code>.
In our testing, this functionality has resulted in <strong>a reduction of 50% to 75% in build times</strong> of the original <code class="language-text">--build --watch</code> times.
<a href="https://github.com/Microsoft/TypeScript/pull/29161">You can read more on the original pull request for the change</a> to see specific numbers, but we believe most composite project users will see significant wins here.</p>
<h2>TypeScript 3.2</h2>
<h2><code class="language-text">strictBindCallApply</code></h2>
<p>TypeScript 3.2 introduces a new <code class="language-text">--strictBindCallApply</code> compiler option (in the <code class="language-text">--strict</code> family of options) with which the <code class="language-text">bind</code>, <code class="language-text">call</code>, and <code class="language-text">apply</code> methods on function objects are strongly typed and strictly checked.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// error: too few argumnts</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// error: 2nd argument is a number</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: too many arguments</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// okay! returns a string</span></code></pre></div>
<p>This is achieved by introducing two new types, <code class="language-text">CallableFunction</code> and <code class="language-text">NewableFunction</code>, in <code class="language-text">lib.d.ts</code>. These types contain specialized generic method declarations for <code class="language-text">bind</code>, <code class="language-text">call</code>, and <code class="language-text">apply</code> for regular functions and constructor functions, respectively. The declarations use generic rest parameters (see #24897) to capture and reflect parameter lists in a strongly typed manner. In <code class="language-text">--strictBindCallApply</code> mode these declarations are used in place of the (very permissive) declarations provided by type <code class="language-text">Function</code>.</p>
<h3>Caveats</h3>
<p>Since the stricter checks may uncover previously unreported errors, this is a breaking change in <code class="language-text">--strict</code> mode.</p>
<p>Additionally, <a href="https://github.com/Microsoft/TypeScript/pull/27028#issuecomment-429334450">another caveat</a> of this new functionality is that due to certain limitations, <code class="language-text">bind</code>, <code class="language-text">call</code>, and <code class="language-text">apply</code> can’t yet fully model generic functions or functions that have overloads.
When using these methods on a generic function, type parameters will be substituted with the empty object type (<code class="language-text">{}</code>), and when used on a function with overloads, only the last overload will ever be modeled.</p>
<h2>Generic spread expressions in object literals</h2>
<p>In TypeScript 3.2, object literals now allow generic spread expressions which now produce intersection types, similar to the <code class="language-text">Object.assign</code> function and JSX literals. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> taggedObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> tag<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj<span class="token punctuation">,</span> tag <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// T &amp; { tag: U }</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">taggedObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { x: number, y: number } &amp; { tag: "point" }</span></code></pre></div>
<p>Property assignments and non-generic spread expressions are merged to the greatest extent possible on either side of a generic spread expression. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> foo1<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> obj1<span class="token punctuation">:</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> obj2<span class="token punctuation">:</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj1<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span>t<span class="token punctuation">,</span> <span class="token operator">...</span>obj2<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { a: string, x: number } &amp; T &amp; { b: string, y: number }</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Non-generic spread expressions continue to be processed as before: Call and construct signatures are stripped, only non-method properties are preserved, and for properties with the same name, the type of the rightmost property is used. This contrasts with intersection types which concatenate call and construct signatures, preserve all properties, and intersect the types of properties with the same name. Thus, spreads of the same types may produce different results when they are created through instantiation of generic types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> spread<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> u<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>t<span class="token punctuation">,</span> <span class="token operator">...</span>u <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// T &amp; U</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> y<span class="token punctuation">:</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { a: string, b: string, c: boolean }</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">spread</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// { a: string, b: number } &amp; { b: string, c: boolean }</span>
<span class="token keyword">let</span> b1 <span class="token operator">=</span> s1<span class="token punctuation">.</span>b<span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">let</span> b2 <span class="token operator">=</span> s2<span class="token punctuation">.</span>b<span class="token punctuation">;</span>  <span class="token comment">// number &amp; string</span></code></pre></div>
<h2>Generic object rest variables and parameters</h2>
<p>TypeScript 3.2 also allows destructuring a rest binding from a generic variable. This is achieved by using the predefined <code class="language-text">Pick</code> and <code class="language-text">Exclude</code> helper types from <code class="language-text">lib.d.ts</code>, and using the generic type in question as well as the names of the other bindings in the destructuring pattern.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> excludeTag<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> tag<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> tag<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">return</span> rest<span class="token punctuation">;</span>  <span class="token comment">// Pick&lt;T, Exclude&lt;keyof T, "tag">></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> taggedPoint <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> tag<span class="token punctuation">:</span> <span class="token string">"point"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token function">excludeTag</span><span class="token punctuation">(</span>taggedPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { x: number, y: number }</span></code></pre></div>
<h2>BigInt</h2>
<p>BigInts are part of an upcoming proposal in ECMAScript that allow us to model theoretically arbitrarily large integers.
TypeScript 3.2 brings type-checking for BigInts, as well as support for emitting BigInt literals when targeting <code class="language-text">esnext</code>.</p>
<p>BigInt support in TypeScript introduces a new primitive type called the <code class="language-text">bigint</code> (all lowercase).
You can get a <code class="language-text">bigint</code> by calling the <code class="language-text">BigInt()</code> function or by writing out a BigInt literal by adding an <code class="language-text">n</code> to the end of any integer numeric literal:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> foo<span class="token punctuation">:</span> bigint <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the BigInt function</span>
<span class="token keyword">let</span> bar<span class="token punctuation">:</span> bigint <span class="token operator">=</span> <span class="token number">100n</span><span class="token punctuation">;</span>        <span class="token comment">// a BigInt literal</span>

<span class="token comment">// *Slaps roof of fibonacci function*</span>
<span class="token comment">// This bad boy returns ints that can get *so* big!</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">:</span> bigint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">1n</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> last <span class="token operator">=</span> <span class="token number">0n</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0n</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> current <span class="token operator">=</span> result<span class="token punctuation">;</span>
        result <span class="token operator">+=</span> last<span class="token punctuation">;</span>
        last <span class="token operator">=</span> current<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token number">10000n</span><span class="token punctuation">)</span></code></pre></div>
<p>While you might imagine close interaction between <code class="language-text">number</code> and <code class="language-text">bigint</code>, the two are separate domains.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">let</span> foo<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> bar<span class="token punctuation">:</span> bigint<span class="token punctuation">;</span>

foo <span class="token operator">=</span> bar<span class="token punctuation">;</span> <span class="token comment">// error: Type 'bigint' is not assignable to type 'number'.</span>
bar <span class="token operator">=</span> foo<span class="token punctuation">;</span> <span class="token comment">// error: Type 'number' is not assignable to type 'bigint'.</span></code></pre></div>
<p>As specified in ECMAScript, mixing <code class="language-text">number</code>s and <code class="language-text">bigint</code>s in arithmetic operations is an error.
You’ll have to explicitly convert values to <code class="language-text">BigInt</code>s.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3.141592</span> <span class="token operator">*</span> <span class="token number">10000n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// error</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3145</span> <span class="token operator">*</span> <span class="token number">10n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// error</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">3145</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// okay!</span></code></pre></div>
<p>Also important to note is that <code class="language-text">bigint</code>s produce a new string when using the <code class="language-text">typeof</code> operator: the string <code class="language-text">&quot;bigint&quot;</code>.
Thus, TypeScript correctly narrows using <code class="language-text">typeof</code> as you’d expect.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">whatKindOfNumberIsIt</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> bigint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"bigint"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"'x' is a bigint!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"'x' is a floating-point number"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We’d like to extend a huge thanks to <a href="https://github.com/calebsander">Caleb Sander</a> for all the work on this feature.
We’re grateful for the contribution, and we’re sure our users are too!</p>
<h3>Caveats</h3>
<p>As we mentioned, BigInt support is only available for the <code class="language-text">esnext</code> target.
It may not be obvious, but because BigInts have different behavior for mathematical operators like <code class="language-text">+</code>, <code class="language-text">-</code>, <code class="language-text">*</code>, etc., providing functionality for older targets where the feature doesn’t exist (like <code class="language-text">es2017</code> and below) would involve rewriting each of these operations.
TypeScript would need to dispatch to the correct behavior depending on the type, and so every addition, string concatenation, multiplication, etc. would involve a function call.</p>
<p>For that reason, we have no immediate plans to provide downleveling support.
On the bright side, Node 11 and newer versions of Chrome already support this feature, so you’ll be able to use BigInts there when targeting <code class="language-text">esnext</code>.</p>
<p>Certain targets may include a polyfill or BigInt-like runtime object.
For those purposes you may want to add <code class="language-text">esnext.bigint</code> to the <code class="language-text">lib</code> setting in your compiler options.</p>
<h2>Non-unit types as union discriminants</h2>
<p>TypeScript 3.2 makes narrowing easier by relaxing rules for what it considers a discriminant property.
Common properties of unions are now considered discriminants as long as they contain <em>some</em> singleton type (e.g. a string literal, <code class="language-text">null</code>, or <code class="language-text">undefined</code>), and they contain no generics.</p>
<p>As a result, TypeScript 3.2 considers the <code class="language-text">error</code> property in the following example to be a discriminant, whereas before it wouldn’t since <code class="language-text">Error</code> isn’t a singleton type.
Thanks to this, narrowing works correctly in the body of the <code class="language-text">unwrap</code> function.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Result<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span>
    <span class="token operator">|</span> <span class="token punctuation">{</span> error<span class="token punctuation">:</span> Error<span class="token punctuation">;</span> data<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span>
    <span class="token operator">|</span> <span class="token punctuation">{</span> error<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span> data<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> unwrap<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>result<span class="token punctuation">:</span> Result<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Here 'error' is non-null</span>
        <span class="token keyword">throw</span> result<span class="token punctuation">.</span>error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Now 'data' is non-null</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">tsconfig.json</code> inheritance via Node.js packages</h2>
<p>TypeScript 3.2 now resolves <code class="language-text">tsconfig.json</code>s from <code class="language-text">node_modules</code>. When using a bare path for the <code class="language-text">&quot;extends&quot;</code> field in <code class="language-text">tsconfig.json</code>, TypeScript will dive into <code class="language-text">node_modules</code> packages for us.</p>
<div class="gatsby-highlight" data-language="json5"><pre class="language-json5"><code class="language-json5"><span class="token punctuation">{</span>
    <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"@my-team/tsconfig-base"</span><span class="token punctuation">,</span>
    <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./**/*"</span><span class="token punctuation">]</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// Override certain options on a project-by-project basis.</span>
        <span class="token property">"strictBindCallApply"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Here, TypeScript will climb up <code class="language-text">node_modules</code> folders looking for a <code class="language-text">@my-team/tsconfig-base</code> package. For each of those packages, TypeScript will first check whether <code class="language-text">package.json</code> contains a <code class="language-text">&quot;tsconfig&quot;</code> field, and if it does, TypeScript will try to load a configuration file from that field. If neither exists, TypeScript will try to read from a <code class="language-text">tsconfig.json</code> at the root. This is similar to the lookup process for <code class="language-text">.js</code> files in packages that Node uses, and the <code class="language-text">.d.ts</code> lookup process that TypeScript already uses.</p>
<p>This feature can be extremely useful for bigger organizations, or projects with lots of distributed dependencies.</p>
<h2>The new <code class="language-text">--showConfig</code> flag</h2>
<p><code class="language-text">tsc</code>, the TypeScript compiler, supports a new flag called <code class="language-text">--showConfig</code>.
When running <code class="language-text">tsc --showConfig</code>, TypeScript will calculate the effective <code class="language-text">tsconfig.json</code> (after calculating options inherited from the <code class="language-text">extends</code> field) and print that out.
This can be useful for diagnosing configuration issues in general.</p>
<h2><code class="language-text">Object.defineProperty</code> declarations in JavaScript</h2>
<p>When writing in JavaScript files (using <code class="language-text">allowJs</code>), TypeScript now recognizes declarations that use <code class="language-text">Object.defineProperty</code>.
This means you’ll get better completions, and stronger type-checking when enabling type-checking in JavaScript files (by turning on the <code class="language-text">checkJs</code> option or adding a <code class="language-text">// @ts-check</code> comment to the top of your file).</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// @ts-check</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> writable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token function">toLowercase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    ~~~~~~~~~~~</span>
<span class="token comment">//    error:</span>
<span class="token comment">//     Property 'toLowercase' does not exist on type 'string'.</span>
<span class="token comment">//     Did you mean 'toLowerCase'?</span>

obj<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token string">"world"</span><span class="token punctuation">;</span>
<span class="token comment">//  ~</span>
<span class="token comment">//  error:</span>
<span class="token comment">//   Cannot assign to 'x' because it is a read-only property.</span></code></pre></div>
<h2>TypeScript 3.1</h2>
<h2>Mapped types on tuples and arrays</h2>
<p>In TypeScript 3.1, mapped object types<sup><a href="#ts-3-1-only-homomorphic">[1]</a></sup> over tuples and arrays now produce new tuples/arrays, rather than creating a new type where members like <code class="language-text">push()</code>, <code class="language-text">pop()</code>, and <code class="language-text">length</code> are converted.
For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> MapToPromise<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> Coordinate <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> PromiseCoordinate <span class="token operator">=</span> MapToPromise<span class="token operator">&lt;</span>Coordinate<span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// [Promise&lt;number>, Promise&lt;number>]</span></code></pre></div>
<p><code class="language-text">MapToPromise</code> takes a type <code class="language-text">T</code>, and when that type is a tuple like <code class="language-text">Coordinate</code>, only the numeric properties are converted.
In <code class="language-text">[number, number]</code>, there are two numerically named properties: <code class="language-text">0</code> and <code class="language-text">1</code>.
When given a tuple like that, <code class="language-text">MapToPromise</code> will create a new tuple where the <code class="language-text">0</code> and <code class="language-text">1</code> properties are <code class="language-text">Promise</code>s of the original type.
So the resulting type <code class="language-text">PromiseCoordinate</code> ends up with the type <code class="language-text">[Promise&lt;number&gt;, Promise&lt;number&gt;]</code>.</p>
<h2>Properties declarations on functions</h2>
<p>TypeScript 3.1 brings the ability to define properties on function declarations and <code class="language-text">const</code>-declared functons, simply by assigning to properties on these functions in the same scope.
This allows us to write canonical JavaScript code without resorting to <code class="language-text">namespace</code> hacks.
For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">readImage</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> image<span class="token punctuation">:</span> Image</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

readImage<span class="token punctuation">.</span><span class="token function-variable function">sync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> contents <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">decodeImageSync</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Here, we have a function <code class="language-text">readImage</code> which reads an image in a non-blocking asynchronous way.
In addition to <code class="language-text">readImage</code>, we’ve provided a convenience function on <code class="language-text">readImage</code> itself called <code class="language-text">readImage.sync</code>.</p>
<p>While ECMAScript exports are often a better way of providing this functionality, this new support allows code written in this style to “just work” TypeScript.
Additionaly, this approach for property declarations allows us to express common patterns like <code class="language-text">defaultProps</code> and <code class="language-text">propTypes</code> on React stateless function components (SFCs).</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">FooComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello<span class="token operator">!</span> <span class="token constant">I</span> am <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

FooComponent<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">"(anonymous)"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<!--
fs.readFile(path, (err, data) => {
        if (err) callback(err, undefined);
        else decodeImage(data, (err, image) => {
            if (err) callback(err, undefined);
            else callback(undefined, image);
        });
    });
-->
<hr>
<p><sup id="ts-3-1-only-homomorphic">[1]</sup> More specifically, homomorphic mapped types like in the above form.</p>
<h2>Version selection with <code class="language-text">typesVersions</code></h2>
<p>Feedback from our community, as well as our own experience, has shown us that leveraging the newest TypeScript features while also accomodating users on the older versions are difficult.
TypeScript introduces a new feature called <code class="language-text">typesVersions</code> to help accomodate these scenarios.</p>
<p>When using Node module resolution in TypeScript 3.1, when TypeScript cracks open a <code class="language-text">package.json</code> file to figure out which files it needs to read, it first looks at a new field called <code class="language-text">typesVersions</code>.
A <code class="language-text">package.json</code> with a <code class="language-text">typesVersions</code> field might look like this:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"package-name"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>
  <span class="token property">"types"</span><span class="token operator">:</span> <span class="token string">"./index.d.ts"</span><span class="token punctuation">,</span>
  <span class="token property">"typesVersions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">">=3.1"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ts3.1/*"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This <code class="language-text">package.json</code> tells TypeScript to check whether the current version of TypeScript is running.
If it’s 3.1 or later, it figures out the path you’ve imported relative to the package, and reads from the package’s <code class="language-text">ts3.1</code> folder.
That’s what that <code class="language-text">{ &quot;*&quot;: [&quot;ts3.1/*&quot;] }</code> means - if you’re familiar with path mapping today, it works exactly like that.</p>
<p>So in the above example, if we’re importing from <code class="language-text">&quot;package-name&quot;</code>, we’ll try to resolve from <code class="language-text">[...]/node_modules/package-name/ts3.1/index.d.ts</code> (and other relevant paths) when running in TypeScript 3.1.
If we import from <code class="language-text">package-name/foo</code>, we’ll try to look for <code class="language-text">[...]/node_modules/package-name/ts3.1/foo.d.ts</code> and <code class="language-text">[...]/node_modules/package-name/ts3.1/foo/index.d.ts</code>.</p>
<p>What if we’re not running in TypeScript 3.1 in this example?
Well, if none of the fields in <code class="language-text">typesVersions</code> get matched, TypeScript falls back to the <code class="language-text">types</code> field, so here TypeScript 3.0 and earlier will be redirected to <code class="language-text">[...]/node_modules/package-name/index.d.ts</code>.</p>
<h3>Matching behavior</h3>
<p>The way that TypeScript decides on whether a version of the compiler &#x26; language matches is by using Node’s <a href="https://github.com/npm/node-semver#ranges">semver ranges</a>.</p>
<h3>Multiple fields</h3>
<p><code class="language-text">typesVersions</code> can support multiple fields where each field name is specified by the range to match on.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"package-name"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>
  <span class="token property">"types"</span><span class="token operator">:</span> <span class="token string">"./index.d.ts"</span><span class="token punctuation">,</span>
  <span class="token property">"typesVersions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">">=3.2"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ts3.2/*"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">">=3.1"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ts3.1/*"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since ranges have the potential to overlap, determining which redirect applies is order-specific.
That means in the above example, even though both the <code class="language-text">&gt;=3.2</code> and the <code class="language-text">&gt;=3.1</code> matchers support TypeScript 3.2 and above, reversing the order could have different behavior, so the above sample would not be equivalent to the following.</p>
<div class="gatsby-highlight" data-language="json5"><pre class="language-json5"><code class="language-json5"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"package-name"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>
  <span class="token property">"types"</span><span class="token operator">:</span> <span class="token string">"./index.d.ts"</span><span class="token punctuation">,</span>
  <span class="token property">"typesVersions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// </span><span class="token property unquoted">NOTE</span><span class="token operator">:</span> this doesn't work!
    <span class="token property">">=3.1"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ts3.1/*"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">">=3.2"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ts3.2/*"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>TypeScript 3.0</h2>
<h2>Tuples in rest parameters and spread expressions</h2>
<p>TypeScript 3.0 adds support to multiple new capabilities to interact with function parameter lists as tuple types.
TypeScript 3.0 adds support for:</p>
<ul>
<li><a href="#rest-parameters-with-tuple-types">Expansion of rest parameters with tuple types into discrete parameters.</a></li>
<li><a href="#spread-expressions-with-tuple-types">Expansion of spread expressions with tuple types into discrete arguments.</a></li>
<li><a href="#generic-rest-parameters">Generic rest parameters and corresponding inference of tuple types.</a></li>
<li><a href="#optional-elements-in-tuple-types">Optional elements in tuple types.</a></li>
<li><a href="#rest-elements-in-tuple-types">Rest elements in tuple types.</a></li>
</ul>
<p>With these features it becomes possible to strongly type a number of higher-order functions that transform functions and their parameter lists.</p>
<h3>Rest parameters with tuple types</h3>
<p>When a rest parameter has a tuple type, the tuple type is expanded into a sequence of discrete parameters.
For example the following two declarations are equivalent:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">args_0<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> args_1<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> args_2<span class="token punctuation">:</span> <span class="token builtin">boolean</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></code></pre></div>
<h3>Spread expressions with tuple types</h3>
<p>When a function call includes a spread expression of a tuple type as the last argument, the spread expression corresponds to a sequence of discrete arguments of the tuple element types.</p>
<p>Thus, the following calls are equivalent:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3>Generic rest parameters</h3>
<p>A rest parameter is permitted to have a generic type that is constrained to an array type, and type inference can infer tuple types for such generic rest parameters. This enables higher-order capturing and spreading of partial parameter lists:</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> bind<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">V</span><span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">V</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token builtin">boolean</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> f2 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f3<span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (y: string, z: boolean) => void</span>
<span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f2<span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (z: boolean) => void</span>
<span class="token keyword">const</span> f0 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// () => void</span>

<span class="token function">f3</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In the declaration of <code class="language-text">f2</code> above, type inference infers types <code class="language-text">number</code>, <code class="language-text">[string, boolean]</code> and <code class="language-text">void</code> for <code class="language-text">T</code>, <code class="language-text">U</code> and <code class="language-text">V</code> respectively.</p>
<p>Note that when a tuple type is inferred from a sequence of parameters and later expanded into a parameter list, as is the case for <code class="language-text">U</code>, the original parameter names are used in the expansion (however, the names have no semantic meaning and are not otherwise observable).</p>
<h3>Optional elements in tuple types</h3>
<p>Tuple types now permit a <code class="language-text">?</code> postfix on element types to indicate that the element is optional:</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> t<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>In <code class="language-text">--strictNullChecks</code> mode, a <code class="language-text">?</code> modifier automatically includes <code class="language-text">undefined</code> in the element type, similar to optional parameters.</p>
<p>A tuple type permits an element to be omitted if it has a postfix <code class="language-text">?</code> modifier on its type and all elements to the right of it also have <code class="language-text">?</code> modifiers.</p>
<p>When tuple types are inferred for rest parameters, optional parameters in the source become optional tuple elements in the inferred type.</p>
<p>The <code class="language-text">length</code> property of a tuple type with optional elements is a union of numeric literal types representing the possible lengths.
For example, the type of the <code class="language-text">length</code> property in the tuple type <code class="language-text">[number, string?, boolean?]</code> is <code class="language-text">1 | 2 | 3</code>.</p>
<h3>Rest elements in tuple types</h3>
<p>The last element of a tuple type can be a rest element of the form <code class="language-text">...X</code>, where <code class="language-text">X</code> is an array type.
A rest element indicates that the tuple type is open-ended and may have zero or more additional elements of the array element type.
For example, <code class="language-text">[number, ...string[]]</code> means tuples with a <code class="language-text">number</code> element followed by any number of <code class="language-text">string</code> elements.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> tuple<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> args<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> numbers<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getArrayOfNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> t1 <span class="token operator">=</span> <span class="token function">tuple</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [string, number, boolean]</span>
<span class="token keyword">const</span> t2 <span class="token operator">=</span> <span class="token function">tuple</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token operator">...</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [string, ...number[]]</span></code></pre></div>
<p>The type of the <code class="language-text">length</code> property of a tuple type with a rest element is <code class="language-text">number</code>.</p>
<h2>New <code class="language-text">unknown</code> top type</h2>
<p>TypeScript 3.0 introduces a new top type <code class="language-text">unknown</code>.
<code class="language-text">unknown</code> is the type-safe counterpart of <code class="language-text">any</code>.
Anything is assignable to <code class="language-text">unknown</code>, but <code class="language-text">unknown</code> isn’t assignable to anything but itself and <code class="language-text">any</code> without a type assertion or a control flow based narrowing.
Likewise, no operations are permitted on an <code class="language-text">unknown</code> without first asserting or narrowing to a more specific type.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// In an intersection everything absorbs unknown</span>

<span class="token keyword">type</span> <span class="token constant">T00</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// null</span>
<span class="token keyword">type</span> <span class="token constant">T01</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// undefined</span>
<span class="token keyword">type</span> <span class="token constant">T02</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token keyword">null</span> <span class="token operator">&amp;</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// null &amp; undefined (which becomes never)</span>
<span class="token keyword">type</span> <span class="token constant">T03</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T04</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string[]</span>
<span class="token keyword">type</span> <span class="token constant">T05</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T06</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>

<span class="token comment">// In a union an unknown absorbs everything</span>

<span class="token keyword">type</span> <span class="token constant">T10</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T11</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T12</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T13</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T14</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T15</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token constant">T16</span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>

<span class="token comment">// Type variable and unknown in union and intersection</span>

<span class="token keyword">type</span> <span class="token constant">T20</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// T &amp; {}</span>
<span class="token keyword">type</span> <span class="token constant">T21</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// T | {}</span>
<span class="token keyword">type</span> <span class="token constant">T22</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// T</span>
<span class="token keyword">type</span> <span class="token constant">T23</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>

<span class="token comment">// unknown in conditional types</span>

<span class="token keyword">type</span> <span class="token constant">T30</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token keyword">extends</span> <span class="token class-name">T</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// Deferred</span>
<span class="token keyword">type</span> <span class="token constant">T31</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">unknown</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// Deferred (so it distributes)</span>
<span class="token keyword">type</span> <span class="token constant">T32</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token builtin">never</span> <span class="token keyword">extends</span> <span class="token class-name">T</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token constant">T33</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">never</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// Deferred</span>

<span class="token comment">// keyof unknown</span>

<span class="token keyword">type</span> <span class="token constant">T40</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token comment">// string | number | symbol</span>
<span class="token keyword">type</span> <span class="token constant">T41</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// never</span>

<span class="token comment">// Only equality operators are allowed with unknown</span>

<span class="token keyword">function</span> <span class="token function">f10</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">;</span>
    x <span class="token operator">!==</span> <span class="token number">10</span><span class="token punctuation">;</span>
    x <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token operator">-</span>x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token operator">+</span>x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// No property accesses, element accesses, or function calls</span>

<span class="token keyword">function</span> <span class="token function">f11</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    x<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">new</span> <span class="token class-name">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// typeof, instanceof, and user defined type predicates</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> x <span class="token keyword">is</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f20</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// Function</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Homomorphic mapped type over unknown</span>

<span class="token keyword">type</span> <span class="token constant">T50</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">T51</span> <span class="token operator">=</span> <span class="token constant">T50</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// { [x: string]: number }</span>
<span class="token keyword">type</span> <span class="token constant">T52</span> <span class="token operator">=</span> <span class="token constant">T50</span><span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// {}</span>

<span class="token comment">// Anything is assignable to unknown</span>

<span class="token keyword">function</span> f21<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>pAny<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> pNever<span class="token punctuation">:</span> <span class="token builtin">never</span><span class="token punctuation">,</span> pT<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    x <span class="token operator">=</span> pAny<span class="token punctuation">;</span>
    x <span class="token operator">=</span> pNever<span class="token punctuation">;</span>
    x <span class="token operator">=</span> pT<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// unknown assignable only to itself and any</span>

<span class="token keyword">function</span> <span class="token function">f22</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> v1<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> v2<span class="token punctuation">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> v3<span class="token punctuation">:</span> object <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v4<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v5<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v6<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v7<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Type parameter 'T extends unknown' not related to object</span>

<span class="token keyword">function</span> f23<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> y<span class="token punctuation">:</span> object <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Anything but primitive assignable to { [x: string]: unknown }</span>

<span class="token keyword">function</span> <span class="token function">f24</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Locals of type unknown always considered initialized</span>

<span class="token keyword">function</span> <span class="token function">f25</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Spread of unknown causes result to be unknown</span>

<span class="token keyword">function</span> <span class="token function">f26</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token operator">...</span>x <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { a: number }</span>
    <span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token operator">...</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
    <span class="token keyword">let</span> o3 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token operator">...</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y<span class="token punctuation">,</span> <span class="token operator">...</span>z <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token punctuation">}</span>

<span class="token comment">// Functions with unknown return type don't need return expressions</span>

<span class="token keyword">function</span> <span class="token function">f27</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// Rest type cannot be created from unknown</span>

<span class="token keyword">function</span> <span class="token function">f28</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Class properties of type unknown don't need definite assignment</span>

<span class="token keyword">class</span> <span class="token class-name">C1</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    b<span class="token punctuation">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
    c<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Support for <code class="language-text">defaultProps</code> in JSX</h2>
<p>TypeScript 2.9 and earlier didn’t leverage <a href="https://reactjs.org/docs/typechecking-with-proptypes.html#default-prop-values">React <code class="language-text">defaultProps</code></a> declarations inside JSX components.
Users would often have to declare properties optional and use non-null assertions inside of <code class="language-text">render</code>, or they’d use type-assertions to fix up the type of the component before exporting it.</p>
<p>TypeScript 3.0 adds supports a new type alias in the <code class="language-text">JSX</code> namespace called <code class="language-text">LibraryManagedAttributes</code>.
This helper type defines a transformation on the component’s <code class="language-text">Props</code> type, before using to check a JSX expression targeting it; thus allowing customization like: how conflicts between provided props and inferred props are handled, how inferences are mapped, how optionality is handled, and how inferences from differing places should be combined.</p>
<p>In short using this general type, we can model React’s specific behavior for things like <code class="language-text">defaultProps</code> and, to some extent, <code class="language-text">propTypes</code>.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Greet</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Props</span></span><span class="token punctuation">></span></span><span class="token plain-text"> </span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello $</span><span class="token punctuation">{</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"world"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">

// Type-checks! No type assertions needed!
let el = </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Greet</span></span> <span class="token punctuation">/></span></span></code></pre></div>
<h3>Caveats</h3>
<h4>Explicit types on <code class="language-text">defaultProps</code></h4>
<p>The default-ed properties are inferred from the <code class="language-text">defaultProps</code> property type. If an explicit type annotation is added, e.g. <code class="language-text">static defaultProps: Partial&lt;Props&gt;;</code> the compiler will not be able to identify which properties have defaults (since the type of <code class="language-text">defaultProps</code> include all properties of <code class="language-text">Props</code>).</p>
<p>Use <code class="language-text">static defaultProps: Pick&lt;Props, &quot;name&quot;&gt;;</code> as an explicit type annotation instead, or do not add a type annotation as done in the example above.</p>
<p>For stateless function components (SFCs) use ES2015 default initializers for SFCs:</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function">Greet</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">"world"</span> <span class="token punctuation">}</span><span class="token punctuation">:</span> Props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello $</span><span class="token punctuation">{</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h5>Changes to <code class="language-text">@types/React</code></h5>
<p>Corresponding changes to add <code class="language-text">LibraryManagedAttributes</code> definition to the <code class="language-text">JSX</code> namespace in <code class="language-text">@types/React</code> are still needed.
Keep in mind that there are some limitations.</p>
<h2><code class="language-text">/// &lt;reference lib=&quot;...&quot; /&gt;</code> reference directives</h2>
<p>TypeScript adds a new triple-slash-reference directive (<code class="language-text">/// &lt;reference lib=&quot;name&quot; /&gt;</code>), allowing a file to explicitly include an existing built-in <em>lib</em> file.</p>
<p>Built-in <em>lib</em> files are referenced in the same fashion as the <code class="language-text">&quot;lib&quot;</code> compiler option in <em>tsconfig.json</em> (e.g. use <code class="language-text">lib=&quot;es2015&quot;</code> and not <code class="language-text">lib=&quot;lib.es2015.d.ts&quot;</code>, etc.).</p>
<p>For declaration file authors who rely on built-in types, e.g. DOM APIs or built-in JS run-time constructors like <code class="language-text">Symbol</code> or <code class="language-text">Iterable</code>, triple-slash-reference lib directives are the recommended. Previously these .d.ts files had to add forward/duplicate declarations of such types.</p>
<h5>Example</h5>
<p>Using <code class="language-text">/// &lt;reference lib=&quot;es2017.string&quot; /&gt;</code> to one of the files in a compilation is equivalent to compiling with <code class="language-text">--lib es2017.string</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">/// &lt;reference lib="es2017.string" /></span>

<span class="token string">"foo"</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>TypeScript 2.9</h2>
<h2>Support <code class="language-text">number</code> and <code class="language-text">symbol</code> named properties with <code class="language-text">keyof</code> and mapped types</h2>
<p>TypeScript 2.9 adds support for <code class="language-text">number</code> and <code class="language-text">symbol</code> named properties in index types and mapped types.
Previously, the <code class="language-text">keyof</code> operator and mapped types only supported <code class="language-text">string</code> named properties.</p>
<p>Changes include:</p>
<ul>
<li>An index type <code class="language-text">keyof T</code> for some type <code class="language-text">T</code> is a subtype of <code class="language-text">string | number | symbol</code>.</li>
<li>A mapped type <code class="language-text">{ [P in K]: XXX }</code> permits any <code class="language-text">K</code> assignable to <code class="language-text">string | number | symbol</code>.</li>
<li>In a <code class="language-text">for...in</code> statement for an object of a generic type <code class="language-text">T</code>, the inferred type of the iteration variable was previously <code class="language-text">keyof T</code> but is now <code class="language-text">Extract&lt;keyof T, string&gt;</code>. (In other words, the subset of <code class="language-text">keyof T</code> that includes only string-like values.)</li>
</ul>
<p>Given an object type <code class="language-text">X</code>, <code class="language-text">keyof X</code> is resolved as follows:</p>
<ul>
<li>If <code class="language-text">X</code> contains a string index signature, <code class="language-text">keyof X</code> is a union of <code class="language-text">string</code>, <code class="language-text">number</code>, and the literal types representing symbol-like properties, otherwise</li>
<li>If <code class="language-text">X</code> contains a numeric index signature, <code class="language-text">keyof X</code> is a union of <code class="language-text">number</code> and the literal types representing string-like and symbol-like properties, otherwise</li>
<li><code class="language-text">keyof X</code> is a union of the literal types representing string-like, number-like, and symbol-like properties.</li>
</ul>
<p>Where:</p>
<ul>
<li>String-like properties of an object type are those declared using an identifier, a string literal, or a computed property name of a string literal type.</li>
<li>Number-like properties of an object type are those declared using a numeric literal or computed property name of a numeric literal type.</li>
<li>Symbol-like properties of an object type are those declared using a computed property name of a unique symbol type.</li>
</ul>
<p>In a mapped type <code class="language-text">{ [P in K]: XXX }</code>, each string literal type in <code class="language-text">K</code> introduces a property with a string name, each numeric literal type in <code class="language-text">K</code> introduces a property with a numeric name, and each unique symbol type in <code class="language-text">K</code> introduces a property with a unique symbol name.
Furthermore, if <code class="language-text">K</code> includes type <code class="language-text">string</code>, a string index signature is introduced, and if <code class="language-text">K</code> includes type <code class="language-text">number</code>, a numeric index signature is introduced.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token string">"c"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">enum</span> <span class="token constant">E1</span> <span class="token punctuation">{</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token keyword">enum</span> <span class="token constant">E2</span> <span class="token punctuation">{</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token string">"C"</span> <span class="token punctuation">}</span>

<span class="token keyword">type</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>       <span class="token comment">// String-like name</span>
    <span class="token number">5</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>       <span class="token comment">// Number-like name</span>
    <span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>     <span class="token comment">// String-like name</span>
    <span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>     <span class="token comment">// Number-like name</span>
    <span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>     <span class="token comment">// Symbol-like name</span>
    <span class="token punctuation">[</span><span class="token constant">E1</span><span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// Number-like name</span>
    <span class="token punctuation">[</span><span class="token constant">E2</span><span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// String-like name</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token constant">K1</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Foo<span class="token punctuation">;</span>  <span class="token comment">// "a" | 5 | "c" | 10 | typeof e | E1.A | E2.A</span>
<span class="token keyword">type</span> <span class="token constant">K2</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> Foo<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "c" | E2.A</span>
<span class="token keyword">type</span> <span class="token constant">K3</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> Foo<span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// 5 | 10 | E1.A</span>
<span class="token keyword">type</span> <span class="token constant">K4</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> Foo<span class="token punctuation">,</span> <span class="token builtin">symbol</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// typeof e</span></code></pre></div>
<p>Since <code class="language-text">keyof</code> now reflects the presence of a numeric index signature by including type <code class="language-text">number</code> in the key type, mapped types such as <code class="language-text">Partial&lt;T&gt;</code> and <code class="language-text">Readonly&lt;T&gt;</code> work correctly when applied to object types with numeric index signatures:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Arrayish<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    length<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ReadonlyArrayish<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span>Arrayish<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">const</span> map<span class="token punctuation">:</span> ReadonlyArrayish<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> n <span class="token operator">=</span> map<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> map<span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Previously of type any (or an error with --noImplicitAny)</span></code></pre></div>
<p>Furthermore, with the <code class="language-text">keyof</code> operator’s support for <code class="language-text">number</code> and <code class="language-text">symbol</code> named keys, it is now possible to abstract over access to properties of objects that are indexed by numeric literals (such as numeric enum types) and unique symbols.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token keyword">enum</span> Enum <span class="token punctuation">{</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> enumToStringMap <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Enum<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"Name A"</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Enum<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"Name B"</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Enum<span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"Name C"</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> sym1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sym2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sym3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> symbolToNumberMap <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>sym1<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>sym2<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>sym3<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token constant">KE</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> enumToStringMap<span class="token punctuation">;</span>   <span class="token comment">// Enum (i.e. Enum.A | Enum.B | Enum.C)</span>
<span class="token keyword">type</span> <span class="token constant">KS</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> symbolToNumberMap<span class="token punctuation">;</span> <span class="token comment">// typeof sym1 | typeof sym2 | typeof sym3</span>

<span class="token keyword">function</span> getValue<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x1 <span class="token operator">=</span> <span class="token function">getValue</span><span class="token punctuation">(</span>enumToStringMap<span class="token punctuation">,</span> Enum<span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Returns "Name C"</span>
<span class="token keyword">let</span> x2 <span class="token operator">=</span> <span class="token function">getValue</span><span class="token punctuation">(</span>symbolToNumberMap<span class="token punctuation">,</span> sym3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Returns 3</span></code></pre></div>
<p>This is a breaking change; previously, the <code class="language-text">keyof</code> operator and mapped types only supported <code class="language-text">string</code> named properties.
Code that assumed values typed with <code class="language-text">keyof T</code> were always <code class="language-text">string</code>s, will now be flagged as error.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> useKey<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>o<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>  <span class="token comment">// Error: keyof T is not assignable to string</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>Recommendations</h4>
<ul>
<li>
<p>If your functions are only able to handle string named property keys, use <code class="language-text">Extract&lt;keyof T, string&gt;</code> in the declaration:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> useKey<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">Extract</span><span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">>></span><span class="token punctuation">(</span>o<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>  <span class="token comment">// OK</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
<li>
<p>If your functions are open to handling all property keys, then the changes should be done down-stream:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> useKey<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>o<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
</li>
<li>Otherwise use <code class="language-text">--keyofStringsOnly</code> compiler option to disable the new behavior.</li>
</ul>
<h2>Generic type arguments in JSX elements</h2>
<p>JSX elements now allow passing type arguments to generic components.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">GenericComponent</span><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">></span> <span class="token punctuation">{</span>
    internalProp<span class="token punctuation">:</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Props <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token operator">&lt;</span>GenericComponent<span class="token operator">&lt;</span>Props<span class="token operator">></span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span> b<span class="token operator">=</span><span class="token string">"hi"</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// OK</span>

<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token operator">&lt;</span>GenericComponent<span class="token operator">&lt;</span>Props<span class="token operator">></span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span> b<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// Error</span></code></pre></div>
<h2>Generic type arguments in generic tagged templates</h2>
<p>Tagged templates are a form of invocation introduced in ECMAScript 2015.
Like call expressions, generic functions may be used in a tagged template and TypeScript will infer the type arguments utilized.</p>
<p>TypeScript 2.9  allows passing generic type arguments to tagged template strings.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> styledComponent<span class="token operator">&lt;</span>Props<span class="token operator">></span><span class="token punctuation">(</span>strs<span class="token punctuation">:</span> TemplateStringsArray<span class="token punctuation">)</span><span class="token punctuation">:</span> Component<span class="token operator">&lt;</span>Props<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">MyProps</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

styledComponent<span class="token operator">&lt;</span>MyProps<span class="token operator">></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  font-size: 1.5em;
  text-align: center;
  color: palevioletred;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> tag<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>strs<span class="token punctuation">:</span> TemplateStringsArray<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token comment">// inference fails because 'number' and 'string' are both candidates that conflict</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> tag<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">100</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">"hello"</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre></div>
<h2><code class="language-text">import</code> types</h2>
<p>Modules can import types declared in other modules. But non-module global scripts cannot access types declared in modules. Enter <code class="language-text">import</code> types.</p>
<p>Using <code class="language-text">import(&quot;mod&quot;)</code> in a type annotation allows for reaching in a module and accessing its exported declaration without importing it.</p>
<h4>Example</h4>
<p>Given a declaration of a class <code class="language-text">Pet</code> in a module file:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// module.d.ts</span>

<span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
   name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Can be used in a non-module file <code class="language-text">global-script.ts</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// global-script.ts</span>

<span class="token keyword">function</span> <span class="token function">adopt</span><span class="token punctuation">(</span>p<span class="token punctuation">:</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./module"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Pet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Adopting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This also works in JSDoc comments to refer to types from other modules in <code class="language-text">.js</code>:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// a.js</span>

<span class="token comment">/**
 * @param p { import("./module").Pet }
 */</span>
<span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Walking </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Relaxing declaration emit visiblity rules</h2>
<p>With <code class="language-text">import</code> types available, many of the visibility errors reported during declaration file generation can be handled by the compiler without the need to change the input.</p>
<p>For instance:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> createHash <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"crypto"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> hash <span class="token operator">=</span> <span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">"sha256"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//           ^^^^</span>
<span class="token comment">// Exported variable 'hash' has or is using name 'Hash' from external module "crypto" but cannot be named.</span></code></pre></div>
<p>With TypeScript 2.9, no errors are reported, and now the generated file looks like:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">const</span> hash<span class="token punctuation">:</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"crypto"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Hash<span class="token punctuation">;</span></code></pre></div>
<h2>Support for <code class="language-text">import.meta</code></h2>
<p>TypeScript 2.9 introduces support for <code class="language-text">import.meta</code>, a new meta-property as described by the current <a href="https://github.com/tc39/proposal-import-meta">TC39 proposal</a>.</p>
<p>The type of <code class="language-text">import.meta</code> is the global <code class="language-text">ImportMeta</code> type which is defined in <code class="language-text">lib.es5.d.ts</code>.
This interface is extremely limited.
Adding well-known properties for Node or browsers requires interface merging and possibly a global augmentation depending on the context.</p>
<h4>Example</h4>
<p>Assuming that <code class="language-text">__dirname</code> is always available on <code class="language-text">import.meta</code>, the declaration would be done through reopening <code class="language-text">ImportMeta</code> interface:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// node.d.ts</span>
<span class="token keyword">interface</span> <span class="token class-name">ImportMeta</span> <span class="token punctuation">{</span>
    __dirname<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>And usage would be:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>__dirname <span class="token comment">// Has type 'string'</span></code></pre></div>
<p><code class="language-text">import.meta</code> is only allowed when targeting <code class="language-text">ESNext</code> modules and ECMAScript targets.</p>
<h2>New <code class="language-text">--resolveJsonModule</code></h2>
<p>Often in Node.js applications a <code class="language-text">.json</code> is needed. With TypeScript 2.9, <code class="language-text">--resolveJsonModule</code> allows for importing, extracting types from and generating <code class="language-text">.json</code> files.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// settings.json</span>

<span class="token punctuation">{</span>
    <span class="token string">"repo"</span><span class="token punctuation">:</span> <span class="token string">"TypeScript"</span><span class="token punctuation">,</span>
    <span class="token string">"dry"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">"debug"</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// a.ts</span>

<span class="token keyword">import</span> settings <span class="token keyword">from</span> <span class="token string">"./settings.json"</span><span class="token punctuation">;</span>

settings<span class="token punctuation">.</span>debug <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// OK</span>
settings<span class="token punctuation">.</span>dry <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// Error: Operator '===' cannot be applied boolean and number</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// tsconfig.json</span>

<span class="token punctuation">{</span>
    <span class="token string">"compilerOptions"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
        <span class="token string">"resolveJsonModule"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">"esModuleInterop"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">--pretty</code> output by default</h2>
<p>Starting TypeScript 2.9 errors are displayed under <code class="language-text">--pretty</code> by default if the output device is applicable for colorful text.
TypeScript will check if the output steam has <a href="https://nodejs.org/api/tty.html"><code class="language-text">isTty</code></a> property set.</p>
<p>Use <code class="language-text">--pretty false</code> on the command line or set <code class="language-text">&quot;pretty&quot;: false</code> in your <code class="language-text">tsconfig.json</code> to disable <code class="language-text">--pretty</code> output.</p>
<h2>New <code class="language-text">--declarationMap</code></h2>
<p>Enabling <code class="language-text">--declarationMap</code> alongside <code class="language-text">--declaration</code> causes the compiler to emit <code class="language-text">.d.ts.map</code> files alongside the output <code class="language-text">.d.ts</code> files.
Language Services can also now understand these map files, and uses them to map declaration-file based definition locations to their original source, when available.</p>
<p>In other words, hitting go-to-definition on a declaration from a <code class="language-text">.d.ts</code> file generated with <code class="language-text">--declarationMap</code> will take you to the source file (<code class="language-text">.ts</code>) location where that declaration was defined, and not to the <code class="language-text">.d.ts</code>.</p>
<h2>TypeScript 2.8</h2>
<h2>Conditional Types</h2>
<p>TypeScript 2.8 introduces <em>conditional types</em> which add the ability to express non-uniform type mappings.
A conditional type selects one of two possible types based on a condition expressed as a type relationship test:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token constant">X</span> <span class="token punctuation">:</span> <span class="token constant">Y</span></code></pre></div>
<p>The type above means when <code class="language-text">T</code> is assignable to <code class="language-text">U</code> the type is <code class="language-text">X</code>, otherwise the type is <code class="language-text">Y</code>.</p>
<p>A conditional type <code class="language-text">T extends U ? X : Y</code> is either <em>resolved</em> to <code class="language-text">X</code> or <code class="language-text">Y</code>, or <em>deferred</em> because the condition depends on one or more type variables.
Whether to resolve or defer is determined as follows:</p>
<ul>
<li>First, given types <code class="language-text">T&#39;</code> and <code class="language-text">U&#39;</code> that are instantiations of <code class="language-text">T</code> and <code class="language-text">U</code> where all occurrences of type parameters are replaced with <code class="language-text">any</code>, if <code class="language-text">T&#39;</code> is not assignable to <code class="language-text">U&#39;</code>, the conditional type is resolved to <code class="language-text">Y</code>. Intuitively, if the most permissive instantiation of <code class="language-text">T</code> is not assignable to the most permissive instantiation of <code class="language-text">U</code>, we know that no instantiation will be and we can just resolve to <code class="language-text">Y</code>.</li>
<li>Next, for each type variable introduced by an <code class="language-text">infer</code> (more later) declaration within <code class="language-text">U</code> collect a set of candidate types by inferring from <code class="language-text">T</code> to <code class="language-text">U</code> (using the same inference algorithm as type inference for generic functions). For a given <code class="language-text">infer</code> type variable <code class="language-text">V</code>, if any candidates were inferred from co-variant positions, the type inferred for <code class="language-text">V</code> is a union of those candidates. Otherwise, if any candidates were inferred from contra-variant positions, the type inferred for <code class="language-text">V</code> is an intersection of those candidates. Otherwise, the type inferred for <code class="language-text">V</code> is <code class="language-text">never</code>.</li>
<li>Then, given a type <code class="language-text">T&#39;&#39;</code> that is an instantiation of <code class="language-text">T</code> where all <code class="language-text">infer</code> type variables are replaced with the types inferred in the previous step, if <code class="language-text">T&#39;&#39;</code> is <em>definitely assignable</em> to <code class="language-text">U</code>, the conditional type is resolved to <code class="language-text">X</code>. The definitely assignable relation is the same as the regular assignable relation, except that type variable constraints are not considered. Intuitively, when a type is definitely assignable to another type, we know that it will be assignable for <em>all instantiations</em> of those types.</li>
<li>Otherwise, the condition depends on one or more type variables and the conditional type is deferred.</li>
</ul>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> TypeName<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">?</span> <span class="token string">"string"</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">number</span> <span class="token operator">?</span> <span class="token string">"number"</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">boolean</span> <span class="token operator">?</span> <span class="token string">"boolean"</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">undefined</span> <span class="token operator">?</span> <span class="token string">"undefined"</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token string">"function"</span> <span class="token punctuation">:</span>
    <span class="token string">"object"</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token constant">T0</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "string"</span>
<span class="token keyword">type</span> <span class="token constant">T1</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token string">"a"</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "string"</span>
<span class="token keyword">type</span> <span class="token constant">T2</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token boolean">true</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "boolean"</span>
<span class="token keyword">type</span> <span class="token constant">T3</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "function"</span>
<span class="token keyword">type</span> <span class="token constant">T4</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "object"</span></code></pre></div>
<h3>Distributive conditional types</h3>
<p>Conditional types in which the checked type is a naked type parameter are called <em>distributive conditional types</em>.
Distributive conditional types are automatically distributed over union types during instantiation.
For example, an instantiation of <code class="language-text">T extends U ? X : Y</code> with the type argument <code class="language-text">A | B | C</code> for <code class="language-text">T</code> is resolved as <code class="language-text">(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">T10</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "string" | "function"</span>
<span class="token keyword">type</span> <span class="token constant">T12</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "string" | "object" | "undefined"</span>
<span class="token keyword">type</span> <span class="token constant">T11</span> <span class="token operator">=</span> TypeName<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "object"</span></code></pre></div>
<p>In instantiations of a distributive conditional type <code class="language-text">T extends U ? X : Y</code>, references to <code class="language-text">T</code> within the conditional type are resolved to individual constituents of the union type (i.e. <code class="language-text">T</code> refers to the individual constituents <em>after</em> the conditional type is distributed over the union type).
Furthermore, references to <code class="language-text">T</code> within <code class="language-text">X</code> have an additional type parameter constraint <code class="language-text">U</code> (i.e. <code class="language-text">T</code> is considered assignable to <code class="language-text">U</code> within <code class="language-text">X</code>).</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> BoxedValue<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> BoxedArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> array<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> Boxed<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> BoxedArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">:</span> BoxedValue<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token constant">T20</span> <span class="token operator">=</span> Boxed<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// BoxedValue&lt;string>;</span>
<span class="token keyword">type</span> <span class="token constant">T21</span> <span class="token operator">=</span> Boxed<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// BoxedArray&lt;number>;</span>
<span class="token keyword">type</span> <span class="token constant">T22</span> <span class="token operator">=</span> Boxed<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// BoxedValue&lt;string> | BoxedArray&lt;number>;</span></code></pre></div>
<p>Notice that <code class="language-text">T</code> has the additional constraint <code class="language-text">any[]</code> within the true branch of <code class="language-text">Boxed&lt;T&gt;</code> and it is therefore possible to refer to the element type of the array as <code class="language-text">T[number]</code>. Also, notice how the conditional type is distributed over the union type in the last example.</p>
<p>The distributive property of conditional types can conveniently be used to <em>filter</em> union types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Diff<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>  <span class="token comment">// Remove types from T that are assignable to U</span>
<span class="token keyword">type</span> Filter<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token punctuation">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>  <span class="token comment">// Remove types from T that are not assignable to U</span>

<span class="token keyword">type</span> <span class="token constant">T30</span> <span class="token operator">=</span> Diff<span class="token operator">&lt;</span><span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"f"</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "b" | "d"</span>
<span class="token keyword">type</span> <span class="token constant">T31</span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"f"</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "c"</span>
<span class="token keyword">type</span> <span class="token constant">T32</span> <span class="token operator">=</span> Diff<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
<span class="token keyword">type</span> <span class="token constant">T33</span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// () => void</span>

<span class="token keyword">type</span> NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> Diff<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Remove null and undefined from T</span>

<span class="token keyword">type</span> <span class="token constant">T34</span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
<span class="token keyword">type</span> <span class="token constant">T35</span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | string[]</span>

<span class="token keyword">function</span> f1<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
    y <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> f2<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
    y <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> s1<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> s2<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Conditional types are particularly useful when combined with mapped types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> FunctionPropertyNames<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token punctuation">:</span> <span class="token builtin">never</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> FunctionProperties<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> FunctionPropertyNames<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>

<span class="token keyword">type</span> NonFunctionPropertyNames<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token punctuation">:</span> <span class="token constant">K</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> NonFunctionProperties<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> NonFunctionPropertyNames<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Part</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    subparts<span class="token punctuation">:</span> Part<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">updatePart</span><span class="token punctuation">(</span>newName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token constant">T40</span> <span class="token operator">=</span> FunctionPropertyNames<span class="token operator">&lt;</span>Part<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "updatePart"</span>
<span class="token keyword">type</span> <span class="token constant">T41</span> <span class="token operator">=</span> NonFunctionPropertyNames<span class="token operator">&lt;</span>Part<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "id" | "name" | "subparts"</span>
<span class="token keyword">type</span> <span class="token constant">T42</span> <span class="token operator">=</span> FunctionProperties<span class="token operator">&lt;</span>Part<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// { updatePart(newName: string): void }</span>
<span class="token keyword">type</span> <span class="token constant">T43</span> <span class="token operator">=</span> NonFunctionProperties<span class="token operator">&lt;</span>Part<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// { id: number, name: string, subparts: Part[] }</span></code></pre></div>
<p>Similar to union and intersection types, conditional types are not permitted to reference themselves recursively. For example the following is an error.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> ElementType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> ElementType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span></code></pre></div>
<h3>Type inference in conditional types</h3>
<p>Within the <code class="language-text">extends</code> clause of a conditional type, it is now possible to have <code class="language-text">infer</code> declarations that introduce a type variable to be inferred.
Such inferred type variables may be referenced in the true branch of the conditional type.
It is possible to have multiple <code class="language-text">infer</code> locations for the same type variable.</p>
<p>For example, the following extracts the return type of a function type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> infer <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></code></pre></div>
<p>Conditional types can be nested to form a sequence of pattern matches that are evaluated in order:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Unpacked<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>infer <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> infer <span class="token constant">U</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span>infer <span class="token constant">U</span><span class="token operator">></span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token punctuation">:</span>
    <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token constant">T0</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T1</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T2</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T3</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">>></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T4</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Promise&lt;string></span>
<span class="token keyword">type</span> <span class="token constant">T5</span> <span class="token operator">=</span> Unpacked<span class="token operator">&lt;</span>Unpacked<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token punctuation">;</span>  <span class="token comment">// string</span></code></pre></div>
<p>The following example demonstrates how multiple candidates for the same type variable in co-variant positions causes a union type to be inferred:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Foo<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> infer <span class="token constant">U</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> infer <span class="token constant">U</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token punctuation">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">T10</span> <span class="token operator">=</span> Foo<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T11</span> <span class="token operator">=</span> Foo<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span></code></pre></div>
<p>Likewise, multiple candidates for the same type variable in contra-variant positions causes an intersection type to be inferred:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Bar<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> <span class="token function-variable function">a</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> infer <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token function-variable function">b</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> infer <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">U</span> <span class="token punctuation">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">T20</span> <span class="token operator">=</span> Bar<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token function-variable function">a</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token function-variable function">b</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T21</span> <span class="token operator">=</span> Bar<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token function-variable function">a</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token function-variable function">b</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string &amp; number</span></code></pre></div>
<p>When inferring from a type with multiple call signatures (such as the type of an overloaded function), inferences are made from the <em>last</em> signature (which, presumably, is the most permissive catch-all case).
It is not possible to perform overload resolution based on a list of argument types.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">T30</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> foo<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span></code></pre></div>
<p>It is not possible to use <code class="language-text">infer</code> declarations in constraint clauses for regular type parameters:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> infer <span class="token constant">R</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">;</span>  <span class="token comment">// Error, not supported</span></code></pre></div>
<p>However, much the same effect can be obtained by erasing the type variables in the constraint and instead specifying a conditional type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token function-variable function">AnyFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">AnyFunction</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> infer <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></code></pre></div>
<h3>Predefined conditional types</h3>
<p>TypeScript 2.8 adds several predefined conditional types to <code class="language-text">lib.d.ts</code>:</p>
<ul>
<li><code class="language-text">Exclude&lt;T, U&gt;</code> — Exclude from <code class="language-text">T</code> those types that are assignable to <code class="language-text">U</code>.</li>
<li><code class="language-text">Extract&lt;T, U&gt;</code> — Extract from <code class="language-text">T</code> those types that are assignable to <code class="language-text">U</code>.</li>
<li><code class="language-text">NonNullable&lt;T&gt;</code> — Exclude <code class="language-text">null</code> and <code class="language-text">undefined</code> from <code class="language-text">T</code>.</li>
<li><code class="language-text">ReturnType&lt;T&gt;</code> — Obtain the return type of a function type.</li>
<li><code class="language-text">InstanceType&lt;T&gt;</code> — Obtain the instance type of a constructor function type.</li>
</ul>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">T00</span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"f"</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "b" | "d"</span>
<span class="token keyword">type</span> <span class="token constant">T01</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"b"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"a"</span> <span class="token operator">|</span> <span class="token string">"c"</span> <span class="token operator">|</span> <span class="token string">"f"</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "c"</span>

<span class="token keyword">type</span> <span class="token constant">T02</span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
<span class="token keyword">type</span> <span class="token constant">T03</span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// () => void</span>

<span class="token keyword">type</span> <span class="token constant">T04</span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
<span class="token keyword">type</span> <span class="token constant">T05</span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// (() => string) | string[]</span>

<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> s <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token constant">T10</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">T11</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// void</span>
<span class="token keyword">type</span> <span class="token constant">T12</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// {}</span>
<span class="token keyword">type</span> <span class="token constant">T13</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// number[]</span>
<span class="token keyword">type</span> <span class="token constant">T14</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> f1<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// { a: number, b: string }</span>
<span class="token keyword">type</span> <span class="token constant">T15</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token keyword">type</span> <span class="token constant">T16</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token keyword">type</span> <span class="token constant">T17</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token keyword">type</span> <span class="token constant">T18</span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>

<span class="token keyword">type</span> <span class="token constant">T20</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> <span class="token constant">C</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// C</span>
<span class="token keyword">type</span> <span class="token constant">T21</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token keyword">type</span> <span class="token constant">T22</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token keyword">type</span> <span class="token constant">T23</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token keyword">type</span> <span class="token constant">T24</span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Error</span></code></pre></div>
<blockquote>
<p>Note: The <code class="language-text">Exclude</code> type is a proper implementation of the <code class="language-text">Diff</code> type suggested <a href="https://github.com/Microsoft/TypeScript/issues/12215#issuecomment-307871458">here</a>. We’ve used the name <code class="language-text">Exclude</code> to avoid breaking existing code that defines a <code class="language-text">Diff</code>, plus we feel that name better conveys the semantics of the type. We did not include the <code class="language-text">Omit&lt;T, K&gt;</code> type because it is trivially written as <code class="language-text">Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;</code>.</p>
</blockquote>
<h2>Improved control over mapped type modifiers</h2>
<p>Mapped types support adding a <code class="language-text">readonly</code> or <code class="language-text">?</code> modifier to a mapped property, but they did not provide support the ability to <em>remove</em> modifiers.
This matters in <a href="https://github.com/Microsoft/TypeScript/pull/12563"><em>homomorphic mapped types</em></a> which by default preserve the modifiers of the underlying type.</p>
<p>TypeScript 2.8 adds the ability for a mapped type to either add or remove a particular modifier.
Specifically, a <code class="language-text">readonly</code> or <code class="language-text">?</code> property modifier in a mapped type can now be prefixed with either <code class="language-text">+</code> or <code class="language-text">-</code> to indicate that the modifier should be added or removed.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> MutableRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Remove readonly and ?</span>
<span class="token keyword">type</span> ReadonlyPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">+</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Add readonly and ?</span></code></pre></div>
<p>A modifier with no <code class="language-text">+</code> or <code class="language-text">-</code> prefix is the same as a modifier with a <code class="language-text">+</code> prefix. So, the <code class="language-text">ReadonlyPartial&lt;T&gt;</code> type above corresponds to</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> ReadonlyPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Add readonly and ?</span></code></pre></div>
<p>Using this ability, <code class="language-text">lib.d.ts</code> now has a new  <code class="language-text">Required&lt;T&gt;</code> type.
This type strips <code class="language-text">?</code> modifiers from all properties of <code class="language-text">T</code>, thus making all properties required.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Note that in <code class="language-text">--strictNullChecks</code> mode, when a homomorphic mapped type removes a <code class="language-text">?</code> modifier from a property in the underlying type it also removes <code class="language-text">undefined</code> from the type of that property:</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Same as { a?: string | undefined }</span>
<span class="token keyword">type</span> Bar <span class="token operator">=</span> Required<span class="token operator">&lt;</span>Foo<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// Same as { a: string }</span></code></pre></div>
<h2>Improved <code class="language-text">keyof</code> with intersection types</h2>
<p>With TypeScript 2.8 <code class="language-text">keyof</code> applied to an intersection type is transformed to a union of <code class="language-text">keyof</code> applied to each intersection constituent.
In other words, types of the form <code class="language-text">keyof (A &amp; B)</code> are transformed to be <code class="language-text">keyof A | keyof B</code>.
This change should address inconsistencies with inference from <code class="language-text">keyof</code> expressions.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token constant">T1</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">(</span><span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "b"</span>
<span class="token keyword">type</span> <span class="token constant">T2</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// keyof T | "b"</span>
<span class="token keyword">type</span> <span class="token constant">T3</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">(</span><span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// "a" | keyof U</span>
<span class="token keyword">type</span> <span class="token constant">T4</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// keyof T | keyof U</span>
<span class="token keyword">type</span> <span class="token constant">T5</span> <span class="token operator">=</span> <span class="token constant">T2</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "b"</span>
<span class="token keyword">type</span> <span class="token constant">T6</span> <span class="token operator">=</span> <span class="token constant">T3</span><span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "b"</span>
<span class="token keyword">type</span> <span class="token constant">T7</span> <span class="token operator">=</span> <span class="token constant">T4</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token comment">// "a" | "b"</span></code></pre></div>
<h2>Better handling for namespace patterns in <code class="language-text">.js</code> files</h2>
<p>TypeScript 2.8 adds support for understanding more namespace patterns in <code class="language-text">.js</code> files.
Empty object literals declarations on top level, just like functions and classes, are now recognized as as namespace declarations in JavaScript.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> ns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>     <span class="token comment">// recognized as a declaration for a namespace `ns`</span>
ns<span class="token punctuation">.</span>constant <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// recognized as a declaration for var `constant`</span></code></pre></div>
<p>Assignments at the top-level should behave the same way; in other words, a <code class="language-text">var</code> or <code class="language-text">const</code> declaration is not required.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">app <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// does NOT need to be `var app = {}`</span>
app<span class="token punctuation">.</span><span class="token constant">C</span> <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre></div>
<h3>IIFEs as namespace declarations</h3>
<p>An IIFE returning a function, class or empty object literal, is also recognized as a namespace:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">C</span><span class="token punctuation">.</span>staticProperty <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre></div>
<h3>Defaulted declarations</h3>
<p>“Defaulted declarations” allow initializers that reference the declared name in the left side of a logical or:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">my <span class="token operator">=</span> window<span class="token punctuation">.</span>my <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
my<span class="token punctuation">.</span>app <span class="token operator">=</span> my<span class="token punctuation">.</span>app <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>Prototype assignment</h3>
<p>You can assign an object literal directly to the prototype property. Individual prototype assignments still work too:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">=</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">q</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>p <span class="token operator">===</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>Nested and merged declarations</h3>
<p>Nesting works to any level now, and merges correctly across files. Previously neither was the case.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> app <span class="token operator">=</span> window<span class="token punctuation">.</span>app <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token constant">C</span> <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2>Per-file JSX factories</h2>
<p>TypeScript 2.8 adds support for a per-file configurable JSX factory name using <code class="language-text">@jsx dom</code> paragma.
JSX factory can be configured for a compilation using <code class="language-text">--jsxFactory</code> (default is <code class="language-text">React.createElement</code>). With TypeScript 2.8 you can override this on a per-file-basis by adding a comment to the beginning of the file.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">/** @jsx dom */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> dom <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./renderer"</span>
<span class="token operator">&lt;</span>h<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h<span class="token operator">></span></code></pre></div>
<p>Generates:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> renderer_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./renderer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer_1<span class="token punctuation">.</span><span class="token function">dom</span><span class="token punctuation">(</span><span class="token string">"h"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Locally scoped JSX namespaces</h2>
<p>JSX type checking is driven by definitions in a JSX namespace, for instance <code class="language-text">JSX.Element</code> for the type of a JSX element, and <code class="language-text">JSX.IntrinsicElements</code> for built-in elements.
Before TypeScript 2.8 the <code class="language-text">JSX</code> namespace was expected to be in the global namespace, and thus only allowing one to be defined in a project.
Starting with TypeScript 2.8 the <code class="language-text">JSX</code> namespace will be looked under the <code class="language-text">jsxNamespace</code> (e.g. <code class="language-text">React</code>) allowing for multiple jsx factories in one compilation.
For backward compatibility the global <code class="language-text">JSX</code> namespace is used as a fallback if none was defined on the factory function.
Combined with the per-file <code class="language-text">@jsx</code> pragma, each file can have a different JSX factory.</p>
<h2>New <code class="language-text">--emitDeclarationsOnly</code></h2>
<p><code class="language-text">--emitDeclarationsOnly</code> allows for <em>only</em> generating declaration files; <code class="language-text">.js</code>/<code class="language-text">.jsx</code> output generation will be skipped with this flag. The flag is useful when the <code class="language-text">.js</code> output generation is handled by a different transpiler like Babel.</p>
<h2>TypeScript 2.7</h2>
<h2>Constant-named properties</h2>
<p>TypeScript 2.7 adds support for declaring const-named properties on types including ECMAScript symbols.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Lib</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SERIALIZE</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"serialize-method-key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">SERIALIZE</span><span class="token punctuation">]</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// consumer</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SERIALIZE</span><span class="token punctuation">,</span> Serializable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lib"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">JSONSerializableItem</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">SERIALIZE</span><span class="token punctuation">]</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This also applies to numeric and string literals.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token string">"Foo"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token string">"Bar"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Foo<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Bar<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> x<span class="token punctuation">[</span>Foo<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// has type 'number'</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> x<span class="token punctuation">[</span>Bar<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// has type 'string'</span></code></pre></div>
<h3><code class="language-text">unique symbol</code></h3>
<p>To enable treating symbols as unique literals  a new type <code class="language-text">unique symbol</code> is available.
<code class="language-text">unique symbol</code> is are subtype of <code class="language-text">symbol</code>, and are produced only from calling <code class="language-text">Symbol()</code> or <code class="language-text">Symbol.for()</code>, or from explicit type annotations.
The new type is only allowed on <code class="language-text">const</code> declarations and <code class="language-text">readonly static</code> properties, and in order to reference a specific unique symbol, you’ll have to use the <code class="language-text">typeof</code> operator.
Each reference to a <code class="language-text">unique symbol</code> implies a completely unique identity that’s tied to a given declaration.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Works</span>
<span class="token keyword">declare</span> <span class="token keyword">const</span> Foo<span class="token punctuation">:</span> unique <span class="token builtin">symbol</span><span class="token punctuation">;</span>

<span class="token comment">// Error! 'Bar' isn't a constant.</span>
<span class="token keyword">let</span> Bar<span class="token punctuation">:</span> unique <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Works - refers to a unique symbol, but its identity is tied to 'Foo'.</span>
<span class="token keyword">let</span> Baz<span class="token punctuation">:</span> <span class="token keyword">typeof</span> Foo <span class="token operator">=</span> Foo<span class="token punctuation">;</span>

<span class="token comment">// Also works.</span>
<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">readonly</span> StaticSymbol<span class="token punctuation">:</span> unique <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Because each <code class="language-text">unique symbol</code> has a completely separate identity, no two <code class="language-text">unique symbol</code> types are assignable or comparable to each other.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Error: can't compare two unique symbols.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Foo <span class="token operator">===</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Strict Class Initialization</h2>
<p>TypeScript 2.7 introduces a new flag called <code class="language-text">--strictPropertyInitialization</code>.
This flag performs checks to ensure that each instance property of a class gets initialized in the constructor body, or by a property initializer.
For example</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    bar <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    baz<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token comment">//  ~~~</span>
<span class="token comment">//  Error! Property 'baz' has no initializer and is not definitely assigned in the</span>
<span class="token comment">//         constructor.</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the above, if we truly meant for <code class="language-text">baz</code> to potentially be <code class="language-text">undefined</code>, we should have declared it with the type <code class="language-text">boolean | undefined</code>.</p>
<p>There are certain scenarios where properties can be initialized indirectly (perhaps by a helper method or dependency injection library), in which case you can use the new <em>definite assignment assertion modifiers</em> for your properties (discussed below).</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    foo<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// ^</span>
    <span class="token comment">// Notice this '!' modifier.</span>
    <span class="token comment">// This is the "definite assignment assertion"</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Keep in mind that <code class="language-text">--strictPropertyInitialization</code> will be turned on along with other <code class="language-text">--strict</code> mode flags, which can impact your project.
You can set the <code class="language-text">strictPropertyInitialization</code> setting to <code class="language-text">false</code> in your <code class="language-text">tsconfig.json</code>’s <code class="language-text">compilerOptions</code>, or <code class="language-text">--strictPropertyInitialization false</code> on the command line to turn off this checking.</p>
<h2>Definite Assignment Assertions</h2>
<p>The definite assignment assertion is a feature that allows a <code class="language-text">!</code> to be placed after instance property and variable declarations to relay to TypeScript that a variable is indeed assigned for all intents and purposes, even if TypeScript’s analyses cannot detect so.</p>
<p>For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//          ~   ~</span>
<span class="token comment">// Error! Variable 'x' is used before being assigned.</span>

<span class="token keyword">function</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With definite assignment assertions, we can assert that <code class="language-text">x</code> is really assigned by appending an <code class="language-text">!</code> to its declaration:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Notice the '!'</span>
<span class="token keyword">let</span> x<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// No error!</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In a sense, the definite assignment assertion operator is the dual of the non-null assertion operator (in which <em>expressions</em> are post-fixed with a <code class="language-text">!</code>), which we could also have used in the example.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// No error!</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token operator">!</span> <span class="token operator">+</span> x<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></code></pre></div>
<p>In our example, we knew that all uses of <code class="language-text">x</code> would be initialized so it makes more sense to use definite assignment assertions than non-null assertions.</p>
<h2>Fixed Length Tuples</h2>
<p>In TypeScript 2.6 and earlier, <code class="language-text">[number, string, string]</code> was considered a subtype of <code class="language-text">[number, string]</code>.
This was motivated by TypeScript’s structural nature; the first and second elements of a <code class="language-text">[number, string, string]</code> are respectively subtypes of the first and second elements of <code class="language-text">[number, string]</code>.
However, after examining real world usage of tuples, we noticed that most situations in which this was permitted was typically undesirable.</p>
<p>In TypeScript 2.7, tuples of different arities are no longer assignable to each other.
Thanks to a pull request from <a href="https://github.com/tycho01">Tycho Grouwstra</a>, tuple types now encode their arity into the type of their respective <code class="language-text">length</code> property.
This is accomplished by leveraging numeric literal types, which now allow tuples to be distinct from tuples of different arities.</p>
<p>Conceptually, you might consider the type <code class="language-text">[number, string]</code> to be equivalent to the following declaration of <code class="language-text">NumStrTuple</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">NumStrTuple</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    length<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// using the numeric literal type '2'</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that this is a breaking change for some code.
If you need to resort to the original behavior in which tuples only enforce a minimum length, you can use a similar declaration that does not explicitly define a <code class="language-text">length</code> property, falling back to <code class="language-text">number</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">MinimumNumStrTuple</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that this does not imply tuples represent immutable arrays, but it is an implied convention.</p>
<h2>Improved type inference for object literals</h2>
<p>TypeScript 2.7 improves type inference for multiple object literals occurring in the same context.
When multiple object literal types contribute to a union type, we now <em>normalize</em> the object literal types such that all properties are present in each constituent of the union type.</p>
<p>Consider:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> obj <span class="token operator">=</span> test <span class="token operator">?</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"hello"</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { text: string } | { text?: undefined }</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> obj<span class="token punctuation">.</span>text<span class="token punctuation">;</span>  <span class="token comment">// string | undefined</span></code></pre></div>
<p>Previously type <code class="language-text">{}</code> was inferred for <code class="language-text">obj</code> and the second line subsequently caused an error because <code class="language-text">obj</code> would appear to have no properties.
That obviously wasn’t ideal.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// let obj: { a: number, b: number } |</span>
<span class="token comment">//     { a: string, b?: undefined } |</span>
<span class="token comment">//     { a?: undefined, b?: undefined }</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token string">"abc"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>a<span class="token punctuation">;</span>  <span class="token comment">// string | number | undefined</span>
obj<span class="token punctuation">.</span>b<span class="token punctuation">;</span>  <span class="token comment">// number | undefined</span></code></pre></div>
<p>Multiple object literal type inferences for the same type parameter are similarly collapsed into a single normalized union type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> f<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">...</span>items<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token comment">// let obj: { a: number, b: number } |</span>
<span class="token comment">//     { a: string, b?: undefined } |</span>
<span class="token comment">//     { a?: undefined, b?: undefined }</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token string">"abc"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>a<span class="token punctuation">;</span>  <span class="token comment">// string | number | undefined</span>
obj<span class="token punctuation">.</span>b<span class="token punctuation">;</span>  <span class="token comment">// number | undefined</span></code></pre></div>
<h2>Improved handling of structurally identical classes and <code class="language-text">instanceof</code> expressions</h2>
<p>TypeScript 2.7 improves the handling of structurally identical classes in union types and <code class="language-text">instanceof</code> expressions:</p>
<ul>
<li>Structurally identical, but distinct, class types are now preserved in union types (instead of eliminating all but one).</li>
<li>Union type subtype reduction only removes a class type if it is a subclass of <em>and</em> derives from another class type in the union.</li>
<li>Type checking of the <code class="language-text">instanceof</code> operator is now based on whether the type of the left operand <em>derives from</em> the type indicated by the right operand (as opposed to a structural subtype check).</li>
</ul>
<p>This means that union types and <code class="language-text">instanceof</code> properly distinguish between structurally identical classes.</p>
<h4>Example:</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">E</span> <span class="token keyword">extends</span> <span class="token class-name">D</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> x1 <span class="token operator">=</span> <span class="token operator">!</span><span class="token boolean">true</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// A</span>
<span class="token keyword">let</span> x2 <span class="token operator">=</span> <span class="token operator">!</span><span class="token boolean">true</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// B | C (previously B)</span>
<span class="token keyword">let</span> x3 <span class="token operator">=</span> <span class="token operator">!</span><span class="token boolean">true</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// C | D (previously C)</span>

<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">E</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// A[]</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">E</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// (B | C | D)[] (previously B[])</span>

<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">B</span> <span class="token operator">|</span> <span class="token constant">C</span> <span class="token operator">|</span> <span class="token constant">D</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// B (previously B | D)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">C</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// C</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// D (previously never)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Type guards inferred from  <code class="language-text">in</code> operator</h2>
<p>The <code class="language-text">in</code> operator now acts as a narrowing expression for types.</p>
<p>For a <code class="language-text">n in x</code> expression, where <code class="language-text">n</code> is a string literal or string literal type and <code class="language-text">x</code> is a union type, the “true” branch narrows to types which have an optional or required property <code class="language-text">n</code>, and the “false” branch narrows to types which have an optional or missing property <code class="language-text">n</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">B</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">A</span> <span class="token operator">|</span> <span class="token constant">B</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"a"</span> <span class="token keyword">in</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> x<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Support for <code class="language-text">import d from &quot;cjs&quot;</code> form CommonJS modules with <code class="language-text">--esModuleInterop</code></h2>
<p>TypeScript 2.7 updates CommonJS/AMD/UMD module emit to synthesize namespace records based on the presence of an <code class="language-text">__esModule</code> indicator under <code class="language-text">--esModuleInterop</code>.
The change brings the generated output from TypeScript closer to that generated by Babel.</p>
<p>Previously CommonJS/AMD/UMD modules were treated in the same way as ES6 modules, resulting in a couple of problems. Namely:</p>
<ul>
<li>TypeScript treats a namespace import (i.e. <code class="language-text">import * as foo from &quot;foo&quot;</code>) for a CommonJS/AMD/UMD module as equivalent to <code class="language-text">const foo = require(&quot;foo&quot;)</code>.
Things are simple here, but they don’t work out if the primary object being imported is a primitive or a class or a function.
ECMAScript spec stipulates that a namespace record is a plain object, and that a namespace import (<code class="language-text">foo</code> in the example above) is not callable, though allowed by TypeScript</li>
<li>Similarly a default import (i.e. <code class="language-text">import d from &quot;foo&quot;</code>) for a CommonJS/AMD/UMD module as equivalent to <code class="language-text">const d = require(&quot;foo&quot;).default</code>.
Most of the CommonJS/AMD/UMD modules available today do not have a <code class="language-text">default</code> export, making this import pattern practically unusable to import non-ES modules (i.e. CommonJS/AMD/UMD). For instance <code class="language-text">import fs from &quot;fs&quot;</code> or <code class="language-text">import express from &quot;express&quot;</code> are not allowed.</li>
</ul>
<p>Under the new <code class="language-text">--esModuleInterop</code> these two issues should be addressed:</p>
<ul>
<li>A namespace import (i.e. <code class="language-text">import * as foo from &quot;foo&quot;</code>) is now correctly flagged as uncallabale. Calling it will result in an error.</li>
<li>Default imports to CommonJS/AMD/UMD are now allowed (e.g. <code class="language-text">import fs from &quot;fs&quot;</code>), and should work as expected.</li>
</ul>
<blockquote>
<p>Note: The new behavior is added under a flag to avoid unwarranted breaks to existing code bases. We highly recommend applying it both to new and existing projects.
For existing projects, namespace imports (<code class="language-text">import * as express from &quot;express&quot;; express();</code>) will need to be converted to default imports (<code class="language-text">import express from &quot;express&quot;; express();</code>).</p>
</blockquote>
<h4>Example</h4>
<p>With <code class="language-text">--esModuleInterop</code> two new helpers are generated <code class="language-text">__importStar</code> and <code class="language-text">__importDefault</code> for import <code class="language-text">*</code> and import <code class="language-text">default</code> respectively.
For instance input like:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> foo <span class="token keyword">from</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> b <span class="token keyword">from</span> <span class="token string">"bar"</span><span class="token punctuation">;</span></code></pre></div>
<p>Will generate:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> __importStar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__importStar<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mod <span class="token operator">&amp;&amp;</span> mod<span class="token punctuation">.</span>__esModule<span class="token punctuation">)</span> <span class="token keyword">return</span> mod<span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mod <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> mod<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>mod<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span> result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> mod<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    result<span class="token punctuation">[</span><span class="token string">"default"</span><span class="token punctuation">]</span> <span class="token operator">=</span> mod<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> __importDefault <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__importDefault<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>mod <span class="token operator">&amp;&amp;</span> mod<span class="token punctuation">.</span>__esModule<span class="token punctuation">)</span> <span class="token operator">?</span> mod <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">"default"</span><span class="token punctuation">:</span> mod <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>__esModule <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">__importStar</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bar_1 <span class="token operator">=</span> <span class="token function">__importDefault</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Numeric separators</h2>
<p>TypeScript 2.7 brings support for <a href="https://github.com/tc39/proposal-numeric-separator">ES Numeric Separators</a>.
Numeric literals can now be separated into segments using <code class="language-text">_</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> milion <span class="token operator">=</span> <span class="token number">1_000_000</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> phone <span class="token operator">=</span> <span class="token number">555_734_2231</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token number">0xFF_0C_00_FF</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> word <span class="token operator">=</span> <span class="token number">0b1100_0011_1101_0001</span><span class="token punctuation">;</span></code></pre></div>
<h2>Cleaner output in <code class="language-text">--watch</code> mode</h2>
<p>TypeScript’s <code class="language-text">--watch</code> mode now clears the screen after a re-compilation is requested.</p>
<h2>Prettier <code class="language-text">--pretty</code> output</h2>
<p>TypeScript’s <code class="language-text">--pretty</code> flag can make error messages easier to read and manage.
<code class="language-text">--pretty</code> now uses colors for file names, diagnostic codes, and line numbers.
File names and positions are now also formatted to allow navigation in common terminals (e.g. Visual Studio Code terminal).</p>
<h2>TypeScript 2.6</h2>
<h2>Strict function types</h2>
<p>TypeScript 2.6 introduces a new strict checking flag, <code class="language-text">--strictFunctionTypes</code>.
The <code class="language-text">--strictFunctionTypes</code> switch is part of the <code class="language-text">--strict</code> family of switches, meaning that it defaults to on in <code class="language-text">--strict</code> mode.
You can opt-out by setting <code class="language-text">--strictFunctionTypes false</code> on your command line or in your tsconfig.json.</p>
<p>Under <code class="language-text">--strictFunctionTypes</code> function type parameter positions are checked <em>contravariantly</em> instead of <em>bivariantly</em>.
For some background on what variance means for function types check out <a href="https://www.stephanboyer.com/post/132/what-are-covariance-and-contravariance">What are covariance and contravariance?</a>.</p>
<p>The stricter checking applies to all function types, <em>except</em> those originating in method or constructor declarations.
Methods are excluded specifically to ensure generic classes and interfaces (such as <code class="language-text">Array&lt;T&gt;</code>) continue to mostly relate covariantly.</p>
<p>Consider the following example in which <code class="language-text">Animal</code> is the supertype of <code class="language-text">Dog</code> and <code class="language-text">Cat</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f1</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Animal</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f2</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Dog</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> <span class="token function-variable function">f3</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Cat</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
f1 <span class="token operator">=</span> f2<span class="token punctuation">;</span>  <span class="token comment">// Error with --strictFunctionTypes</span>
f2 <span class="token operator">=</span> f1<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
f2 <span class="token operator">=</span> f3<span class="token punctuation">;</span>  <span class="token comment">// Error</span></code></pre></div>
<p>The first assignment is permitted in default type checking mode, but flagged as an error in strict function types mode.
Intuitively, the default mode permits the assignment because it is <em>possibly</em> sound, whereas strict function types mode makes it an error because it isn’t <em>provably</em> sound.
In either mode the third assignment is an error because it is <em>never</em> sound.</p>
<p>Another way to describe the example is that the type <code class="language-text">(x: T) =&gt; void</code> is <em>bivariant</em> (i.e. covariant <em>or</em> contravariant) for <code class="language-text">T</code> in default type checking mode, but <em>contravariant</em> for <code class="language-text">T</code> in strict function types mode.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Comparer</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function-variable function">compare</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> animalComparer<span class="token punctuation">:</span> Comparer<span class="token operator">&lt;</span>Animal<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> dogComparer<span class="token punctuation">:</span> Comparer<span class="token operator">&lt;</span>Dog<span class="token operator">></span><span class="token punctuation">;</span>

animalComparer <span class="token operator">=</span> dogComparer<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
dogComparer <span class="token operator">=</span> animalComparer<span class="token punctuation">;</span>  <span class="token comment">// Ok</span></code></pre></div>
<p>The first assignment is now an error. Effectively, <code class="language-text">T</code> is contravariant in <code class="language-text">Comparer&lt;T&gt;</code> because it is used only in function type parameter positions.</p>
<p>By the way, note that whereas some languages (e.g. C# and Scala) require variance annotations (<code class="language-text">out</code>/<code class="language-text">in</code> or <code class="language-text">+</code>/<code class="language-text">-</code>), variance emerges naturally from the actual use of a type parameter within a generic type due to TypeScript’s structural type system.</p>
<h4>Note:</h4>
<p>Under <code class="language-text">--strictFunctionTypes</code> the first assignment is still permitted if <code class="language-text">compare</code> was declared as a method.
Effectively, <code class="language-text">T</code> is bivariant in <code class="language-text">Comparer&lt;T&gt;</code> because it is used only in method parameter positions.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Comparer</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> animalComparer<span class="token punctuation">:</span> Comparer<span class="token operator">&lt;</span>Animal<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> dogComparer<span class="token punctuation">:</span> Comparer<span class="token operator">&lt;</span>Dog<span class="token operator">></span><span class="token punctuation">;</span>

animalComparer <span class="token operator">=</span> dogComparer<span class="token punctuation">;</span>  <span class="token comment">// Ok because of bivariance</span>
dogComparer <span class="token operator">=</span> animalComparer<span class="token punctuation">;</span>  <span class="token comment">// Ok</span></code></pre></div>
<p>TypeScript 2.6 also improves type inference involving contravariant positions:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> combine<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">...</span>funcs<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token parameter">x</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> f <span class="token keyword">of</span> funcs<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">animalFunc</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Animal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">dogFunc</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Dog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> combined <span class="token operator">=</span> <span class="token function">combine</span><span class="token punctuation">(</span>animalFunc<span class="token punctuation">,</span> dogFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (x: Dog) => void</span></code></pre></div>
<p>Above, all inferences for <code class="language-text">T</code> originate in contravariant positions, and we therefore infer the <em>best common subtype</em> for <code class="language-text">T</code>.
This contrasts with inferences from covariant positions, where we infer the <em>best common supertype</em>.</p>
<h2>Support for JSX Fragment Syntax</h2>
<p>TypeScript 2.6.2 adds support for the new <code class="language-text">&lt;&gt;...&lt;/&gt;</code> syntax for fragments in JSX.
It is frequently desirable to return multiple children from a component.
However, this is invalid, so the usual approach has been to wrap the text in an extra element, such as a <code class="language-text">&lt;div&gt;</code> or <code class="language-text">&lt;span&gt;</code> as shown below.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            Some text.
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">A heading</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
            More text.
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>To address this pattern, React introduced the <code class="language-text">React.Fragment</code> component, which provides a dedicated way to wrap such elements without adding an element to the DOM.
Correspondingly, the <code class="language-text">&lt;&gt;...&lt;/&gt;</code> syntax was added to JSX to facilitate this new construct. Therefore, the above scenario becomes:</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            Some text.
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">A heading</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
            More text.
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Under <code class="language-text">--jsx preserve</code>, the new syntax is left untouched for TypeScript emit. Otherwise, for <code class="language-text">--jsx react</code>, <code class="language-text">&lt;&gt;...&lt;/&gt;</code> is compiled to <code class="language-text">React.createElement(React.Fragment, null, ...)</code>, where <code class="language-text">React.createElement</code> respects <code class="language-text">--jsxFactory</code>.
Note that it is an error to use <code class="language-text">&lt;&gt;...&lt;/&gt;</code> when <code class="language-text">--jsx react</code> and <code class="language-text">--jsxFactory</code> are both enabled.</p>
<p>Please refer to <a href="https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html">the React blog</a> for more details on fragments and the new syntax.</p>
<h2>Cache tagged template objects in modules</h2>
<p>TypeScript 2.6 fixes the tagged string template emit to align better with the ECMAScript spec.
As per the <a href="https://tc39.github.io/ecma262/#sec-gettemplateobject">ECMAScript spec</a>, every time a template tag is evaluated, the <em>same</em> template strings object (the same <code class="language-text">TemplateStringsArray</code>) should be passed as the first argument.
Before TypeScript 2.6, the generated output was a completely new template object each time.
Though the string contents are the same, this emit affects libraries that use the identity of the string for cache invalidation purposes, e.g. <a href="https://github.com/PolymerLabs/lit-html/issues/58">lit-html</a>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> TemplateStringsArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> id<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello world</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true in TS 2.6</span></code></pre></div>
<p>Results in the following generated code:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> __makeTemplateObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__makeTemplateObject<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cooked<span class="token punctuation">,</span> raw</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>defineProperty<span class="token punctuation">)</span> <span class="token punctuation">{</span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>cooked<span class="token punctuation">,</span> <span class="token string">"raw"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> raw <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> cooked<span class="token punctuation">.</span>raw <span class="token operator">=</span> raw<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cooked<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> _a<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">id</span><span class="token punctuation">(</span>_a <span class="token operator">||</span> <span class="token punctuation">(</span>_a <span class="token operator">=</span> <span class="token function">__makeTemplateObject</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello world"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"hello world"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">templateObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<blockquote>
<p>Note: This change brings a new emit helper, <code class="language-text">__makeTemplateObject</code>;
if you are using <code class="language-text">--importHelpers</code> with <a href="https://github.com/Microsoft/tslib"><code class="language-text">tslib</code></a>, an updated to version 1.8 or later.</p>
</blockquote>
<h2>Localized diagnostics on the command line</h2>
<p>TypeScript 2.6 npm package ships with localized versions of diagnostic messages for 13 languages.
The localized messages are available when using <code class="language-text">--locale</code> flag on the command line.</p>
<h4>Example</h4>
<p>Error messages in Russian:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">c:\ts&gt;tsc --v
Version 2.6.0-dev.20171003

c:\ts&gt;tsc --locale ru --pretty c:\test\a.ts

../test/a.ts(1,5): error TS2322: Тип &quot;&quot;string&quot;&quot; не может быть назначен для типа &quot;number&quot;.

1 var x: number = &quot;string&quot;;
      ~</code></pre></div>
<p>And help in Japanese:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">PS C:\ts&gt; tsc --v
Version 2.6.0-dev.20171003

PS C:\ts&gt; tsc --locale ja-jp
バージョン 2.6.0-dev.20171003
構文: tsc [オプション] [ファイル ...]

例:  tsc hello.ts
    tsc --outFile file.js file.ts
    tsc @args.txt

オプション:
 -h, --help                                 このメッセージを表示します。
 --all                                      コンパイラ オプションをすべて表示します。
 -v, --version                              コンパイラのバージョンを表示します。
 --init                                     TypeScript プロジェクトを初期化して、tsconfig.json ファイルを作成します。
 -p ファイルまたはディレクトリ, --project ファイルまたはディレクトリ  構成ファイルか、&#39;tsconfig.json&#39; を含むフォルダーにパスが指定されたプロジェクトをコ
ンパイルします。
 --pretty                                   色とコンテキストを使用してエラーとメッセージにスタイルを適用します (試験的)。
 -w, --watch                                入力ファイルを監視します。
 -t バージョン, --target バージョン                   ECMAScript のターゲット バージョンを指定します: &#39;ES3&#39; (既定)、&#39;ES5&#39;、&#39;ES2015&#39;、&#39;ES2016&#39;、&#39;ES2017&#39;、&#39;ES
NEXT&#39;。
 -m 種類, --module 種類                         モジュール コード生成を指定します: &#39;none&#39;、&#39;commonjs&#39;、&#39;amd&#39;、&#39;system&#39;、&#39;umd&#39;、&#39;es2015&#39;、&#39;ESNext&#39;。
 --lib                                      コンパイルに含めるライブラリ ファイルを指定します:
                                              &#39;es5&#39; &#39;es6&#39; &#39;es2015&#39; &#39;es7&#39; &#39;es2016&#39; &#39;es2017&#39; &#39;esnext&#39; &#39;dom&#39; &#39;dom.iterable&#39; &#39;webworker&#39; &#39;scripthost&#39; &#39;es201
5.core&#39; &#39;es2015.collection&#39; &#39;es2015.generator&#39; &#39;es2015.iterable&#39; &#39;es2015.promise&#39; &#39;es2015.proxy&#39; &#39;es2015.reflect&#39; &#39;es2015.symbol&#39; &#39;es2015.symbol.wellkno
wn&#39; &#39;es2016.array.include&#39; &#39;es2017.object&#39; &#39;es2017.sharedmemory&#39; &#39;es2017.string&#39; &#39;es2017.intl&#39; &#39;esnext.asynciterable&#39;
 --allowJs                                  javascript ファイルのコンパイルを許可します。
 --jsx 種類                                   JSX コード生成を指定します: &#39;preserve&#39;、&#39;react-native&#39;、&#39;react&#39;。
 -d, --declaration                          対応する &#39;.d.ts&#39; ファイルを生成します。
 --sourceMap                                対応する &#39;.map&#39; ファイルを生成します。
 --outFile ファイル                             出力を連結して 1 つのファイルを生成します。
 --outDir ディレクトリ                            ディレクトリへ出力構造をリダイレクトします。
 --removeComments                           コメントを出力しないでください。
 --noEmit                                   出力しないでください。
 --strict                                   strict 型チェックのオプションをすべて有効にします。
 --noImplicitAny                            暗黙的な &#39;any&#39; 型を含む式と宣言に関するエラーを発生させます。
 --strictNullChecks                         厳格な null チェックを有効にします。
 --noImplicitThis                           暗黙的な &#39;any&#39; 型を持つ &#39;this&#39; 式でエラーが発生します。
 --alwaysStrict                             厳格モードで解析してソース ファイルごとに &quot;use strict&quot; を生成します。
 --noUnusedLocals                           使用されていないローカルに関するエラーを報告します。
 --noUnusedParameters                       使用されていないパラメーターに関するエラーを報告します。
 --noImplicitReturns                        関数の一部のコード パスが値を返さない場合にエラーを報告します。
 --noFallthroughCasesInSwitch               switch ステートメントに case のフォールスルーがある場合にエラーを報告します。
 --types                                    コンパイルに含む型宣言ファイル。
 @&lt;ファイル&gt;</code></pre></div>
<h2>Suppress errors in .ts files using ’// @ts-ignore’ comments</h2>
<p>TypeScript 2.6 support suppressing errors in .js files using <code class="language-text">// @ts-ignore</code> comments placed above the offending lines.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// @ts-ignore: Unreachable code error</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A <code class="language-text">// @ts-ignore</code> comment suppresses all errors that originate on the following line.
It is recommended practice to have the remainder of the comment following <code class="language-text">@ts-ignore</code> explain which error is being suppressed.</p>
<p>Please note that this comment only suppresses the error reporting, and we recommend you use this comments <em>very sparingly</em>.</p>
<h2>Faster <code class="language-text">tsc --watch</code></h2>
<p>TypeScript 2.6 brings a faster <code class="language-text">--watch</code> implementation.
The new version optimizes code generation and checking for code bases using ES modules.
Changes detected in a module file will result in <em>only</em> regenerating the changed module, and files that depend on it, instead of the whole project.
Projects with large number of files should reap the most benefit from this change.</p>
<p>The new implementation also brings performance enhancements to watching in tsserver.
The watcher logic has been completely rewritten to respond faster to change events.</p>
<h2>Write-only references now flagged as unused</h2>
<p>TypeScript 2.6 adds revised implementation  the <code class="language-text">--noUnusedLocals</code> and <code class="language-text">--noUnusedParameters</code> <a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html">compiler options</a>.
Declarations are only written to but never read from are now flagged as unused.</p>
<h4>Example</h4>
<p>Bellow both <code class="language-text">n</code> and <code class="language-text">m</code> will be marked as unused, because their values are never <em>read</em>. Previously TypeScript would only check whether their values were <em>referenced</em>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> m<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Also functions that are only called within their own bodies are considered unused.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: 'f' is declared but its value is never read</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>TypeScript 2.5</h2>
<h2>Optional <code class="language-text">catch</code> clause variables</h2>
<p>Thanks to work done by <a href="https://github.com/tinganho">@tinganho</a>, TypeScript 2.5 implements a new ECMAScript feature that allows users to omit the variable in <code class="language-text">catch</code> clauses.
For example, when using <code class="language-text">JSON.parse</code> you may need to wrap calls to the function with a <code class="language-text">try</code>/<code class="language-text">catch</code>, but you may not end up using the <code class="language-text">SyntaxError</code> that gets thrown when input is erroneous.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> input <span class="token operator">=</span> <span class="token string">"..."</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">{</span>
    <span class="token comment">// ^ Notice that our `catch` clause doesn't declare a variable.</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Invalid JSON given\n\n"</span> <span class="token operator">+</span> input<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Type assertion/cast syntax in <code class="language-text">checkJs</code>/<code class="language-text">@ts-check</code> mode</h2>
<p>TypeScript 2.5 introduces the ability to <a href="https://github.com/Microsoft/TypeScript/issues/5158">assert the type of expressions when using plain JavaScript in your projects</a>.
The syntax is an <code class="language-text">/** @type {...} */</code> annotation comment followed by a parenthesized expression whose type needs to be re-evaluated.
For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token comment">/** @type {SomeType} */</span> <span class="token punctuation">(</span>AnyParenthesizedExpression<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Deduplicated and redirected packages</h2>
<p>When importing using the <code class="language-text">Node</code> module resolution strategy in TypeScript 2.5, the compiler will now check whether files originate from “identical” packages.
If a file originates from a package with a <code class="language-text">package.json</code> containing the same <code class="language-text">name</code> and <code class="language-text">version</code> fields as a previously encountered package, then TypeScript will redirect itself to the top-most package.
This helps resolve problems where two packages might contain identical declarations of classes, but which contain <code class="language-text">private</code> members that cause them to be structurally incompatible.</p>
<p>As a nice bonus, this can also reduce the memory and runtime footprint of the compiler and language service by avoiding loading <code class="language-text">.d.ts</code> files from duplicate packages.</p>
<h2>The <code class="language-text">--preserveSymlinks</code> compiler flag</h2>
<p>TypeScript 2.5 brings the <code class="language-text">preserveSymlinks</code> flag, which parallels the behavior of <a href="https://nodejs.org/api/cli.html#cli_preserve_symlinks">the <code class="language-text">--preserve-symlinks</code> flag in Node.js</a>.
This flag also exhibits the opposite behavior to Webpack’s <code class="language-text">resolve.symlinks</code> option (i.e. setting TypeScript’s <code class="language-text">preserveSymlinks</code> to <code class="language-text">true</code> parallels setting Webpack’s <code class="language-text">resolve.symlinks</code> to <code class="language-text">false</code>, and vice-versa).</p>
<p>In this mode, references to modules and packages (e.g. <code class="language-text">import</code>s and <code class="language-text">/// &lt;reference type=&quot;...&quot; /&gt;</code> directives) are all resolved relative to the location of the symbolic link file, rather than relative to the path that the symbolic link resolves to.
For a more concrete example, we’ll defer to <a href="https://nodejs.org/api/cli.html#cli_preserve_symlinks">the documentation on the Node.js website</a>.</p>
<h2>TypeScript 2.4</h2>
<h2>Dynamic Import Expressions</h2>
<p>Dynamic <code class="language-text">import</code> expressions are a new feature and part of ECMAScript that allows users to asynchronously request a module at any arbitrary point in your program.</p>
<p>This means that you can conditionally and lazily import other modules and libraries.
For example, here’s an <code class="language-text">async</code> function that only imports a utility library when it’s needed:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getZipFile</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> files<span class="token punctuation">:</span> File<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>File<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> zipUtil <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/create-zip-file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> zipContents <span class="token operator">=</span> <span class="token keyword">await</span> zipUtil<span class="token punctuation">.</span><span class="token function">getContentAsBlob</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>zipContents<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Many bundlers have support for automatically splitting output bundles based on these <code class="language-text">import</code> expressions, so consider using this new feature with the <code class="language-text">esnext</code> module target.</p>
<h2>String Enums</h2>
<p>TypeScript 2.4 now allows enum members to contain string initializers.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">enum</span> Colors <span class="token punctuation">{</span>
    Red <span class="token operator">=</span> <span class="token string">"RED"</span><span class="token punctuation">,</span>
    Green <span class="token operator">=</span> <span class="token string">"GREEN"</span><span class="token punctuation">,</span>
    Blue <span class="token operator">=</span> <span class="token string">"BLUE"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The caveat is that string-initialized enums can’t be reverse-mapped to get the original enum member name.
In other words, you can’t write <code class="language-text">Colors[&quot;RED&quot;]</code> to get the string <code class="language-text">&quot;Red&quot;</code>.</p>
<h2>Improved inference for generics</h2>
<p>TypeScript 2.4 introduces a few wonderful changes around the way generics are inferred.</p>
<h3>Return types as inference targets</h3>
<p>For one, TypeScript can now make inferences for the return type of a call.
This can improve your experience and catch errors.
Something that now works:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> arrayMap<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token parameter">a</span> <span class="token operator">=></span> a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">lengths</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">arrayMap</span><span class="token punctuation">(</span><span class="token parameter">s</span> <span class="token operator">=></span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>As an example of new errors you might spot as a result:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//      ~~ Error!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3>Type parameter inference from contextual types</h3>
<p>Prior to TypeScript 2.4, in the following example</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> f<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function-variable function">T</span> <span class="token operator">=</span> <span class="token parameter">y</span> <span class="token operator">=></span> y<span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">y</code> would have the type <code class="language-text">any</code>.
This meant the program would type-check, but you could technically do anything with <code class="language-text">y</code>, such as the following:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> f<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function-variable function">T</span> <span class="token operator">=</span> <span class="token parameter">y</span> <span class="token operator">=></span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> y<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">;</span></code></pre></div>
<p>That last example isn’t actually type-safe.</p>
<p>In TypeScript 2.4, the function on the right side implicitly <em>gains</em> type parameters, and <code class="language-text">y</code> is inferred to have the type of that type-parameter.</p>
<p>If you use <code class="language-text">y</code> in a way that the type parameter’s constraint doesn’t support, you’ll correctly get an error.
In this case, the constraint of <code class="language-text">T</code> was (implicitly) <code class="language-text">{}</code>, so the last example will appropriately fail.</p>
<h3>Stricter checking for generic functions</h3>
<p>TypeScript now tries to unify type parameters when comparing two single-signature types.
As a result, you’ll get stricter checks when relating two generic signatures, and may catch some bugs.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">S</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token constant">S</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">B</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> b<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    b <span class="token operator">=</span> a<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Strict contravariance for callback parameters</h2>
<p>TypeScript has always compared parameters in a bivariant way.
There are a number of reasons for this, but by-and-large this was not been a huge issue for our users until we saw some of the adverse effects it had with <code class="language-text">Promise</code>s and <code class="language-text">Observable</code>s.</p>
<p>TypeScript 2.4 introduces tightens this up when relating two callback types. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Mappable</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    map<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Mappable<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">let</span> a<span class="token punctuation">:</span> Mappable<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> b<span class="token punctuation">:</span> Mappable<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>

a <span class="token operator">=</span> b<span class="token punctuation">;</span>
b <span class="token operator">=</span> a<span class="token punctuation">;</span></code></pre></div>
<p>Prior to TypeScript 2.4, this example would succeed.
When relating the types of <code class="language-text">map</code>, TypeScript would bidirectionally relate their parameters (i.e. the type of <code class="language-text">f</code>).
When relating each <code class="language-text">f</code>, TypeScript would also bidirectionally relate the type of <em>those</em> parameters.</p>
<p>When relating the type of <code class="language-text">map</code> in TS 2.4, the language will check whether each parameter is a callback type, and if so, it will ensure that those parameters are checked in a contravariant manner with respect to the current relation.</p>
<p>In other words, TypeScript now catches the above bug, which may be a breaking change for some users, but will largely be helpful.</p>
<h2>Weak Type Detection</h2>
<p>TypeScript 2.4 introduces the concept of “weak types”.
Any type that contains nothing but a set of all-optional properties is considered to be <em>weak</em>.
For example, this <code class="language-text">Options</code> type is a weak type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
    data<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    timeout<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    maxRetries<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In TypeScript 2.4, it’s now an error to assign anything to a weak type when there’s no overlap in properties.
For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">:</span> Options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span>
    payload<span class="token punctuation">:</span> <span class="token string">"hello world!"</span><span class="token punctuation">,</span>
    retryOnFail<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Error!</span>
<span class="token function">sendMessage</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// No overlap between the type of 'opts' and 'Options' itself.</span>
<span class="token comment">// Maybe we meant to use 'data'/'maxRetries' instead of 'payload'/'retryOnFail'.</span></code></pre></div>
<p>You can think of this as TypeScript “toughening up” the weak guarantees of these types to catch what would otherwise be silent bugs.</p>
<p>Since this is a breaking change, you may need to know about the workarounds which are the same as those for strict object literal checks:</p>
<ol>
<li>Declare the properties if they really do exist.</li>
<li>Add an index signature to the weak type (i.e. <code class="language-text">[propName: string]: {}</code>).</li>
<li>Use a type assertion (i.e. <code class="language-text">opts as Options</code>).</li>
</ol>
<h2>TypeScript 2.3</h2>
<h2>Generators and Iteration for ES5/ES3</h2>
<p><em>First some ES2016 terminology:</em></p>
<h4>Iterators</h4>
<p><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteration">ES2015 introduced <code class="language-text">Iterator</code></a>, which is an object that exposes three methods, <code class="language-text">next</code>, <code class="language-text">return</code>, and <code class="language-text">throw</code>, as per the following interface:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Iterator</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token keyword">throw</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This kind of iterator is useful for iterating over synchronously available values, such as the elements of an Array or the keys of a Map.
An object that supports iteration is said to be “iterable” if it has a <code class="language-text">Symbol.iterator</code> method that returns an <code class="language-text">Iterator</code> object.</p>
<p>The Iterator protocol also defines the target of some of the ES2015 features like <code class="language-text">for..of</code> and spread operator and the array rest in destructuring assignmnets.</p>
<h4>Generators</h4>
<p><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-generatorfunction-objects">ES2015 also introduced “Generators”</a>, which are functions that can be used to yield partial computation results via the <code class="language-text">Iterator</code> interface and the <code class="language-text">yield</code> keyword.
Generators can also internally delegate calls to another iterable through <code class="language-text">yield *</code>. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>New <code class="language-text">--downlevelIteration</code></h4>
<p>Previously generators were only supported if the target is ES6/ES2015 or later.
Moreover, constructs that operate on the Iterator protocol, e.g. <code class="language-text">for..of</code> were only supported if they operate on arrays for targets below ES6/ES2015.</p>
<p>TypeScript 2.3 adds full support for generators and the Iterator protocol for ES3 and ES5 targets with <code class="language-text">--downlevelIteration</code> flag.</p>
<p>With <code class="language-text">--downlevelIteration</code>, the compiler uses new type check and emit behavior that attempts to call a <code class="language-text">[Symbol.iterator]()</code> method on the iterated object if it is found, and creates a synthetic array iterator over the object if it is not.</p>
<blockquote>
<p>Please note that this requires a native <code class="language-text">Symbol.iterator</code> or <code class="language-text">Symbol.iterator</code> shim at runtime for any non-array values.</p>
</blockquote>
<p><code class="language-text">for..of</code> statements,  Array Destructuring, and Spread elements in Array, Call, and New expressions support <code class="language-text">Symbol.iterator</code> in ES5/E3 if available when using <code class="language-text">--downlevelIteration</code>, but can be used on an Array even if it does not define <code class="language-text">Symbol.iterator</code> at run time or design time.</p>
<h2>Async Iteration</h2>
<p>TypeScript 2.3 adds support for the async iterators and generators as described by the current <a href="https://github.com/tc39/proposal-async-iteration">TC39 proposal</a>.</p>
<h4>Async iterators</h4>
<p>The Async Iteration introduces an <code class="language-text">AsyncIterator</code>, which is similar to <code class="language-text">Iterator</code>.
The difference lies in the fact that the <code class="language-text">next</code>, <code class="language-text">return</code>, and <code class="language-text">throw</code> methods of an <code class="language-text">AsyncIterator</code> return a <code class="language-text">Promise</code> for the iteration result, rather than the result itself. This allows the caller to enlist in an asynchronous notification for the time at which the <code class="language-text">AsyncIterator</code> has advanced to the point of yielding a value.
An <code class="language-text">AsyncIterator</code> has the following shape:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">AsyncIterator</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token operator">?</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>
  <span class="token keyword">throw</span><span class="token operator">?</span><span class="token punctuation">(</span>e<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IteratorResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>An object that supports async iteration is said to be “iterable” if it has a <code class="language-text">Symbol.asyncIterator</code> method that returns an <code class="language-text">AsyncIterator</code> object.</p>
<h4>Async Generators</h4>
<p>The <a href="https://github.com/tc39/proposal-async-iteration">Async Iteration proposal</a> introduces “Async Generators”, which are async functions that also can be used to yield partial computation results. Async Generators can also delegate calls via <code class="language-text">yield*</code> to either an iterable or async iterable:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As with Generators, Async Generators can only be function declarations, function expressions, or methods of classes or object literals. Arrow functions cannot be Async Generators. Async Generators require a valid, global <code class="language-text">Promise</code> implementation (either native or an ES2015-compatible polyfill), in addition to a valid <code class="language-text">Symbol.asyncIterator</code> reference (either a native symbol or a shim).</p>
<h4>The <code class="language-text">for-await-of</code> Statement</h4>
<p>Finally, ES2015 introduced the <code class="language-text">for..of</code> statement as a means of iterating over an iterable.
Similarly, the Async Iteration proposal introduces the <code class="language-text">for..await..of</code> statement to iterate over an async iterable:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> x <span class="token keyword">of</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">for..await..of</code> statement is only legal within an Async Function or Async Generator.</p>
<h4>Caveats</h4>
<ul>
<li>Keep in mind that our support for async iterators relies on support for <code class="language-text">Symbol.asyncIterator</code> to exist at runtime.
You may need to polyfill <code class="language-text">Symbol.asyncIterator</code>, which for simple purposes can be as simple as: <code class="language-text">(Symbol as any).asyncIterator = Symbol.asyncIterator || Symbol.from(&quot;Symbol.asyncIterator&quot;);</code></li>
<li>You also need to include <code class="language-text">esnext</code> in your <code class="language-text">--lib</code> option, to get the <code class="language-text">AsyncIterator</code> declaration if you do not already have it.</li>
<li>Finally, if your target is ES5 or ES3, you’ll also need to set the <code class="language-text">--downlevelIterators</code> flag.</li>
</ul>
<h2>Generic parameter defaults</h2>
<p>TypeScript 2.3 adds support for declaring defaults for generic type parameters.</p>
<h4>Example</h4>
<p>Consider a function that creates a new <code class="language-text">HTMLElement</code>, calling it with no arguments generates a <code class="language-text">Div</code>; you can optionally pass a list of children as well. Previously you would have to define it as:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Container<span class="token operator">&lt;</span>HTMLDivElement<span class="token punctuation">,</span> HTMLDivElement<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span><span class="token operator">></span><span class="token punctuation">(</span>element<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Container<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span><span class="token operator">></span><span class="token punctuation">(</span>element<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Container<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>With generic parameter defaults we can reduce it to:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> create<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token operator">=</span> HTMLDivElement<span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span>element<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> children<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Container<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>A generic parameter default follows the following rules:</p>
<ul>
<li>A type parameter is deemed optional if it has a default.</li>
<li>Required type parameters must not follow optional type parameters.</li>
<li>Default types for a type parameter must satisfy the constraint for the type parameter, if it exists.</li>
<li>When specifying type arguments, you are only required to specify type arguments for the required type parameters. Unspecified type parameters will resolve to their default types.</li>
<li>If a default type is specified and inference cannot chose a candidate, the default type is inferred.</li>
<li>A class or interface declaration that merges with an existing class or interface declaration may introduce a default for an existing type parameter.</li>
<li>A class or interface declaration that merges with an existing class or interface declaration may introduce a new type parameter as long as it specifies a default.</li>
</ul>
<h2>New <code class="language-text">--strict</code> master option</h2>
<p>New checks added to TypeScript are often off by default to avoid breaking existing projects. While avoiding breakage is a good thing, this strategy has the drawback of making it increasingly complex to choose the highest level of type safety, and doing so requires explicit opt-in action on every TypeScript release. With the <code class="language-text">--strict</code> option it becomes possible to choose maximum type safety with the understanding that additional errors might be reported by newer versions of the compiler as improved type checking features are added.</p>
<p>The new <code class="language-text">--strict</code> compiler option represents the recommended setting of a number of type checking options. Specifically, specifying <code class="language-text">--strict</code> corresponds to specifying all of the following options (and may in the future include more options):</p>
<ul>
<li><code class="language-text">--strictNullChecks</code></li>
<li><code class="language-text">--noImplicitAny</code></li>
<li><code class="language-text">--noImplicitThis</code></li>
<li><code class="language-text">--alwaysStrict</code></li>
</ul>
<p>In exact terms, the <code class="language-text">--strict</code> option sets the <em>default</em> value for the compiler options listed above. This means it is still possible to individually control the options. For example,</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">--strict --noImplicitThis false</code></pre></div>
<p>has the effect of turning on all strict options <em>except</em> the <code class="language-text">--noImplicitThis</code> option. Using this scheme it is possible to express configurations consisting of <em>all</em> strict options except some explicitly listed options. In other words, it is now possible to default to the highest level of type safety but opt out of certain checks.</p>
<p>Starting with TypeScript 2.3, the default <code class="language-text">tsconfig.json</code> generated by <code class="language-text">tsc --init</code> includes a <code class="language-text">&quot;strict&quot;: true</code> setting in the <code class="language-text">&quot;compilerOptions&quot;</code> section. Thus, new projects started with <code class="language-text">tsc --init</code> will by default have the highest level of type safety enabled.</p>
<h2>Enhanced <code class="language-text">--init</code> output</h2>
<p>Along with setting <code class="language-text">--strict</code> on by default, <code class="language-text">tsc --init</code> has an enhanced output. Default <code class="language-text">tsconfig.json</code> files generated by <code class="language-text">tsc --init</code> now include a set of the common compiler options along with their descriptions commented out. Just un-comment the configuration you like to set to get the desired behavior; we hope the new output simplifies the setting up new projects and keeps configuration files readable as projects grow.</p>
<h2>Errors in .js files with <code class="language-text">--checkJs</code></h2>
<p>By default the TypeScript compiler does not report any errors in .js files including using <code class="language-text">--allowJs</code>. With TypeScript 2.3 type-checking errors can also be reported in <code class="language-text">.js</code> files with <code class="language-text">--checkJs</code>.</p>
<p>You can skip checking some files by adding <code class="language-text">// @ts-nocheck</code> comment to them; conversely you can choose to check only a few <code class="language-text">.js</code> files by adding <code class="language-text">// @ts-check</code> comment to them without setting <code class="language-text">--checkJs</code>. You can also ignore errors on specific lines by adding <code class="language-text">// @ts-ignore</code> on the preceding line.</p>
<p><code class="language-text">.js</code> files are still checked to ensure that they only include standard ECMAScript features; type annotations are only allowed in <code class="language-text">.ts</code> files and are flagged as errors in <code class="language-text">.js</code> files. JSDoc comments can be used to add some type information to your JavaScript code, see <a href="https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript">JSDoc Support documentation</a> for more details about the supported JSDoc constructs.</p>
<p>See <a href="https://github.com/Microsoft/TypeScript/wiki/Type-Checking-JavaScript-Files">Type checking JavaScript Files documentation</a> for more details.</p>
<h2>TypeScript 2.2</h2>
<h2>Support for Mix-in classes</h2>
<p>TypeScript 2.2 adds support for the ECMAScript 2015 mixin class pattern (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Mix-ins">MDN Mixin description</a> and <a href="http://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/">“Real” Mixins with JavaScript Classes</a> for more details) as well as rules for combining mixin construct signatures with regular construct signatures in intersection types.</p>
<h5>First some terminology:</h5>
<ul>
<li>A <strong>mixin constructor type</strong> refers to a type that has a single construct signature with a single rest argument of type <code class="language-text">any[]</code> and an object-like return type. For example, given an object-like type <code class="language-text">X</code>, <code class="language-text">new (...args: any[]) =&gt; X</code> is a mixin constructor type with an instance type <code class="language-text">X</code>.</li>
<li>A <strong>mixin class</strong> is a class declaration or expression that <code class="language-text">extends</code> an expression of a type parameter type. The following rules apply to mixin class declarations:</li>
<li>The type parameter type of the <code class="language-text">extends</code> expression must be constrained to a mixin constructor type.</li>
<li>The constructor of a mixin class (if any) must have a single rest parameter of type <code class="language-text">any[]</code> and must use the spread operator to pass those parameters as arguments in a <code class="language-text">super(...args)</code> call.</li>
</ul>
<p>Given an expression <code class="language-text">Base</code> of a parametric type <code class="language-text">T</code> with a constraint <code class="language-text">X</code>, a mixin class <code class="language-text">class C extends Base {...}</code> is processed as if <code class="language-text">Base</code> had type <code class="language-text">X</code> and the resulting type is the intersection <code class="language-text">typeof C &amp; T</code>. In other words, a mixin class is represented as an intersection between the mixin class constructor type and the parametric base class constructor type.</p>
<p>When obtaining the construct signatures of an intersection type that contains mixin constructor types, the mixin construct signatures are discarded and their instance types are mixed into the return types of the other construct signatures in the intersection type. For example, the intersection type <code class="language-text">{ new(...args: any[]) =&gt; A } &amp; { new(s: string) =&gt; B }</code> has a single construct signature <code class="language-text">new(s: string) =&gt; A &amp; B</code>.</p>
<h5>Putting all of the above rules together in an example:</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">public</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Constructor<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> Tagged<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Constructor</span><span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">>></span><span class="token punctuation">(</span>Base<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Base <span class="token punctuation">{</span>
        _tag<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_tag <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> TaggedPoint <span class="token operator">=</span> <span class="token function">Tagged</span><span class="token punctuation">(</span>Point<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TaggedPoint</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
point<span class="token punctuation">.</span>_tag <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">extends</span> <span class="token class-name">Tagged</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    accountBalance<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token string">"Joe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
customer<span class="token punctuation">.</span>_tag <span class="token operator">=</span> <span class="token string">"test"</span><span class="token punctuation">;</span>
customer<span class="token punctuation">.</span>accountBalance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre></div>
<p>Mixin classes can constrain the types of classes they can mix into by specifying a construct signature return type in the constraint for the type parameter. For example, the following <code class="language-text">WithLocation</code> function implements a subclass factory that adds a <code class="language-text">getLocation</code> method to any class that satisfies the <code class="language-text">Point</code> interface (i.e. that has <code class="language-text">x</code> and <code class="language-text">y</code> properties of type <code class="language-text">number</code>).</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> WithLocation <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Constructor</span><span class="token operator">&lt;</span>Point<span class="token operator">>></span><span class="token punctuation">(</span><span class="token parameter">Base<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token keyword">class</span> <span class="token class-name">extends</span> Base <span class="token punctuation">{</span>
        <span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">object</code> type</h2>
<p>TypeScript did not have a type that represents the non-primitive type, i.e. any thing that is not <code class="language-text">number</code> | <code class="language-text">string</code> | <code class="language-text">boolean</code> | <code class="language-text">symbol</code> | <code class="language-text">null</code> | <code class="language-text">undefined</code>. Enter the new <code class="language-text">object</code> type.</p>
<p>With <code class="language-text">object</code> type, APIs like <code class="language-text">Object.create</code> can be better represented. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">:</span> object <span class="token operator">|</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> prop<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>

<span class="token function">create</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token function">create</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token function">create</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span></code></pre></div>
<h2>Support for <code class="language-text">new.target</code></h2>
<p>The <code class="language-text">new.target</code> meta-property is new syntax introduced in ES2015. When an instance of a constructor is created via <code class="language-text">new</code>, the value of <code class="language-text">new.target</code> is set to be a reference to the constructor function initially used to allocate the instance. If a function is called rather than constructed via <code class="language-text">new</code>, <code class="language-text">new.target</code> is set to <code class="language-text">undefined</code>.</p>
<p><code class="language-text">new.target</code> comes in handy when <code class="language-text">Object.setPrototypeOf</code> or <code class="language-text">__proto__</code> needs to be set in a class constructor. One such use case is inheriting from <code class="language-text">Error</code> in NodeJS v4 and higher.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">CustomError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Error' breaks prototype chain here</span>
        Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// restore prototype chain</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This results in the generated JS</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> CustomError <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_super</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">__extends</span><span class="token punctuation">(</span>CustomError<span class="token punctuation">,</span> _super<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">CustomError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _newTarget <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constructor<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token function">_super</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Error' breaks prototype chain here</span>
    _this<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">_newTarget</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// restore prototype chain</span>
    <span class="token keyword">return</span> _this<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> CustomError<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Error<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">new.target</code> also comes in handy for writing constructable functions, for example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* called via 'new' */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Which translates to:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> _newTarget <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">f</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constructor <span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>_newTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* called via 'new' */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Better checking for <code class="language-text">null</code>/<code class="language-text">undefined</code> in operands of expressions</h2>
<p>TypeScript 2.2 improves checking of nullable operands in expressions. Specifically, these are now flagged as errors:</p>
<ul>
<li>If either operand of a <code class="language-text">+</code> operator is nullable, and neither operand is of type <code class="language-text">any</code> or <code class="language-text">string</code>.</li>
<li>If either operand of a <code class="language-text">-</code>, <code class="language-text">*</code>, <code class="language-text">**</code>, <code class="language-text">/</code>, <code class="language-text">%</code>, <code class="language-text">&lt;&lt;</code>, <code class="language-text">&gt;&gt;</code>, <code class="language-text">&gt;&gt;&gt;</code>, <code class="language-text">&amp;</code>, <code class="language-text">|</code>, or <code class="language-text">^</code> operator is nullable.</li>
<li>If either operand of a <code class="language-text">&lt;</code>, <code class="language-text">&gt;</code>, <code class="language-text">&lt;=</code>, <code class="language-text">&gt;=</code>, or <code class="language-text">in</code> operator is nullable.</li>
<li>If the right operand of an <code class="language-text">instanceof</code> operator is nullable.</li>
<li>If the operand of a <code class="language-text">+</code>, <code class="language-text">-</code>, <code class="language-text">~</code>, <code class="language-text">++</code>, or <code class="language-text">--</code> unary operator is nullable.</li>
</ul>
<p>An operand is considered nullable if the type of the operand is <code class="language-text">null</code> or <code class="language-text">undefined</code> or a union type that includes <code class="language-text">null</code> or <code class="language-text">undefined</code>. Note that the union type case only only occurs in <code class="language-text">--strictNullChecks</code> mode because <code class="language-text">null</code> and <code class="language-text">undefined</code> disappear from unions in classic type checking mode.</p>
<h2>Dotted property for types with string index signatures</h2>
<p>Types with a string index signature can be indexed using the <code class="language-text">[]</code> notation, but were not allowed to use the <code class="language-text">.</code>. Starting with TypeScript 2.2 using either should be allowed.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">StringMap</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> map<span class="token punctuation">:</span> StringMap<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>

map<span class="token punctuation">[</span><span class="token string">"prop1"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span>prop2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></code></pre></div>
<p>This only apply to types with an <em>explicit</em> string index signature. It is still an error to access unknown properties on a type using <code class="language-text">.</code> notation.</p>
<h2>Support for spread operator on JSX element children</h2>
<p>TypeScript 2.2 adds support for using spread on a JSX element children. Please see <a href="https://github.com/facebook/jsx/issues/57">facebook/jsx#57</a> for more details.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">Todo</span><span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">:</span> <span class="token punctuation">{</span> key<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> todo<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>prop<span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> prop<span class="token punctuation">.</span>todo<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">TodoList</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> todos <span class="token punctuation">}</span><span class="token punctuation">:</span> TodoListProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token operator">...</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>Todo key<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">}</span> todo<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>todo<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x<span class="token punctuation">:</span> TodoListProps<span class="token punctuation">;</span>

<span class="token operator">&lt;</span>TodoList <span class="token punctuation">{</span><span class="token operator">...</span>x<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></div>
<h2>New <code class="language-text">jsx: react-native</code></h2>
<p>React-native build pipeline expects all files to have a <code class="language-text">.js</code> extensions even if the file contains JSX syntax. The new <code class="language-text">--jsx</code> value <code class="language-text">react-native</code> will persevere the JSX syntax in the output file, but give it a <code class="language-text">.js</code> extension.</p>
<h2>TypeScript 2.1</h2>
<h2><code class="language-text">keyof</code> and Lookup Types</h2>
<p>In JavaScript it is fairly common to have APIs that expect property names as parameters, but so far it hasn’t been possible to express the type relationships that occur in those APIs.</p>
<p>Enter Index Type Query or <code class="language-text">keyof</code>;
An indexed type query <code class="language-text">keyof T</code> yields the type of permitted property names for <code class="language-text">T</code>.
A <code class="language-text">keyof T</code> type is considered a subtype of <code class="language-text">string</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token constant">K1</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">;</span> <span class="token comment">// "name" | "age" | "location"</span>
<span class="token keyword">type</span> <span class="token constant">K2</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// "length" | "push" | "pop" | "concat" | ...</span>
<span class="token keyword">type</span> <span class="token constant">K3</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Person <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// string</span></code></pre></div>
<p>The dual of this is <em>indexed access types</em>, also called <em>lookup types</em>.
Syntactically, they look exactly like an element access, but are written as types:</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">P1</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">P2</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">"name"</span> <span class="token operator">|</span> <span class="token string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
<span class="token keyword">type</span> <span class="token constant">P3</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token string">"charAt"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// (pos: number) => string</span>
<span class="token keyword">type</span> <span class="token constant">P4</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"push"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// (...items: string[]) => number</span>
<span class="token keyword">type</span> <span class="token constant">P5</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string</span></code></pre></div>
<p>You can use this pattern with other parts of the type system to get type-safe lookups.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> getProperty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Inferred type is T[K]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> setProperty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">"hello!"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string</span>

<span class="token keyword">let</span> oops <span class="token operator">=</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"wargarbl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error! "wargarbl" is not "foo" | "bar"</span>

<span class="token function">setProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error!, string expected number</span></code></pre></div>
<h2>Mapped Types</h2>
<p>One common task is to take an existing type and make each of its properties entirely optional.
Let’s say we have a `Person:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A partial version of it would be:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">PartialPerson</span> <span class="token punctuation">{</span>
    name<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>with Mapped types, <code class="language-text">PartialPerson</code> can be written as a generalized transformation on the type <code class="language-text">Person</code> as:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> PartialPerson <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>Person<span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>Mapped types are produced by taking a union of literal types, and computing a set of properties for a new object type.
They’re like <a href="https://docs.python.org/2/tutorial/datastructures.html#nested-list-comprehensions">list comprehensions in Python</a>, but instead of producing new elements in a list, they produce new properties in a type.</p>
<p>In addition to <code class="language-text">Partial</code>, Mapped Types can express many useful transformations on types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Keep types the same, but make each property to be read-only.</span>
<span class="token keyword">type</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Same property names, but make the value a promise instead of a concrete one</span>
<span class="token keyword">type</span> Deferred<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Wrap proxies around properties of T</span>
<span class="token keyword">type</span> Proxify<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">(</span>v<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2><code class="language-text">Partial</code>, <code class="language-text">Readonly</code>, <code class="language-text">Record</code>, and <code class="language-text">Pick</code></h2>
<p><code class="language-text">Partial</code> and <code class="language-text">Readonly</code>, as described earlier, are very useful constructs.
You can use them to describe some common JS routines like:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> assign<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> freeze<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>Because of that, they are now included by default in the standard library.</p>
<p>We’re also including two other utility types as well: <code class="language-text">Record</code> and <code class="language-text">Pick</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// From T pick a set of properties K</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>keys<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nameAndAgeOnly <span class="token operator">=</span> <span class="token function">pick</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { name: string, age: number }</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// For every properties K of type T, transform it to U</span>
<span class="token keyword">function</span> mapObject<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span>

<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">"world"</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token string">"bye"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lengths <span class="token operator">=</span> <span class="token function">mapObject</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token parameter">s</span> <span class="token operator">=></span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { foo: number, bar: number, baz: number }</span></code></pre></div>
<h2>Object Spread and Rest</h2>
<p>TypeScript 2.1 brings support for <a href="https://github.com/sebmarkbage/ecmascript-rest-spread">ES2017 Spread and Rest</a>.</p>
<p>Similar to array spread, spreading an object can be handy to get a shallow copy:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> copy <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>original <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Similarly, you can merge several different objects.
In the following example, <code class="language-text">merged</code> will have properties from <code class="language-text">foo</code>, <code class="language-text">bar</code>, and <code class="language-text">baz</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> merged <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>foo<span class="token punctuation">,</span> <span class="token operator">...</span>bar<span class="token punctuation">,</span> <span class="token operator">...</span>baz <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>You can also override existing properties and add new ones:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>obj<span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// { x: number, y: number, z: number }</span></code></pre></div>
<p>The order of specifying spread operations determines what properties end up in the resulting object;
properties in later spreads “win out” over previously created properties.</p>
<p>Object rests are the dual of object spreads, in that they can extract any extra properties that don’t get picked up when destructuring an element:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> z<span class="token punctuation">,</span> <span class="token operator">...</span>obj1 <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
obj1<span class="token punctuation">;</span> <span class="token comment">// {x: number, y: number};</span></code></pre></div>
<h2>Downlevel Async Functions</h2>
<p>This feature was supported before TypeScript 2.1, but only when targeting ES6/ES2015.
TypeScript 2.1 brings the capability to ES3 and ES5 run-times, meaning you’ll be free to take advantage of it no matter what environment you’re using.</p>
<blockquote>
<p>Note: first, we need to make sure our run-time has an ECMAScript-compliant <code class="language-text">Promise</code> available globally.
That might involve grabbing <a href="https://github.com/stefanpenner/es6-promise">a polyfill</a> for <code class="language-text">Promise</code>, or relying on one that you might have in the run-time that you’re targeting.
We also need to make sure that TypeScript knows <code class="language-text">Promise</code> exists by setting your <code class="language-text">lib</code> flag to something like <code class="language-text">&quot;dom&quot;, &quot;es2015&quot;</code> or <code class="language-text">&quot;dom&quot;, &quot;es2015.promise&quot;, &quot;es5&quot;</code></p>
</blockquote>
<h5>Example</h5>
<h5>tsconfig.json</h5>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"dom"</span><span class="token punctuation">,</span> <span class="token string">"es2015.promise"</span><span class="token punctuation">,</span> <span class="token string">"es5"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h5>dramaticWelcome.ts</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">milliseconds<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> milliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dramaticWelcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">dramaticWelcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Compiling and running the output should result in the correct behavior on an ES3/ES5 engine.</p>
<h2>Support for external helpers library (<code class="language-text">tslib</code>)</h2>
<p>TypeScript injects a handful of helper functions such as <code class="language-text">__extends</code> for inheritance, <code class="language-text">__assign</code> for spread operator in object literals and JSX elements, and <code class="language-text">__awaiter</code> for async functions.</p>
<p>Previously there were two options:</p>
<ol>
<li>inject helpers in <em>every</em> file that needs them, or</li>
<li>no helpers at all with <code class="language-text">--noEmitHelpers</code>.</li>
</ol>
<p>The two options left more to be desired;
bundling the helpers in every file was a pain point for customers trying to keep their package size small.
And not including helpers, meant customers had to maintain their own helpers library.</p>
<p>TypeScript 2.1 allows for including these files in your project once in a separate module, and the compiler will emit imports to them as needed.</p>
<p>First, install the <a href="https://github.com/Microsoft/tslib"><code class="language-text">tslib</code></a> utility library:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">npm install tslib</code></pre></div>
<p>Second, compile your files using <code class="language-text">--importHelpers</code>:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">tsc --module commonjs --importHelpers a.ts</code></pre></div>
<p>So given the following input, the resulting <code class="language-text">.js</code> file will include an import to <code class="language-text">tslib</code> and use the <code class="language-text">__assign</code> helper from it instead of inlining it.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"o"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> copy <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>o <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> tslib_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tslib"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>o <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"o"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>copy <span class="token operator">=</span> tslib_1<span class="token punctuation">.</span><span class="token function">__assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> exports<span class="token punctuation">.</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Untyped imports</h2>
<p>TypeScript has traditionally been overly strict about how you can import modules.
This was to avoid typos and prevent users from using modules incorrectly.</p>
<p>However, a lot of the time, you might just want to import an existing module that may not have its own <code class="language-text">.d.ts</code> file.
Previously this was an error.
Starting with TypeScript 2.1 this is now much easier.</p>
<p>With TypeScript 2.1, you can import a JavaScript module without needing a type declaration.
A type declaration (such as <code class="language-text">declare module &quot;foo&quot; { ... }</code> or <code class="language-text">node_modules/@types/foo</code>) still takes priority if it exists.</p>
<p>An import to a module with no declaration file will still be flagged as an error under <code class="language-text">--noImplicitAny</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Succeeds if `node_modules/asdf/index.js` exists, or if `node_modules/asdf/package.json` defines a valid "main" entry point</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> x <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"asdf"</span><span class="token punctuation">;</span></code></pre></div>
<h2>Support for <code class="language-text">--target ES2016</code>, <code class="language-text">--target ES2017</code> and <code class="language-text">--target ESNext</code></h2>
<p>TypeScript 2.1 supports three new target values <code class="language-text">--target ES2016</code>, <code class="language-text">--target ES2017</code> and <code class="language-text">--target ESNext</code>.</p>
<p>Using target <code class="language-text">--target ES2016</code> will instruct the compiler not to transform ES2016-specific features, e.g. <code class="language-text">**</code> operator.</p>
<p>Similarly, <code class="language-text">--target ES2017</code> will instruct the compiler not to transform ES2017-specific features like <code class="language-text">async</code>/<code class="language-text">await</code>.</p>
<p><code class="language-text">--target ESNext</code> targets latest supported <a href="https://github.com/tc39/proposals">ES proposed features</a>.</p>
<h2>Improved <code class="language-text">any</code> Inference</h2>
<p>Previously, if TypeScript couldn’t figure out the type of a variable, it would choose the <code class="language-text">any</code> type.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">;</span>      <span class="token comment">// implicitly 'any'</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// implicitly 'any[]'</span>

<span class="token keyword">let</span> z<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// explicitly 'any'.</span></code></pre></div>
<p>With TypeScript 2.1, instead of just choosing <code class="language-text">any</code>, TypeScript will infer types based on what you end up assigning later on.</p>
<p>This is only enabled if <code class="language-text">--noImplicitAny</code> is set.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">;</span>

<span class="token comment">// You can still assign anything you want to 'x'.</span>
<span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token comment">// After that last assignment, TypeScript 2.1 knows that 'x' has type '() => number'.</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Thanks to that, it will now tell you that you can't add a number to a function!</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//          ~~~~~</span>
<span class="token comment">// Error! Operator '+' cannot be applied to types '() => number' and 'number'.</span>

<span class="token comment">// TypeScript still allows you to assign anything you want to 'x'.</span>
x <span class="token operator">=</span> <span class="token string">"Hello world!"</span><span class="token punctuation">;</span>

<span class="token comment">// But now it also knows that 'x' is a 'string'!</span>
x<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The same sort of tracking is now also done for empty arrays.</p>
<p>A variable declared with no type annotation and an initial value of <code class="language-text">[]</code> is considered an implicit <code class="language-text">any[]</code> variable.
However, each subsequent <code class="language-text">x.push(value)</code>, <code class="language-text">x.unshift(value)</code> or <code class="language-text">x[n] = value</code> operation <em>evolves</em> the type of the variable in accordance with what elements are added to it.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>  <span class="token comment">// (string | number | boolean)[]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">cond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">cond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>  <span class="token comment">// string[] | null</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Implicit any errors</h2>
<p>One great benefit of this is that you’ll see <em>way fewer</em> implicit <code class="language-text">any</code> errors when running with <code class="language-text">--noImplicitAny</code>.
Implicit <code class="language-text">any</code> errors are only reported when the compiler is unable to know the type of a variable without a type annotation.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Error: Variable 'x' implicitly has type 'any[]' in some locations where its type cannot be determined.</span>
    x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>    <span class="token comment">// Error: Variable 'x' implicitly has an 'any[]' type.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Better inference for literal types</h2>
<p>String, numeric and boolean literal types (e.g. <code class="language-text">&quot;abc&quot;</code>, <code class="language-text">1</code>, and <code class="language-text">true</code>) were previously inferred only in the presence of an explicit type annotation.
Starting with TypeScript 2.1, literal types are <em>always</em> inferred for <code class="language-text">const</code> variables and <code class="language-text">readonly</code> properties.</p>
<p>The type inferred for a <code class="language-text">const</code> variable or <code class="language-text">readonly</code> property without a type annotation is the type of the literal initializer.
The type inferred for a <code class="language-text">let</code> variable, <code class="language-text">var</code> variable, parameter, or non-<code class="language-text">readonly</code> property with an initializer and no type annotation is the widened literal type of the initializer.
Where the widened type for a string literal type is <code class="language-text">string</code>, <code class="language-text">number</code> for numeric literal types, <code class="language-text">boolean</code> for <code class="language-text">true</code> or <code class="language-text">false</code> and the containing enum for enum literal types.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Type 1</span>
<span class="token keyword">const</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">;</span>  <span class="token comment">// Type 1</span>
<span class="token keyword">const</span> c3 <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>  <span class="token comment">// Type "abc"</span>
<span class="token keyword">const</span> c4 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// Type true</span>
<span class="token keyword">const</span> c5 <span class="token operator">=</span> cond <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>  <span class="token comment">// Type 1 | "abc"</span>

<span class="token keyword">let</span> v1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Type number</span>
<span class="token keyword">let</span> v2 <span class="token operator">=</span> c2<span class="token punctuation">;</span>  <span class="token comment">// Type number</span>
<span class="token keyword">let</span> v3 <span class="token operator">=</span> c3<span class="token punctuation">;</span>  <span class="token comment">// Type string</span>
<span class="token keyword">let</span> v4 <span class="token operator">=</span> c4<span class="token punctuation">;</span>  <span class="token comment">// Type boolean</span>
<span class="token keyword">let</span> v5 <span class="token operator">=</span> c5<span class="token punctuation">;</span>  <span class="token comment">// Type number | string</span></code></pre></div>
<p>Literal type widening can be controlled through explicit type annotations.
Specifically, when an expression of a literal type is inferred for a const location without a type annotation, that <code class="language-text">const</code> variable gets a widening literal type inferred.
But when a <code class="language-text">const</code> location has an explicit literal type annotation, the <code class="language-text">const</code> variable gets a non-widening literal type.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>  <span class="token comment">// Widening type "hello"</span>
<span class="token keyword">let</span> v1 <span class="token operator">=</span> c1<span class="token punctuation">;</span>  <span class="token comment">// Type string</span>

<span class="token keyword">const</span> c2<span class="token punctuation">:</span> <span class="token string">"hello"</span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>  <span class="token comment">// Type "hello"</span>
<span class="token keyword">let</span> v2 <span class="token operator">=</span> c2<span class="token punctuation">;</span>  <span class="token comment">// Type "hello"</span></code></pre></div>
<h2>Use returned values from super calls as ‘this’</h2>
<p>In ES2015, constructors which return an object implicitly substitute the value of <code class="language-text">this</code> for any callers of <code class="language-text">super()</code>.
As a result, it is necessary to capture any potential return value of <code class="language-text">super()</code> and replace it with <code class="language-text">this</code>.
This change enables working with <a href="https://w3c.github.io/webcomponents/spec/custom/#htmlelement-constructor">Custom Elements</a>, which takes advantage of this to initialize browser-allocated elements with user-written constructors.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// return a new object other than `this`</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Generates:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> Derived <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_super</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">__extends</span><span class="token punctuation">(</span>Derived<span class="token punctuation">,</span> _super<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token function">_super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        _this<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> _this<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Derived<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<blockquote>
<p>This change entails a break in the behavior of extending built-in classes like <code class="language-text">Error</code>, <code class="language-text">Array</code>, <code class="language-text">Map</code>, etc.. Please see the <a href="https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work">extending built-ins breaking change documentation</a> for more details.</p>
</blockquote>
<h2>Configuration inheritance</h2>
<p>Often a project has multiple output targets, e.g. <code class="language-text">ES5</code> and <code class="language-text">ES2015</code>, debug and production or <code class="language-text">CommonJS</code> and <code class="language-text">System</code>;
Just a few configuration options change between these two targets, and maintaining multiple <code class="language-text">tsconfig.json</code> files can be a hassle.</p>
<p>TypeScript 2.1 supports inheriting configuration using <code class="language-text">extends</code>, where:</p>
<ul>
<li><code class="language-text">extends</code> is a new top-level property in <code class="language-text">tsconfig.json</code> (alongside <code class="language-text">compilerOptions</code>, <code class="language-text">files</code>, <code class="language-text">include</code>, and <code class="language-text">exclude</code>).</li>
<li>The value of <code class="language-text">extends</code> must be a string containing a path to another configuration file to inherit from.</li>
<li>The configuration from the base file are loaded first, then overridden by those in the inheriting config file.</li>
<li>Circularity between configuration files is not allowed.</li>
<li><code class="language-text">files</code>, <code class="language-text">include</code> and <code class="language-text">exclude</code> from the inheriting config file <em>overwrite</em> those from the base config file.</li>
<li>All relative paths found in the configuration file will be resolved relative to the configuration file they originated in.</li>
</ul>
<h5>Example</h5>
<p><code class="language-text">configs/base.json</code>:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strictNullChecks"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">tsconfig.json</code>:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./configs/base"</span><span class="token punctuation">,</span>
  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"main.ts"</span><span class="token punctuation">,</span>
    <span class="token string">"supplemental.ts"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">tsconfig.nostrictnull.json</code>:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./tsconfig"</span><span class="token punctuation">,</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"strictNullChecks"</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>New <code class="language-text">--alwaysStrict</code></h2>
<p>Invoking the compiler with <code class="language-text">--alwaysStrict</code> causes:</p>
<ol>
<li>Parses all the code in strict mode.</li>
<li>Writes <code class="language-text">&quot;use strict&quot;;</code> directive atop every generated file.</li>
</ol>
<p>Modules are parsed automatically in strict mode.
The new flag is recommended for non-module code.</p>
<h2>TypeScript 2.0</h2>
<h2>Null- and undefined-aware types</h2>
<p>TypeScript has two special types, Null and Undefined, that have the values <code class="language-text">null</code> and <code class="language-text">undefined</code> respectively.
Previously it was not possible to explicitly name these types, but <code class="language-text">null</code> and <code class="language-text">undefined</code> may now be used as type names regardless of type checking mode.</p>
<p>The type checker previously considered <code class="language-text">null</code> and <code class="language-text">undefined</code> assignable to anything.
Effectively, <code class="language-text">null</code> and <code class="language-text">undefined</code> were valid values of <em>every</em> type and it wasn’t possible to specifically exclude them (and therefore not possible to detect erroneous use of them).</p>
<h3><code class="language-text">--strictNullChecks</code></h3>
<p><code class="language-text">--strictNullChecks</code> switches to a new strict null checking mode.</p>
<p>In strict null checking mode, the <code class="language-text">null</code> and <code class="language-text">undefined</code> values are <em>not</em> in the domain of every type and are only assignable to themselves and <code class="language-text">any</code> (the one exception being that <code class="language-text">undefined</code> is also assignable to <code class="language-text">void</code>).
So, whereas <code class="language-text">T</code> and <code class="language-text">T | undefined</code> are considered synonymous in regular type checking mode (because <code class="language-text">undefined</code> is considered a subtype of any <code class="language-text">T</code>), they are different types in strict type checking mode, and only <code class="language-text">T | undefined</code> permits <code class="language-text">undefined</code> values. The same is true for the relationship of <code class="language-text">T</code> to <code class="language-text">T | null</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> undefined<span class="token punctuation">;</span>
<span class="token keyword">let</span> z<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
z <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
x <span class="token operator">=</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
y <span class="token operator">=</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
z <span class="token operator">=</span> undefined<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
y <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
z <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
x <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
x <span class="token operator">=</span> z<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
y <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
y <span class="token operator">=</span> z<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
z <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
z <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// Ok</span></code></pre></div>
<h3>Assigned-before-use checking</h3>
<p>In strict null checking mode the compiler requires every reference to a local variable of a type that doesn’t include <code class="language-text">undefined</code> to be preceded by an assignment to that variable in every possible preceding code path.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> z<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> undefined<span class="token punctuation">;</span>
x<span class="token punctuation">;</span>  <span class="token comment">// Error, reference not preceded by assignment</span>
y<span class="token punctuation">;</span>  <span class="token comment">// Error, reference not preceded by assignment</span>
z<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
x<span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
y<span class="token punctuation">;</span>  <span class="token comment">// Ok</span></code></pre></div>
<p>The compiler checks that variables are definitely assigned by performing <em>control flow based type analysis</em>. See later for further details on this topic.</p>
<h3>Optional parameters and properties</h3>
<p>Optional parameters and properties automatically have <code class="language-text">undefined</code> added to their types, even when their type annotations don’t specifically include <code class="language-text">undefined</code>.
For example, the following two types are identical:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">type</span> <span class="token function-variable function">T1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>              <span class="token comment">// x has type number | undefined</span>
<span class="token keyword">type</span> <span class="token function-variable function">T2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> undefined</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// x has type number | undefined</span></code></pre></div>
<h3>Non-null and non-undefined type guards</h3>
<p>A property access or a function call produces a compile-time error if the object or function is of a type that includes <code class="language-text">null</code> or <code class="language-text">undefined</code>.
However, type guards are extended to support non-null and non-undefined checks.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> undefined<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Ok, type of x is number here</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error, type of x is number? here</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> x <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token comment">// Type of a is string</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> x <span class="token operator">&amp;&amp;</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Type of b is string | 0 | null | undefined</span></code></pre></div>
<p>Non-null and non-undefined type guards may use the <code class="language-text">==</code>, <code class="language-text">!=</code>, <code class="language-text">===</code>, or <code class="language-text">!==</code> operator to compare to <code class="language-text">null</code> or <code class="language-text">undefined</code>, as in <code class="language-text">x != null</code> or <code class="language-text">x === undefined</code>.
The effects on subject variable types accurately reflect JavaScript semantics (e.g. double-equals operators check for both values no matter which one is specified whereas triple-equals only checks for the specified value).</p>
<h3>Dotted names in type guards</h3>
<p>Type guards previously only supported checking local variables and parameters.
Type guards now support checking “dotted names” consisting of a variable or parameter name followed one or more property accesses.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
    location<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        y<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">options<span class="token operator">?</span><span class="token punctuation">:</span> Options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>location<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> x <span class="token operator">=</span> options<span class="token punctuation">.</span>location<span class="token punctuation">.</span>x<span class="token punctuation">;</span>  <span class="token comment">// Type of x is number</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Type guards for dotted names also work with user defined type guard functions and the <code class="language-text">typeof</code> and <code class="language-text">instanceof</code> operators and do not depend on the <code class="language-text">--strictNullChecks</code> compiler option.</p>
<p>A type guard for a dotted name has no effect following an assignment to any part of the dotted name.
For example, a type guard for <code class="language-text">x.y.z</code> will have no effect following an assignment to <code class="language-text">x</code>, <code class="language-text">x.y</code>, or <code class="language-text">x.y.z</code>.</p>
<h3>Expression operators</h3>
<p>Expression operators permit operand types to include <code class="language-text">null</code> and/or <code class="language-text">undefined</code> but always produce values of non-null and non-undefined types.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>  <span class="token comment">// Produces value of type number</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">&amp;&amp;</code> operator adds <code class="language-text">null</code> and/or <code class="language-text">undefined</code> to the type of the right operand depending on which are present in the type of the left operand, and the <code class="language-text">||</code> operator removes both <code class="language-text">null</code> and <code class="language-text">undefined</code> from the type of the left operand in the resulting union type.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">interface</span> <span class="token class-name">Entity</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x<span class="token punctuation">:</span> Entity <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> x <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>name<span class="token punctuation">;</span>  <span class="token comment">// s is of type string | null</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> x <span class="token operator">||</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"test"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// y is of type Entity</span></code></pre></div>
<h3>Type widening</h3>
<p>The <code class="language-text">null</code> and <code class="language-text">undefined</code> types are <em>not</em> widened to <code class="language-text">any</code> in strict null checking mode.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// Type of z is null</span></code></pre></div>
<p>In regular type checking mode the inferred type of <code class="language-text">z</code> is <code class="language-text">any</code> because of widening, but in strict null checking mode the inferred type of <code class="language-text">z</code> is <code class="language-text">null</code> (and therefore, absent a type annotation, <code class="language-text">null</code> is the only possible value for <code class="language-text">z</code>).</p>
<h3>Non-null assertion operator</h3>
<p>A new <code class="language-text">!</code> post-fix expression operator may be used to assert that its operand is non-null and non-undefined in contexts where the type checker is unable to conclude that fact.
Specifically, the operation <code class="language-text">x!</code> produces a value of the type of <code class="language-text">x</code> with <code class="language-text">null</code> and <code class="language-text">undefined</code> excluded.
Similar to type assertions of the forms <code class="language-text">&lt;T&gt;x</code> and <code class="language-text">x as T</code>, the <code class="language-text">!</code> non-null assertion operator is simply removed in the emitted JavaScript code.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Compiled with --strictNullChecks</span>
<span class="token keyword">function</span> <span class="token function">validateEntity</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">?</span><span class="token punctuation">:</span> Entity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Throw exception if e is null or invalid entity</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">processEntity</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">?</span><span class="token punctuation">:</span> Entity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">validateEntity</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> e<span class="token operator">!</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>  <span class="token comment">// Assert that e is non-null and access name</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Compatibility</h3>
<p>The new features are designed such that they can be used in both strict null checking mode and regular type checking mode.
In particular, the <code class="language-text">null</code> and <code class="language-text">undefined</code> types are automatically erased from union types in regular type checking mode (because they are subtypes of all other types), and the <code class="language-text">!</code> non-null assertion expression operator is permitted but has no effect in regular type checking mode. Thus, declaration files that are updated to use null- and undefined-aware types can still be used in regular type checking mode for backwards compatibility.</p>
<p>In practical terms, strict null checking mode requires that all files in a compilation are null- and undefined-aware.</p>
<h2>Control flow based type analysis</h2>
<p>TypeScript 2.0 implements a control flow-based type analysis for local variables and parameters.
Previously, the type analysis performed for type guards was limited to <code class="language-text">if</code> statements and <code class="language-text">?:</code> conditional expressions and didn’t include effects of assignments and control flow constructs such as <code class="language-text">return</code> and <code class="language-text">break</code> statements.
With TypeScript 2.0, the type checker analyses all possible flows of control in statements and expressions to produce the most specific type possible (the <em>narrowed type</em>) at any given location for a local variable or parameter that is declared to have a union type.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span> <span class="token comment">// type of x is string here</span>
        x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        x<span class="token punctuation">;</span> <span class="token comment">// type of x is number here</span>
    <span class="token punctuation">}</span>
    x<span class="token punctuation">;</span> <span class="token comment">// type of x is number | boolean here</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    x<span class="token punctuation">;</span> <span class="token comment">// type of x is string here</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Control flow based type analysis is particuarly relevant in <code class="language-text">--strictNullChecks</code> mode because nullable types are represented using union types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    x<span class="token punctuation">;</span> <span class="token comment">// type of x is string in remainder of function</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Furthermore, in <code class="language-text">--strictNullChecks</code> mode, control flow based type analysis includes <em>definite assignment analysis</em> for local variables of types that don’t permit the value <code class="language-text">undefined</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">mumble</span><span class="token punctuation">(</span><span class="token parameter">check<span class="token punctuation">:</span> <span class="token builtin">boolean</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// Type doesn't permit undefined</span>
    x<span class="token punctuation">;</span> <span class="token comment">// Error, x is undefined</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        x<span class="token punctuation">;</span> <span class="token comment">// Ok</span>
    <span class="token punctuation">}</span>
    x<span class="token punctuation">;</span> <span class="token comment">// Error, x is possibly undefined</span>
    x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    x<span class="token punctuation">;</span> <span class="token comment">// Ok</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Tagged union types</h2>
<p>TypeScript 2.0 implements support for tagged (or discriminated) union types.
Specifically, the TS compiler now support type guards that narrow union types based on tests of a discriminant property and furthermore extend that capability to <code class="language-text">switch</code> statements.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"square"</span><span class="token punctuation">;</span>
    size<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"rectangle"</span><span class="token punctuation">;</span>
    width<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    height<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
    kind<span class="token punctuation">:</span> <span class="token string">"circle"</span><span class="token punctuation">;</span>
    radius<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Shape <span class="token operator">=</span> Square <span class="token operator">|</span> Rectangle <span class="token operator">|</span> Circle<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> Shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// In the following switch statement, the type of s is narrowed in each case clause</span>
    <span class="token comment">// according to the value of the discriminant property, thus allowing the other properties</span>
    <span class="token comment">// of that variant to be accessed without a type assertion.</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">"square"</span><span class="token punctuation">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"rectangle"</span><span class="token punctuation">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>width <span class="token operator">*</span> s<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"circle"</span><span class="token punctuation">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">*</span> s<span class="token punctuation">.</span>radius<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> Shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"square"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        s<span class="token punctuation">;</span>  <span class="token comment">// Square</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        s<span class="token punctuation">;</span>  <span class="token comment">// Rectangle | Circle</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> Shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"square"</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"rectangle"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    s<span class="token punctuation">;</span>  <span class="token comment">// Circle</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A <em>discriminant property type guard</em> is an expression of the form <code class="language-text">x.p == v</code>, <code class="language-text">x.p === v</code>, <code class="language-text">x.p != v</code>, or <code class="language-text">x.p !== v</code>, where <code class="language-text">p</code> and <code class="language-text">v</code> are a property and an expression of a string literal type or a union of string literal types.
The discriminant property type guard narrows the type of <code class="language-text">x</code> to those constituent types of <code class="language-text">x</code> that have a discriminant property <code class="language-text">p</code> with one of the possible values of <code class="language-text">v</code>.</p>
<p>Note that we currently only support discriminant properties of string literal types.
We intend to later add support for boolean and numeric literal types.</p>
<h2>The <code class="language-text">never</code> type</h2>
<p>TypeScript 2.0 introduces a new primitive type <code class="language-text">never</code>.
The <code class="language-text">never</code> type represents the type of values that never occur.
Specifically, <code class="language-text">never</code> is the return type for functions that never return and <code class="language-text">never</code> is the type of variables under type guards that are never true.</p>
<p>The <code class="language-text">never</code> type has the following characteristics:</p>
<ul>
<li><code class="language-text">never</code> is a subtype of and assignable to every type.</li>
<li>No type is a subtype of or assignable to <code class="language-text">never</code> (except <code class="language-text">never</code> itself).</li>
<li>In a function expression or arrow function with no return type annotation, if the function has no <code class="language-text">return</code> statements, or only <code class="language-text">return</code> statements with expressions of type <code class="language-text">never</code>, and if the end point of the function is not reachable (as determined by control flow analysis), the inferred return type for the function is <code class="language-text">never</code>.</li>
<li>In a function with an explicit <code class="language-text">never</code> return type annotation, all <code class="language-text">return</code> statements (if any) must have expressions of type <code class="language-text">never</code> and the end point of the function must not be reachable.</li>
</ul>
<p>Because <code class="language-text">never</code> is a subtype of every type, it is always omitted from union types and it is ignored in function return type inference as long as there are other types being returned.</p>
<p>Some examples of functions returning <code class="language-text">never</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Function returning never must have unreachable end point</span>
<span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Inferred return type is never</span>
<span class="token keyword">function</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Something failed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Function returning never must have unreachable end point</span>
<span class="token keyword">function</span> <span class="token function">infiniteLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Some examples of use of functions returning <code class="language-text">never</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Inferred return type is number</span>
<span class="token keyword">function</span> <span class="token function">move1</span><span class="token punctuation">(</span>direction<span class="token punctuation">:</span> <span class="token string">"up"</span> <span class="token operator">|</span> <span class="token string">"down"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>direction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">"up"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"down"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Should never get here"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Inferred return type is number</span>
<span class="token keyword">function</span> <span class="token function">move2</span><span class="token punctuation">(</span>direction<span class="token punctuation">:</span> <span class="token string">"up"</span> <span class="token operator">|</span> <span class="token string">"down"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> direction <span class="token operator">===</span> <span class="token string">"up"</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span>
        direction <span class="token operator">===</span> <span class="token string">"down"</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">:</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Should never get here"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Inferred return type is T</span>
<span class="token keyword">function</span> check<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token operator">|</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">||</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Undefined value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Because <code class="language-text">never</code> is assignable to every type, a function returning <code class="language-text">never</code> can be used when a callback returning a more specific type is required:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token function-variable function">cb</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<h2>Read-only properties and index signatures</h2>
<p>A property or index signature can now be declared with the <code class="language-text">readonly</code> modifier is considered read-only.</p>
<p>Read-only properties may have initializers and may be assigned to in constructors within the same class declaration, but otherwise assignments to read-only properties are disallowed.</p>
<p>In addition, entities are <em>implicitly</em> read-only in several situations:</p>
<ul>
<li>A property declared with a <code class="language-text">get</code> accessor and no <code class="language-text">set</code> accessor is considered read-only.</li>
<li>In the type of an enum object, enum members are considered read-only properties.</li>
<li>In the type of a module object, exported <code class="language-text">const</code> variables are considered read-only properties.</li>
<li>An entity declared in an <code class="language-text">import</code> statement is considered read-only.</li>
<li>An entity accessed through an ES2015 namespace import is considered read-only (e.g. <code class="language-text">foo.x</code> is read-only when <code class="language-text">foo</code> is declared as <code class="language-text">import * as foo from &quot;foo&quot;</code>).</li>
</ul>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p1<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// Error, p1.x is read-only</span>

<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p3<span class="token punctuation">:</span> Point <span class="token operator">=</span> p2<span class="token punctuation">;</span>  <span class="token comment">// Ok, read-only alias for p2</span>
p3<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// Error, p3.x is read-only</span>
p2<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// Ok, but also changes p3.x because of aliasing</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>  <span class="token comment">// Assignment permitted in constructor</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token punctuation">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=</span> a<span class="token punctuation">;</span>
b<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>      <span class="token comment">// Error, elements are read-only</span>
b<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Error, no push method (because it mutates array)</span>
b<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">// Error, length is read-only</span>
a <span class="token operator">=</span> b<span class="token punctuation">;</span>         <span class="token comment">// Error, mutating methods are missing</span></code></pre></div>
<h2>Specifying the type of <code class="language-text">this</code> for functions</h2>
<p>Following up on specifying the type of <code class="language-text">this</code> in a class or an interface, functions and methods can now declare the type of <code class="language-text">this</code> they expect.</p>
<p>By default the type of <code class="language-text">this</code> inside a function is <code class="language-text">any</code>.
Starting with TypeScript 2.0, you can provide an explicit <code class="language-text">this</code> parameter.
<code class="language-text">this</code> parameters are fake parameters that come first in the parameter list of a function:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span><span class="token punctuation">:</span> <span class="token keyword">void</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// make sure `this` is unusable in this standalone function</span>
<span class="token punctuation">}</span></code></pre></div>
<h3><code class="language-text">this</code> parameters in callbacks</h3>
<p>Libraries can also use <code class="language-text">this</code> parameters to declare how callbacks will be invoked.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">UIElement</span> <span class="token punctuation">{</span>
    <span class="token function">addClickListener</span><span class="token punctuation">(</span><span class="token function-variable function">onclick</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">,</span> e<span class="token punctuation">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">this: void</code> means that <code class="language-text">addClickListener</code> expects <code class="language-text">onclick</code> to be a function that does not require a <code class="language-text">this</code> type.</p>
<p>Now if you annotate calling code with <code class="language-text">this</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    info<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">onClickBad</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span><span class="token punctuation">:</span> Handler<span class="token punctuation">,</span> e<span class="token punctuation">:</span> Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// oops, used this here. using this callback would crash at runtime</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> e<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
uiElement<span class="token punctuation">.</span><span class="token function">addClickListener</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>onClickBad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span></code></pre></div>
<h3><code class="language-text">--noImplicitThis</code></h3>
<p>A new flag is also added in TypeScript 2.0 to flag all uses of <code class="language-text">this</code> in functions without an explicit type annotation.</p>
<h2>Glob support in <code class="language-text">tsconfig.json</code></h2>
<p>Glob support is here!! Glob support has been <a href="https://github.com/Microsoft/TypeScript/issues/1927">one of the most requested features</a>.</p>
<p>Glob-like file patterns are supported two properties <code class="language-text">&quot;include&quot;</code> and <code class="language-text">&quot;exclude&quot;</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
        <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"removeComments"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"preserveConstEnums"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"outFile"</span><span class="token operator">:</span> <span class="token string">"../../built/local/tsc.js"</span><span class="token punctuation">,</span>
        <span class="token property">"sourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"src/**/*"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
        <span class="token string">"**/*.spec.ts"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The supported glob wildcards are:</p>
<ul>
<li><code class="language-text">*</code> matches zero or more characters (excluding directory separators)</li>
<li><code class="language-text">?</code> matches any one character (excluding directory separators)</li>
<li><code class="language-text">**/</code> recursively matches any subdirectory</li>
</ul>
<p>If a segment of a glob pattern includes only <code class="language-text">*</code> or <code class="language-text">.*</code>, then only files with supported extensions are included (e.g. <code class="language-text">.ts</code>, <code class="language-text">.tsx</code>, and <code class="language-text">.d.ts</code> by default with <code class="language-text">.js</code> and <code class="language-text">.jsx</code> if <code class="language-text">allowJs</code> is set to true).</p>
<p>If the <code class="language-text">&quot;files&quot;</code> and <code class="language-text">&quot;include&quot;</code> are both left unspecified, the compiler defaults to including all TypeScript (<code class="language-text">.ts</code>, <code class="language-text">.d.ts</code> and <code class="language-text">.tsx</code>) files in the containing directory and subdirectories except those excluded using the <code class="language-text">&quot;exclude&quot;</code> property. JS files (<code class="language-text">.js</code> and <code class="language-text">.jsx</code>) are also included if <code class="language-text">allowJs</code> is set to true.</p>
<p>If the <code class="language-text">&quot;files&quot;</code> or <code class="language-text">&quot;include&quot;</code> properties are specified, the compiler will instead include the union of the files included by those two properties.
Files in the directory specified using the <code class="language-text">&quot;outDir&quot;</code> compiler option are always excluded unless explicitly included via the <code class="language-text">&quot;files&quot;</code> property (even when the ”<code class="language-text">exclude</code>” property is specified).</p>
<p>Files included using <code class="language-text">&quot;include&quot;</code> can be filtered using the <code class="language-text">&quot;exclude&quot;</code> property.
However, files included explicitly using the <code class="language-text">&quot;files&quot;</code> property are always included regardless of <code class="language-text">&quot;exclude&quot;</code>.
The <code class="language-text">&quot;exclude&quot;</code> property defaults to excluding the <code class="language-text">node_modules</code>, <code class="language-text">bower_components</code>, and <code class="language-text">jspm_packages</code> directories when not specified.</p>
<h2>Module resolution enhancements: BaseUrl, Path mapping, rootDirs and tracing</h2>
<p>TypeScript 2.0 provides a set of additional module resolution knops to <em>inform</em> the compiler where to find declarations for a given module.</p>
<p>See <a href="http://www.typescriptlang.org/docs/handbook/module-resolution.html">Module Resolution</a> documentation for more details.</p>
<h3>Base URL</h3>
<p>Using a <code class="language-text">baseUrl</code> is a common practice in applications using AMD module loaders where modules are “deployed” to a single folder at run-time.
All module imports with non-relative names are assumed to be relative to the <code class="language-text">baseUrl</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"./modules"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now imports to <code class="language-text">&quot;moduleA&quot;</code> would be looked up in <code class="language-text">./modules/moduleA</code></p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">"moduleA"</span><span class="token punctuation">;</span></code></pre></div>
<h3>Path mapping</h3>
<p>Sometimes modules are not directly located under <em>baseUrl</em>.
Loaders use a mapping configuration to map module names to files at run-time, see <a href="http://requirejs.org/docs/api.html#config-paths">RequireJs documentation</a> and <a href="https://github.com/systemjs/systemjs/blob/master/docs/overview.md#map-config">SystemJS documentation</a>.</p>
<p>The TypeScript compiler supports the declaration of such mappings using <code class="language-text">&quot;paths&quot;</code> property in <code class="language-text">tsconfig.json</code> files.</p>
<h4>Example</h4>
<p>For instance, an import to a module <code class="language-text">&quot;jquery&quot;</code> would be translated at runtime to <code class="language-text">&quot;node_modules/jquery/dist/jquery.slim.min.js&quot;</code>.</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"./node_modules"</span><span class="token punctuation">,</span>
    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"jquery"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"jquery/dist/jquery.slim.min"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Using <code class="language-text">&quot;paths&quot;</code> also allow for more sophisticated mappings including multiple fall back locations.
Consider a project configuration where only some modules are available in one location, and the rest are in another.</p>
<h3>Virtual Directories with <code class="language-text">rootDirs</code></h3>
<p>Using ‘rootDirs’, you can inform the compiler of the <em>roots</em> making up this “virtual” directory;
and thus the compiler can resolve relative modules imports within these “virtual” directories <em>as if</em> were merged together in one directory.</p>
<h4>Example</h4>
<p>Given this project structure:</p>
<div class="gatsby-highlight" data-language="tree"><pre class="language-tree"><code class="language-tree"> src
 └── views
     └── view1.ts (imports &#39;./template1&#39;)
     └── view2.ts

 generated
 └── templates
         └── views
             └── template1.ts (imports &#39;./view2&#39;)</code></pre></div>
<p>A build step will copy the files in <code class="language-text">/src/views</code> and <code class="language-text">/generated/templates/views</code> to the same directory in the output.
At run-time, a view can expect its template to exist next to it, and thus should import it using a relative name as <code class="language-text">&quot;./template&quot;</code>.</p>
<p><code class="language-text">&quot;rootDirs&quot;</code> specify a list of <em>roots</em> whose contents are expected to merge at run-time.
So following our example, the <code class="language-text">tsconfig.json</code> file should look like:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"rootDirs"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"src/views"</span><span class="token punctuation">,</span>
      <span class="token string">"generated/templates/views"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Tracing module resolution</h3>
<p><code class="language-text">--traceResolution</code> offers a handy way to understand how modules have been resolved by the compiler.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">tsc --traceResolution</code></pre></div>
<h2>Shorthand ambient module declarations</h2>
<p>If you don’t want to take the time to write out declarations before using a new module, you can now just use a shorthand declaration to get started quickly.</p>
<h4>declarations.d.ts</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"hot-new-module"</span><span class="token punctuation">;</span></code></pre></div>
<p>All imports from a shorthand module will have the any type.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> x<span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"hot-new-module"</span><span class="token punctuation">;</span>
<span class="token function">x</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Wildcard character in module names</h2>
<p>Importing none-code resources using module loaders extension (e.g. <a href="https://github.com/amdjs/amdjs-api/blob/master/LoaderPlugins.md">AMD</a> or <a href="https://github.com/systemjs/systemjs/blob/master/docs/creating-plugins.md">SystemJS</a>) has not been easy before;
previously an ambient module declaration had to be defined for each resource.</p>
<p>TypeScript 2.0 supports the use of the wildcard character (<code class="language-text">*</code>) to declare a “family” of module names;
this way, a declaration is only required once for an extension, and not for every resource.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"*!text"</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> content<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Some do it the other way around.</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"json!*"</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now you can import things that match <code class="language-text">&quot;*!text&quot;</code> or <code class="language-text">&quot;json!*&quot;</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> fileContent <span class="token keyword">from</span> <span class="token string">"./xyz.txt!text"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">"json!http://example.com/data.json"</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> fileContent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Wildcard module names can be even more useful when migrating from an un-typed code base.
Combined with Shorthand ambient module declarations, a set of modules can be easily declared as <code class="language-text">any</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"myLibrary/*"</span><span class="token punctuation">;</span></code></pre></div>
<p>All imports to any module under <code class="language-text">myLibrary</code> would be considered to have the type <code class="language-text">any</code> by the compiler;
thus, shutting down any checking on the shapes or types of these modules.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"myLibrary/fileSystem/readFile"</span><span class="token punctuation">;</span>

<span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// readFile is 'any'</span></code></pre></div>
<h2>Support for UMD module definitions</h2>
<p>Some libraries are designed to be used in many module loaders, or with no module loading (global variables).
These are known as <a href="https://github.com/umdjs/umd">UMD</a> or <a href="http://isomorphic.net">Isomorphic</a> modules.
These libraries can be accessed through either an import or a global variable.</p>
<p>For example:</p>
<h5>math-lib.d.ts</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function">isPrime</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">as</span> <span class="token keyword">namespace</span> mathLib<span class="token punctuation">;</span></code></pre></div>
<p>The library can then be used as an import within modules:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> isPrime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"math-lib"</span><span class="token punctuation">;</span>
<span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mathLib<span class="token punctuation">.</span><span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ERROR: can't use the global definition from inside a module</span></code></pre></div>
<p>It can also be used as a global variable, but only inside of a script.
(A script is a file with no imports or exports.)</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">mathLib<span class="token punctuation">.</span><span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Optional class properties</h2>
<p>Optional properties and methods can now be declared in classes, similar to what is already permitted in interfaces.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    b<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    g<span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  <span class="token comment">// Body of optional method can be omitted</span>
    h<span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>When compiled in <code class="language-text">--strictNullChecks</code> mode, optional properties and methods automatically have <code class="language-text">undefined</code> included in their type. Thus, the <code class="language-text">b</code> property above is of type <code class="language-text">number | undefined</code> and the <code class="language-text">g</code> method above is of type <code class="language-text">(() =&gt; number) | undefined</code>.
Type guards can be used to strip away the <code class="language-text">undefined</code> part of the type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Bar</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span>a<span class="token punctuation">;</span>  <span class="token comment">// number</span>
    x<span class="token punctuation">.</span>b<span class="token punctuation">;</span>  <span class="token comment">// number | undefined</span>
    x<span class="token punctuation">.</span>f<span class="token punctuation">;</span>  <span class="token comment">// () => number</span>
    x<span class="token punctuation">.</span>g<span class="token punctuation">;</span>  <span class="token comment">// (() => number) | undefined</span>
    <span class="token keyword">let</span> f1 <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// number</span>
    <span class="token keyword">let</span> g1 <span class="token operator">=</span> x<span class="token punctuation">.</span>g <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// number | undefined</span>
    <span class="token keyword">let</span> g2 <span class="token operator">=</span> x<span class="token punctuation">.</span>g <span class="token operator">?</span> x<span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// number</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Private and Protected Constructors</h2>
<p>A class constructor may be marked <code class="language-text">private</code> or <code class="language-text">protected</code>.
A class with private constructor cannot be instantiated outside the class body, and cannot be extended.
A class with protected constructor cannot be instantiated outside the class body, but can be extended.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token punctuation">:</span> Singleton<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Singleton<span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Singleton<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Singleton<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: constructor of 'Singleton' is private.</span>
<span class="token keyword">let</span> v <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Abstract properties and accessors</h2>
<p>An abstract class can declare abstract properties and/or accessors.
Any sub class will need to declare the abstract properties or be marked as abstract.
Abstract properties cannot have an initializer.
Abstract accessors cannot have bodies.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">get</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">set</span> <span class="token function">value</span><span class="token punctuation">(</span>v<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">"derived"</span><span class="token punctuation">;</span>

    value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Implicit index signatures</h2>
<p>An object literal type is now assignable to a type with an index signature if all known properties in the object literal are assignable to that index signature. This makes it possible to pass a variable that was initialized with an object literal as parameter to a function that expects a map or dictionary:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">httpService</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> headers<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"application/x-www-form-urlencoded"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">httpService</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">"Content-Type"</span><span class="token punctuation">:</span> <span class="token string">"application/x-www-form-urlencoded"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Ok</span>
<span class="token function">httpService</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Now ok, previously wasn't</span></code></pre></div>
<h2>Including built-in type declarations with <code class="language-text">--lib</code></h2>
<p>Getting to ES6/ES2015 built-in API declarations were only limited to <code class="language-text">target: ES6</code>.
Enter <code class="language-text">--lib</code>; with <code class="language-text">--lib</code> you can specify a list of built-in API declaration groups that you can chose to include in your project.
For instance, if you expect your runtime to have support for <code class="language-text">Map</code>, <code class="language-text">Set</code> and <code class="language-text">Promise</code> (e.g. most evergreen browsers today), just include <code class="language-text">--lib es2015.collection,es2015.promise</code>.
Similarly you can exclude declarations you do not want to include in your project, e.g. DOM if you are working on a node project using <code class="language-text">--lib es5,es6</code>.</p>
<p>Here is a list of available API groups:</p>
<ul>
<li>dom</li>
<li>webworker</li>
<li>es5</li>
<li>es6 / es2015</li>
<li>es2015.core</li>
<li>es2015.collection</li>
<li>es2015.iterable</li>
<li>es2015.promise</li>
<li>es2015.proxy</li>
<li>es2015.reflect</li>
<li>es2015.generator</li>
<li>es2015.symbol</li>
<li>es2015.symbol.wellknown</li>
<li>es2016</li>
<li>es2016.array.include</li>
<li>es2017</li>
<li>es2017.object</li>
<li>es2017.sharedmemory</li>
<li>scripthost</li>
</ul>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">tsc --target es5 --lib es5,es2015.promise</code></pre></div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"es5"</span><span class="token punctuation">,</span> <span class="token string">"es2015.promise"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Flag unused declarations with <code class="language-text">--noUnusedParameters</code> and <code class="language-text">--noUnusedLocals</code></h2>
<p>TypeScript 2.0 has two new flags to help you maintain a clean code base.
<code class="language-text">--noUnusedParameters</code> flags any unused function or method parameters errors.
<code class="language-text">--noUnusedLocals</code> flags any unused local (un-exported) declaration like variables, functions, classes, imports, etc…
Also, unused private members of a class would be flagged as errors under <code class="language-text">--noUnusedLocals</code>.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./b"</span><span class="token punctuation">;</span>
<span class="token comment">//     ^ Error: `B` declared but never used</span>
<span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> args<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//                                 ^^^^  Error: 'arg' declared but never used.</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Parameters declaration with names starting with <code class="language-text">_</code> are exempt from the unused parameter checking.
e.g.:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">returnNull</span><span class="token punctuation">(</span><span class="token parameter">_a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// OK</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Module identifiers allow for <code class="language-text">.js</code> extension</h2>
<p>Before TypeScript 2.0, a module identifier was always assumed to be extension-less;
for instance, given an import as <code class="language-text">import d from &quot;./moduleA.js&quot;</code>, the compiler looked up the definition of <code class="language-text">&quot;moduleA.js&quot;</code> in <code class="language-text">./moduleA.js.ts</code> or <code class="language-text">./moduleA.js.d.ts</code>.
This made it hard to use bundling/loading tools like <a href="https://github.com/systemjs/systemjs">SystemJS</a> that expect URI’s in their module identifier.</p>
<p>With TypeScript 2.0, the compiler will look up definition of <code class="language-text">&quot;moduleA.js&quot;</code> in  <code class="language-text">./moduleA.ts</code> or <code class="language-text">./moduleA.d.ts</code>.</p>
<h2>Support ‘target : es5’ with ‘module: es6’</h2>
<p>Previously flagged as an invalid flag combination, <code class="language-text">target: es5</code> and ‘module: es6’ is now supported.
This should facilitate using ES2015-based tree shakers like <a href="https://github.com/rollup/rollup">rollup</a>.</p>
<h2>Trailing commas in function parameter and argument lists</h2>
<p>Trailing comma in function parameter and argument lists are now allowed.
This is an implementation for a <a href="https://jeffmo.github.io/es-trailing-function-commas/">Stage-3 ECMAScript proposal</a> that emits down to valid ES3/ES5/ES6.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>
  bar<span class="token punctuation">:</span> Bar<span class="token punctuation">,</span>
  baz<span class="token punctuation">:</span> Baz<span class="token punctuation">,</span> <span class="token comment">// trailing commas are OK in parameter lists</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Implementation...</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span>
  bar<span class="token punctuation">,</span>
  baz<span class="token punctuation">,</span> <span class="token comment">// and in argument lists</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>New <code class="language-text">--skipLibCheck</code></h2>
<p>TypeScript 2.0 adds a new <code class="language-text">--skipLibCheck</code> compiler option that causes type checking of declaration files (files with extension <code class="language-text">.d.ts</code>) to be skipped.
When a program includes large declaration files, the compiler spends a lot of time type checking declarations that are already known to not contain errors, and compile times may be significantly shortened by skipping declaration file type checks.</p>
<p>Since declarations in one file can affect type checking in other files, some errors may not be detected when <code class="language-text">--skipLibCheck</code> is specified.
For example, if a non-declaration file augments a type declared in a declaration file, errors may result that are only reported when the declaration file is checked.
However, in practice such situations are rare.</p>
<h2>Allow duplicate identifiers across declarations</h2>
<p>This has been one common source of duplicate definition errors.
Multiple declaration files defining the same members on interfaces.</p>
<p>TypeScript 2.0 relaxes this constraint and allows duplicate identifiers across blocks, as long as they have <em>identical</em> types.</p>
<p>Within the same block duplicate definitions are still disallowed.</p>
<h4>Example</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    stack<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">interface</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    code<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    path<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    stack<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// OK</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>New <code class="language-text">--declarationDir</code></h2>
<p><code class="language-text">--declarationDir</code> allows for generating declaration files in a different location than JavaScript files.</p>
<h2>TypeScript 1.8</h2>
<h2>Type parameters as constraints</h2>
<p>With TypeScript 1.8 it becomes possible for a type parameter constraint to reference type parameters from the same type parameter list. Previously this was an error. This capability is usually referred to as <a href="https://en.wikipedia.org/wiki/Bounded_quantification#F-bounded_quantification">F-Bounded Polymorphism</a>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> assign<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>target<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> source<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">assign</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assign</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span> e<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span></code></pre></div>
<h2>Control flow analysis errors</h2>
<p>TypeScript 1.8 introduces control flow analysis to help catch common errors that users tend to run into.
Read on to get more details, and check out these errors in action:</p>
<p><img src="https://cloud.githubusercontent.com/assets/8052307/5210657/c5ae0f28-7585-11e4-97d8-86169ef2a160.gif" alt="cfa"></p>
<h3>Unreachable code</h3>
<p>Statements guaranteed to not be executed at run time are now correctly flagged as unreachable code errors. For instance, statements following unconditional <code class="language-text">return</code>, <code class="language-text">throw</code>, <code class="language-text">break</code> or <code class="language-text">continue</code> statements are considered unreachable. Use <code class="language-text">--allowUnreachableCode</code> to disable unreachable code detection and reporting.</p>
<h5>Example</h5>
<p>Here’s a simple example of an unreachable code error:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Error: Unreachable code detected.</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A more common error that this feature catches is adding a newline after a <code class="language-text">return</code> statement:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>            <span class="token comment">// Automatic Semicolon Insertion triggered at newline</span>
    <span class="token punctuation">{</span>
        x<span class="token punctuation">:</span> <span class="token string">"string"</span>   <span class="token comment">// Error: Unreachable code detected.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since JavaScript automatically terminates the <code class="language-text">return</code> statement at the end of the line, the object literal becomes a block.</p>
<h3>Unused labels</h3>
<p>Unused labels are also flagged. Just like unreachable code checks, these are turned on by default; use <code class="language-text">--allowUnusedLabels</code> to stop reporting these errors.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">loop<span class="token punctuation">:</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Error: Unused label.</span>
    x<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Implicit returns</h3>
<p>Functions with code paths that do not return a value in JS implicitly return <code class="language-text">undefined</code>. These can now be flagged by the compiler as implicit returns. The check is turned <em>off</em> by default; use <code class="language-text">--noImplicitReturns</code> to turn it on.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Error: Not all code paths return a value.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// implicitly returns `undefined`</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Case clause fall-throughs</h3>
<p>TypeScript can reports errors for fall-through cases in switch statement where the case clause is non-empty.
This check is turned <em>off</em> by default, and can be enabled using <code class="language-text">--noFallthroughCasesInSwitch</code>.</p>
<h5>Example</h5>
<p>With <code class="language-text">--noFallthroughCasesInSwitch</code>, this example will trigger an error:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">switch</span> <span class="token punctuation">(</span>x <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment">// Error: Fallthrough case in switch.</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"even"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"odd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>However, in the following example, no error will be reported because the fall-through case is empty:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">switch</span> <span class="token punctuation">(</span>x <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Acceptable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>

    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"This is *two much*!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Stateless Function Components in React</h2>
<p>TypeScript now supports <a href="https://facebook.github.io/react/docs/reusable-components.html#stateless-functions">Stateless Function components</a>.
These are lightweight components that easily compose other components:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Use parameter destructuring and defaults for easy definition of 'props' type</span>
<span class="token keyword">const</span> Greeter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>name <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// Properties get validated</span>
<span class="token keyword">let</span> example <span class="token operator">=</span> <span class="token operator">&lt;</span>Greeter name<span class="token operator">=</span><span class="token string">'TypeScript 1.8'</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>For this feature and simplified props, be sure to be use the <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/react">latest version of react.d.ts</a>.</p>
<h2>Simplified <code class="language-text">props</code> type management in React</h2>
<p>In TypeScript 1.8 with the latest version of react.d.ts (see above), we’ve also greatly simplified the declaration of <code class="language-text">props</code> types.</p>
<p>Specifically:</p>
<ul>
<li>You no longer need to either explicitly declare <code class="language-text">ref</code> and <code class="language-text">key</code> or <code class="language-text">extend React.Props</code></li>
<li>The <code class="language-text">ref</code> and <code class="language-text">key</code> properties will appear with correct types on all components</li>
<li>The <code class="language-text">ref</code> property is correctly disallowed on instances of Stateless Function components</li>
</ul>
<h2>Augmenting global/module scope from modules</h2>
<p>Users can now declare any augmentations that they want to make, or that any other consumers already have made, to an existing module.
Module augmentations look like plain old ambient module declarations (i.e. the <code class="language-text">declare module &quot;foo&quot; { }</code> syntax), and are directly nested either your own modules, or in another top level ambient external module.</p>
<p>Furthermore, TypeScript also has the notion of <em>global</em> augmentations of the form <code class="language-text">declare global { }</code>.
This allows modules to augment global types such as <code class="language-text">Array</code> if necessary.</p>
<p>The name of a module augmentation is resolved using the same set of rules as module specifiers in <code class="language-text">import</code> and <code class="language-text">export</code> declarations.
The declarations in a module augmentation are merged with any existing declarations the same way they would if they were declared in the same file.</p>
<p>Neither module augmentations nor global augmentations can add new items to the top level scope - they can only “patch” existing declarations.</p>
<h5>Example</h5>
<p>Here <code class="language-text">map.ts</code> can declare that it will internally patch the <code class="language-text">Observable</code> type from <code class="language-text">observable.ts</code> and add the <code class="language-text">map</code> method to it.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// observable.ts</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// map.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./observable"</span><span class="token punctuation">;</span>

<span class="token comment">// Create an augmentation for "./observable"</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"./observable"</span> <span class="token punctuation">{</span>

    <span class="token comment">// Augment the 'Observable' class definition with interface merging</span>
    <span class="token keyword">interface</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
        map<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token function-variable function">proj</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token class-name">Observable</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>map <span class="token operator">=</span> <span class="token comment">/*...*/</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// consumer.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./observable"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">"./map"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> o<span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Similarly, the global scope can be augmented from modules using a <code class="language-text">declare global</code> declarations:</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Ensure this is treated as a module.</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token function">mapToNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mapToNumbers</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span></code></pre></div>
<h2>String literal types</h2>
<p>It’s not uncommon for an API to expect a specific set of strings for certain values.
For instance, consider a UI library that can move elements across the screen while controlling the <a href="https://en.wikipedia.org/wiki/Inbetweening">“easing” of the animation.</a></p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">UIElement</span> <span class="token punctuation">{</span>
    <span class="token function">animate</span><span class="token punctuation">(</span>options<span class="token punctuation">:</span> AnimationOptions<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">AnimationOptions</span> <span class="token punctuation">{</span>
    deltaX<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    deltaY<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    easing<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// Can be "ease-in", "ease-out", "ease-in-out"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>However, this is error prone - there is nothing stopping a user from accidentally misspelling one of the valid easing values:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// No errors</span>
<span class="token keyword">new</span> <span class="token class-name">UIElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> deltaX<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> deltaY<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> easing<span class="token punctuation">:</span> <span class="token string">"ease-inout"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>With TypeScript 1.8, we’ve introduced string literal types.
These types are written the same way string literals are, but in type positions.</p>
<p>Users can now ensure that the type system will catch such errors.
Here’s our new <code class="language-text">AnimationOptions</code> using string literal types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">AnimationOptions</span> <span class="token punctuation">{</span>
    deltaX<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    deltaY<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    easing<span class="token punctuation">:</span> <span class="token string">"ease-in"</span> <span class="token operator">|</span> <span class="token string">"ease-out"</span> <span class="token operator">|</span> <span class="token string">"ease-in-out"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Error: Type '"ease-inout"' is not assignable to type '"ease-in" | "ease-out" | "ease-in-out"'</span>
<span class="token keyword">new</span> <span class="token class-name">UIElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> deltaX<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> deltaY<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> easing<span class="token punctuation">:</span> <span class="token string">"ease-inout"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Improved union/intersection type inference</h2>
<p>TypeScript 1.8 improves type inference involving source and target sides that are both union or intersection types.
For example, when inferring from <code class="language-text">string | string[]</code> to <code class="language-text">string | T</code>, we reduce the types to <code class="language-text">string[]</code> and <code class="language-text">T</code>, thus inferring <code class="language-text">string[]</code> for <code class="language-text">T</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Maybe<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> isDefined<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> Maybe<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> x <span class="token keyword">is</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">!==</span> undefined <span class="token operator">&amp;&amp;</span> x <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> isUndefined<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> Maybe<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> x <span class="token keyword">is</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">===</span> undefined <span class="token operator">||</span> x <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> getOrElse<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> Maybe<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> defaultValue<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">isDefined</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> x <span class="token punctuation">:</span> defaultValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Maybe<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x1 <span class="token operator">=</span> <span class="token function">getOrElse</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"Undefined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// string</span>
    <span class="token keyword">let</span> x2 <span class="token operator">=</span> <span class="token function">isDefined</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> x <span class="token punctuation">:</span> <span class="token string">"Undefined"</span><span class="token punctuation">;</span>    <span class="token comment">// string</span>
    <span class="token keyword">let</span> x3 <span class="token operator">=</span> <span class="token function">isUndefined</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"Undefined"</span> <span class="token punctuation">:</span> x<span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> Maybe<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x1 <span class="token operator">=</span> <span class="token function">getOrElse</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// number</span>
    <span class="token keyword">let</span> x2 <span class="token operator">=</span> <span class="token function">isDefined</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> x <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// number</span>
    <span class="token keyword">let</span> x3 <span class="token operator">=</span> <span class="token function">isUndefined</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">:</span> x<span class="token punctuation">;</span>  <span class="token comment">// number</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Concatenate <code class="language-text">AMD</code> and <code class="language-text">System</code> modules with <code class="language-text">--outFile</code></h2>
<p>Specifying <code class="language-text">--outFile</code> in conjunction with <code class="language-text">--module amd</code> or <code class="language-text">--module system</code> will concatenate all modules in the compilation into a single output file containing multiple module closures.</p>
<p>A module name will be computed for each module based on its relative location to <code class="language-text">rootDir</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// file src/a.ts</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">"./lib/b"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token constant">B</span><span class="token punctuation">.</span><span class="token function">createB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// file src/lib/b.ts</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Results in:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"lib/b"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"require"</span><span class="token punctuation">,</span> <span class="token string">"exports"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">"use strict"</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">createB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    exports<span class="token punctuation">.</span>createB <span class="token operator">=</span> createB<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"require"</span><span class="token punctuation">,</span> <span class="token string">"exports"</span><span class="token punctuation">,</span> <span class="token string">"lib/b"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> <span class="token constant">B</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">"use strict"</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">createA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">B</span><span class="token punctuation">.</span><span class="token function">createB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    exports<span class="token punctuation">.</span>createA <span class="token operator">=</span> createA<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Support for <code class="language-text">default</code> import interop with SystemJS</h2>
<p>Module loaders like SystemJS wrap CommonJS modules and expose then as a <code class="language-text">default</code> ES6 import. This makes it impossible to share the definition files between the SystemJS and CommonJS implementation of the module as the module shape looks different based on the loader.</p>
<p>Setting the new compiler flag <code class="language-text">--allowSyntheticDefaultImports</code> indicates that the module loader performs some kind of synthetic default import member creation not indicated in the imported .ts or .d.ts. The compiler will infer the existence of a <code class="language-text">default</code> export that has the shape of the entire module itself.</p>
<p>System modules have this flag on by default.</p>
<h2>Allow captured <code class="language-text">let</code>/<code class="language-text">const</code> in loops</h2>
<p>Previously an error, now supported in TypeScript 1.8.
<code class="language-text">let</code>/<code class="language-text">const</code> declarations within loops and captured in functions are now emitted to correctly match <code class="language-text">let</code>/<code class="language-text">const</code> freshness semantics.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=></span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>is compiled to:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">_loop_1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_loop_1</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>And results in</p>
<div class="gatsby-highlight" data-language="cmd"><pre class="language-cmd"><code class="language-cmd">0
1
2
3
4</code></pre></div>
<h2>Improved checking for <code class="language-text">for..in</code> statements</h2>
<p>Previously the type of a <code class="language-text">for..in</code> variable is inferred to <code class="language-text">any</code>; that allowed the compiler to ignore invalid uses within the <code class="language-text">for..in</code> body.</p>
<p>Starting with TypeScript 1.8,:</p>
<ul>
<li>The type of a variable declared in a <code class="language-text">for..in</code> statement is implicitly <code class="language-text">string</code>.</li>
<li>When an object with a numeric index signature of type <code class="language-text">T</code> (such as an array) is indexed by a <code class="language-text">for..in</code> variable of a containing <code class="language-text">for..in</code> statement for an object <em>with</em> a numeric index signature and <em>without</em> a string index signature (again such as an array), the value produced is of type <code class="language-text">T</code>.</li>
</ul>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> a<span class="token punctuation">:</span> MyObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// Type of x is implicitly string</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Type of obj is MyObject</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Modules are now emitted with a <code class="language-text">&quot;use strict&quot;;</code> prologue</h2>
<p>Modules were always parsed in strict mode as per ES6, but for non-ES6 targets this was not respected in the generated code. Starting with TypeScript 1.8, emitted modules are always in strict mode. This shouldn’t have any visible changes in most code as TS considers most strict mode errors as errors at compile time, but it means that some things which used to silently fail at runtime in your TS code, like assigning to <code class="language-text">NaN</code>, will now loudly fail. You can reference the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">MDN Article</a> on strict mode for a detailed list of the differences between strict mode and non-strict mode.</p>
<h2>Including <code class="language-text">.js</code> files with <code class="language-text">--allowJs</code></h2>
<p>Often there are external source files in your project that may not be authored in TypeScript.
Alternatively, you might be in the middle of converting a JS code base into TS, but still want to bundle all your JS code into a single file with the output of your new TS code.</p>
<p><code class="language-text">.js</code> files are now allowed as input to <code class="language-text">tsc</code>.
The TypeScript compiler checks the input <code class="language-text">.js</code> files for syntax errors, and emits valid output based on the <code class="language-text">--target</code> and <code class="language-text">--module</code> flags.
The output can be combined with other <code class="language-text">.ts</code> files as well.
Source maps are still generated for <code class="language-text">.js</code> files just like with <code class="language-text">.ts</code> files.</p>
<h2>Custom JSX factories using <code class="language-text">--reactNamespace</code></h2>
<p>Passing <code class="language-text">--reactNamespace &lt;JSX factory Name&gt;</code> along with <code class="language-text">--jsx react</code> allows for using a different JSX factory from the default <code class="language-text">React</code>.</p>
<p>The new factory name will be used to call <code class="language-text">createElement</code> and <code class="language-text">__spread</code> functions.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>jsxFactory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"jsxFactory"</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> div <span class="token operator">=</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello <span class="token constant">JSX</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre></div>
<p>Compiled with:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">tsc --jsx react --reactNamespace jsxFactory --m commonJS</code></pre></div>
<p>Results in:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> jsxFactory_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"jsxFactory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> div <span class="token operator">=</span> jsxFactory_1<span class="token punctuation">.</span>jsxFactory<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"Hello JSX!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2><code class="language-text">this</code>-based type guards</h2>
<p>TypeScript 1.8 extends <a href="#user-defined-type-guard-functions">user-defined type guard functions</a> to class and interface methods.</p>
<p><code class="language-text">this is T</code> is now valid return type annotation for methods in classes and interfaces.
When used in a type narrowing position (e.g. <code class="language-text">if</code> statement), the type of the call expression target object would be narrowed to <code class="language-text">T</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">FileSystemObject</span> <span class="token punctuation">{</span>
    <span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> File <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">File</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> Directory <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Directory</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token function">isNetworked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token parameter">Networked <span class="token operator">&amp;</span> <span class="token keyword">this</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>networked<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> path<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token keyword">private</span> networked<span class="token punctuation">:</span> <span class="token builtin">boolean</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">File</span> <span class="token keyword">extends</span> <span class="token class-name">FileSystemObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token keyword">public</span> content<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Directory</span> <span class="token keyword">extends</span> <span class="token class-name">FileSystemObject</span> <span class="token punctuation">{</span>
    children<span class="token punctuation">:</span> FileSystemObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Networked</span> <span class="token punctuation">{</span>
    host<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fso<span class="token punctuation">:</span> FileSystemObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"foo/bar.txt"</span><span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>fso<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fso<span class="token punctuation">.</span>content<span class="token punctuation">;</span> <span class="token comment">// fso is File</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fso<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fso<span class="token punctuation">.</span>children<span class="token punctuation">;</span> <span class="token comment">// fso is Directory</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fso<span class="token punctuation">.</span><span class="token function">isNetworked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fso<span class="token punctuation">.</span>host<span class="token punctuation">;</span> <span class="token comment">// fso is networked</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Official TypeScript NuGet package</h2>
<p>Starting with TypeScript 1.8, official NuGet packages are available for the Typescript Compiler (<code class="language-text">tsc.exe</code>) as well as the MSBuild integration (<code class="language-text">Microsoft.TypeScript.targets</code> and <code class="language-text">Microsoft.TypeScript.Tasks.dll</code>).</p>
<p>Stable packages are available here:</p>
<ul>
<li><a href="https://www.nuget.org/packages/Microsoft.TypeScript.Compiler/">Microsoft.TypeScript.Compiler</a></li>
<li><a href="https://www.nuget.org/packages/Microsoft.TypeScript.MSBuild/">Microsoft.TypeScript.MSBuild</a></li>
</ul>
<p>Also, a nightly NuGet package to match the <a href="http://blogs.msdn.com/b/typescript/archive/2015/07/27/introducing-typescript-nightlies.aspx">nightly npm package</a> is available on <a href="https://myget.org">https://myget.org</a>:</p>
<ul>
<li><a href="https://www.myget.org/gallery/typescript-preview">TypeScript-Preview</a></li>
</ul>
<h2>Prettier error messages from <code class="language-text">tsc</code></h2>
<p>We understand that a ton of monochrome output can be a little difficult on the eyes.
Colors can help discern where a message starts and ends, and these visual clues are important when error output gets overwhelming.</p>
<p>By just passing the <code class="language-text">--pretty</code> command line option, TypeScript gives more colorful output with context about where things are going wrong.</p>
<p><img src="https://raw.githubusercontent.com/wiki/Microsoft/TypeScript/images/new-in-typescript/pretty01.png" alt="Showing off pretty error messages in ConEmu"></p>
<h2>Colorization of JSX code in VS 2015</h2>
<p>With TypeScript 1.8, JSX tags are now classified and colorized in Visual Studio 2015.</p>
<p><img src="https://cloud.githubusercontent.com/assets/8052307/12271404/b875c502-b90f-11e5-93d8-c6740be354d1.png" alt="jsx"></p>
<p>The classification can be further customized by changing the font and color settings for the <code class="language-text">VB XML</code> color and font settings through <code class="language-text">Tools</code>-><code class="language-text">Options</code>-><code class="language-text">Environment</code>-><code class="language-text">Fonts and Colors</code> page.</p>
<h2>The <code class="language-text">--project</code> (<code class="language-text">-p</code>) flag can now take any file path</h2>
<p>The <code class="language-text">--project</code> command line option originally could only take paths to a folder containing a <code class="language-text">tsconfig.json</code>.
Given the different scenarios for build configurations, it made sense to allow <code class="language-text">--project</code> to point to any other compatible JSON file.
For instance, a user might want to target ES2015 with CommonJS modules for Node 5, but ES5 with AMD modules for the browser.
With this new work, users can easily manage two separate build targets using <code class="language-text">tsc</code> alone without having to perform hacky workarounds like placing <code class="language-text">tsconfig.json</code> files in separate directories.</p>
<p>The old behavior still remains the same if given a directory - the compiler will try to find a file in the directory named <code class="language-text">tsconfig.json</code>.</p>
<h2>Allow comments in tsconfig.json</h2>
<p>It’s always nice to be able to document your configuration!
<code class="language-text">tsconfig.json</code> now accepts single and multi-line comments.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token punctuation">{</span>
    <span class="token string">"compilerOptions"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"target"</span><span class="token punctuation">:</span> <span class="token string">"ES2015"</span><span class="token punctuation">,</span> <span class="token comment">// running on node v5, yaay!</span>
        <span class="token string">"sourceMap"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>   <span class="token comment">// makes debugging easier</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/*
     * Excluded files
      */</span>
    <span class="token string">"exclude"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"file.d.ts"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Support output to IPC-driven files</h2>
<p>TypeScript 1.8 allows users to use the <code class="language-text">--outFile</code> argument with special file system entities like named pipes, devices, etc.</p>
<p>As an example, on many Unix-like systems, the standard output stream is accessible by the file <code class="language-text">/dev/stdout</code>.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">tsc foo.ts --outFile /dev/stdout</code></pre></div>
<p>This can be used to pipe output between commands as well.</p>
<p>As an example, we can pipe our emitted JavaScript into a pretty printer like <a href="https://www.npmjs.com/package/pretty-js">pretty-js</a>:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">tsc foo.ts --outFile /dev/stdout <span class="token operator">|</span> pretty-js</code></pre></div>
<h2>Improved support for <code class="language-text">tsconfig.json</code> in Visual Studio 2015</h2>
<p>TypeScript 1.8 allows <code class="language-text">tsconfig.json</code> files in all project types.
This includes ASP.NET v4 projects, <em>Console Application</em>, and the <em>Html Application with TypeScript</em> project types.
Further, you are no longer limited to a single <code class="language-text">tsconfig.json</code> file but can add multiple, and each will be built as part of the project.
This allows you to separate the configuration for different parts of your application without having to use multiple different projects.</p>
<p><img src="https://raw.githubusercontent.com/wiki/Microsoft/TypeScript/images/new-in-typescript/tsconfig-in-vs.png" alt="Showing off tsconfig.json in Visual Studio"></p>
<p>We also disable the project properties page when you add a <code class="language-text">tsconfig.json</code> file.
This means that all configuration changes have to be made in the <code class="language-text">tsconfig.json</code> file itself.</p>
<h3>A couple of limitations:</h3>
<ul>
<li>If you add a <code class="language-text">tsconfig.json</code> file, TypeScript files that are not considered part of that context are not compiled.</li>
<li>Apache Cordova Apps still have the existing limitation of a single <code class="language-text">tsconfig.json</code> file, which must be in either the root or the <code class="language-text">scripts</code> folder.</li>
<li>There is no template for <code class="language-text">tsconfig.json</code> in most project types.</li>
</ul>
<h2>TypeScript 1.7</h2>
<h2><code class="language-text">async</code>/<code class="language-text">await</code> support in ES6 targets (Node v4+)</h2>
<p>TypeScript now supports asynchronous functions for engines that have native support for ES6 generators, e.g. Node v4 and above.
Asynchronous functions are prefixed with the <code class="language-text">async</code> keyword; <code class="language-text">await</code> suspends the execution until an asynchronous function return promise is fulfilled and unwraps the value from the <code class="language-text">Promise</code> returned.</p>
<h5>Example</h5>
<p>In the following example, each input element will be printed out one at a time with a 200ms delay:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token string">"use strict"</span><span class="token punctuation">;</span>

<span class="token comment">// printDelayed is a 'Promise&lt;void>'</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">printDelayed</span><span class="token punctuation">(</span><span class="token parameter">elements<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> element <span class="token keyword">of</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">milliseconds<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> milliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">printDelayed</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token string">"beautiful"</span><span class="token punctuation">,</span> <span class="token string">"asynchronous"</span><span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Printed every element!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>For more information see <a href="http://blogs.msdn.com/b/typescript/archive/2015/11/03/what-about-async-await.aspx">Async Functions</a> blog post.</p>
<h2>Support for <code class="language-text">--target ES6</code> with <code class="language-text">--module</code></h2>
<p>TypeScript 1.7 adds <code class="language-text">ES6</code> to the list of options available for the <code class="language-text">--module</code> flag and allows you to specify the module output when targeting <code class="language-text">ES6</code>. This provides more flexibility to target exactly the features you want in specific runtimes.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"amd"</span><span class="token punctuation">,</span>
        <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es6"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">this</code>-typing</h2>
<p>It is a common pattern to return the current object (i.e. <code class="language-text">this</code>) from a method to create <a href="https://en.wikipedia.org/wiki/Fluent_interface">fluent-style APIs</a>.
For instance, consider the following <code class="language-text">BasicCalculator</code> module:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">BasicCalculator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">protected</span> value<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">operand<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> operand<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token parameter">operand<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">-=</span> operand<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">operand<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">*=</span> operand<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token parameter">operand<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">/=</span> operand<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A user could express <code class="language-text">2 * 5 + 1</code> as</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> calc <span class="token keyword">from</span> <span class="token string">"./BasicCalculator"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">calc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This often opens up very elegant ways of writing code; however, there was a problem for classes that wanted to extend from <code class="language-text">BasicCalculator</code>.
Imagine a user wanted to start writing a <code class="language-text">ScientificCalculator</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> BasicCalculator <span class="token keyword">from</span> <span class="token string">"./BasicCalculator"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ScientificCalculator</span> <span class="token keyword">extends</span> <span class="token class-name">BasicCalculator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">value <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Because TypeScript used to infer the type <code class="language-text">BasicCalculator</code> for each method in <code class="language-text">BasicCalculator</code> that returned <code class="language-text">this</code>, the type system would forget that it had <code class="language-text">ScientificCalculator</code> whenever using a <code class="language-text">BasicCalculator</code> method.</p>
<p>For instance:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> calc <span class="token keyword">from</span> <span class="token string">"./ScientificCalculator"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">calc</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// Error: 'BasicCalculator' has no 'sin' method.</span>
    <span class="token punctuation">.</span><span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This is no longer the case - TypeScript now infers <code class="language-text">this</code> to have a special type called <code class="language-text">this</code> whenever inside an instance method of a class.
The <code class="language-text">this</code> type is written as so, and basically means “the type of the left side of the dot in a method call”.</p>
<p>The <code class="language-text">this</code> type is also useful with intersection types in describing libraries (e.g. Ember.js) that use mixin-style patterns to describe inheritance:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">MyType</span> <span class="token punctuation">{</span>
    extend<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>other<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token operator">&amp;</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>ES7 exponentiation operator</h2>
<p>TypeScript 1.7 supports upcoming <a href="https://github.com/rwaldron/exponentiation-operator">ES7/ES2016 exponentiation operators</a>: <code class="language-text">**</code> and <code class="language-text">**=</code>. The operators will be transformed in the output to ES3/ES5 using <code class="language-text">Math.pow</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
y <span class="token operator">**=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> z <span class="token operator">=</span>  <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Will generate the following JavaScript output:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Improved checking for destructuring object literal</h2>
<p>TypeScript 1.7 makes checking of destructuring patterns with an object literal or array literal initializers less rigid and more intuitive.</p>
<p>When an object literal is contextually typed by the implied type of an object binding pattern:</p>
<ul>
<li>Properties with default values in the object binding pattern become optional in the object literal.</li>
<li>Properties in the object binding pattern that have no match in the object literal are required to have a default value in the object binding pattern and are automatically added to the object literal type.</li>
<li>Properties in the object literal that have no match in the object binding pattern are an error.</li>
</ul>
<p>When an array literal is contextually typed by the implied type of an array binding pattern:</p>
<ul>
<li>Elements in the array binding pattern that have no match in the array literal are required to have a default value in the array binding pattern and are automatically added to the array literal type.</li>
</ul>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Type of f1 is (arg?: { x?: number, y?: number }) => void</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// And can be called as:</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">{</span> y<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Type of f2 is (arg?: (x: number, y?: number) => void</span>
<span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Error, x not optional</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">{</span> y<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error, x not optional</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Support for decorators when targeting ES3</h2>
<p>Decorators are now allowed when targeting ES3. TypeScript 1.7 removes the ES5-specific use of <code class="language-text">reduceRight</code> from the <code class="language-text">__decorate</code> helper. The changes also inline calls to <code class="language-text">Object.getOwnPropertyDescriptor</code> and <code class="language-text">Object.defineProperty</code> in a backwards-compatible fashion that allows for clean up of the emit for ES5 and later by removing various repetitive calls to the aforementioned <code class="language-text">Object</code> methods.</p>
<h2>TypeScript 1.6</h2>
<h2>JSX support</h2>
<p>JSX is an embeddable XML-like syntax. It is meant to be transformed into valid JavaScript, but the semantics of that transformation are implementation-specific. JSX came to popularity with the React library but has since seen other applications. TypeScript 1.6 supports embedding, type checking, and optionally compiling JSX directly into JavaScript.</p>
<h4>New <code class="language-text">.tsx</code> file extension and <code class="language-text">as</code> operator</h4>
<p>TypeScript 1.6 introduces a new <code class="language-text">.tsx</code> file extension.  This extension does two things: it enables JSX inside of TypeScript files, and it makes the new <code class="language-text">as</code> operator the default way to cast (removing any ambiguity between JSX expressions and the TypeScript prefix cast operator). For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span> foo<span class="token punctuation">;</span>
<span class="token comment">// is equivalent to:</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> foo <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">;</span></code></pre></div>
<h4>Using React</h4>
<p>To use JSX-support with React you should use the <a href="https://github.com/borisyankov/DefinitelyTyped/tree/master/react">React typings</a>. These typings define the <code class="language-text">JSX</code> namespace so that TypeScript can correctly check JSX expressions for React. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">/// &lt;reference path="react.d.ts" /></span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>Props<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>foo<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>MyComponent name<span class="token operator">=</span><span class="token string">"bar"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token operator">&lt;</span>MyComponent name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// error, `name` is not a number</span></code></pre></div>
<h4>Using other JSX frameworks</h4>
<p>JSX element names and properties are validated against the <code class="language-text">JSX</code> namespace. Please see the [[JSX]] wiki page for defining the <code class="language-text">JSX</code> namespace for your framework.</p>
<h4>Output generation</h4>
<p>TypeScript ships with two JSX modes: <code class="language-text">preserve</code> and <code class="language-text">react</code>.</p>
<ul>
<li>The <code class="language-text">preserve</code> mode will keep JSX expressions as part of the output to be further consumed by another transform step. <em>Additionally the output will have a <code class="language-text">.jsx</code> file extension.</em></li>
<li>The <code class="language-text">react</code> mode will emit <code class="language-text">React.createElement</code>, does not need to go through a JSX transformation before use, and the output will have a <code class="language-text">.js</code> file extension.</li>
</ul>
<p>See the [[JSX]] wiki page for more information on using JSX in TypeScript.</p>
<h2>Intersection types</h2>
<p>TypeScript 1.6 introduces intersection types, the logical complement of union types. A union type <code class="language-text">A | B</code> represents an entity that is either of type <code class="language-text">A</code> or type <code class="language-text">B</code>, whereas an intersection type <code class="language-text">A &amp; B</code> represents an entity that is both of type <code class="language-text">A</code> <em>and</em> type <code class="language-text">B</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> extend<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> first<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token string">"hello"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> x<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
<span class="token keyword">var</span> n <span class="token operator">=</span> x<span class="token punctuation">.</span>b<span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> LinkedList<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> next<span class="token punctuation">:</span> LinkedList<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> people<span class="token punctuation">:</span> LinkedList<span class="token operator">&lt;</span>Person<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> people<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> people<span class="token punctuation">.</span>next<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> people<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> people<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">.</span>next<span class="token punctuation">.</span>name<span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">B</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">C</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>

<span class="token keyword">var</span> abc<span class="token punctuation">:</span> <span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">B</span> <span class="token operator">&amp;</span> <span class="token constant">C</span><span class="token punctuation">;</span>
abc<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
abc<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
abc<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></code></pre></div>
<p>See <a href="https://github.com/Microsoft/TypeScript/issues/1256">issue #1256</a> for more information.</p>
<h2>Local type declarations</h2>
<p>Local class, interface, enum, and type alias declarations can now appear inside function declarations. Local types are block scoped, similar to variables declared with <code class="language-text">let</code> and <code class="language-text">const</code>. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">interface</span> <span class="token class-name">T</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>
        <span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
        v<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">interface</span> <span class="token class-name">T</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
        <span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
        v<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The inferred return type of a function may be a type declared locally within the function. It is not possible for callers of the function to reference such a local type, but it can of course be matched structurally. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getPointFactory</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">P</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> PointZero <span class="token operator">=</span> <span class="token function">getPointFactory</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> PointOne <span class="token operator">=</span> <span class="token function">getPointFactory</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Local types may reference enclosing type parameters and local class and interfaces may themselves be generic. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> f<span class="token operator">&lt;</span><span class="token constant">X</span><span class="token punctuation">,</span> <span class="token constant">Y</span><span class="token operator">></span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token constant">X</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token constant">Y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> x <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">public</span> y <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> v<span class="token punctuation">.</span>x<span class="token punctuation">;</span>  <span class="token comment">// number</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> v<span class="token punctuation">.</span>y<span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Class expressions</h2>
<p>TypeScript 1.6 adds support for ES6 class expressions. In a class expression, the class name is optional and, if specified, is only in scope in the class expression itself. This is similar to the optional name of a function expression. It is not possible to refer to the class instance type of a class expression outside the class expression, but the type can of course be matched structurally. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> Point <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">public</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// p has anonymous class type</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Extending expressions</h2>
<p>TypeScript 1.6 adds support for classes extending arbitrary expression that computes a constructor function. This means that built-in types can now be extended in class declarations.</p>
<p>The <code class="language-text">extends</code> clause of a class previously required a type reference to be specified. It now accepts an expression optionally followed by a type argument list. The type of the expression must be a constructor function type with at least one construct signature that has the same number of type parameters as the number of type arguments specified in the <code class="language-text">extends</code> clause. The return type of the matching construct signature(s) is the base type from which the class instance type inherits. Effectively, this allows both real classes and “class-like” expressions to be specified in the <code class="language-text">extends</code> clause.</p>
<p>Some examples:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Extend built-in types</span>

<span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// Extend computed base class</span>

<span class="token keyword">class</span> <span class="token class-name">ThingA</span> <span class="token punctuation">{</span>
    <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">"Hello from A"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ThingB</span> <span class="token punctuation">{</span>
    <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">"Hello from B"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">GreeterConstructor</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Greeter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getGreeterBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> GreeterConstructor <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0.5</span> <span class="token operator">?</span> ThingA <span class="token punctuation">:</span> ThingB<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">extends</span> <span class="token class-name">getGreeterBase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">abstract</code> classes and methods</h2>
<p>TypeScript 1.6 adds support for <code class="language-text">abstract</code> keyword for classes and their methods. An abstract class is allowed to have methods with no implementation, and cannot be constructed.</p>
<h5>Examples</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token function">getThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">getOtherThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'hello'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, 'Base' is abstract</span>

<span class="token comment">// Error, must either be 'abstract' or implement concrete 'getThing'</span>
<span class="token keyword">class</span> <span class="token class-name">Derived1</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Derived2</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">getThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'hello'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: cannot invoke abstract members through 'super'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token keyword">var</span> y<span class="token punctuation">:</span> Base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Also OK</span>
y<span class="token punctuation">.</span><span class="token function">getThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
y<span class="token punctuation">.</span><span class="token function">getOtherThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span></code></pre></div>
<h2>Generic type aliases</h2>
<p>With TypeScript 1.6, type aliases can be generic. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Lazy<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> s<span class="token punctuation">:</span> Lazy<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>
s <span class="token operator">=</span> <span class="token string">"eager"</span><span class="token punctuation">;</span>
<span class="token function-variable function">s</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">"lazy"</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Tuple</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">></span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">;</span>
    b<span class="token punctuation">:</span> <span class="token constant">B</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Pair<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> Tuple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<h2>Stricter object literal assignment checks</h2>
<p>TypeScript 1.6 enforces stricter object literal assignment checks for the purpose of catching excess or misspelled properties. Specifically, when a fresh object literal is assigned to a variable or passed as an argument for a non-empty target type, it is an error for the object literal to specify properties that don’t exist in the target type.</p>
<h5>Examples</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Error, excess property `baz`</span>

<span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> bar<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Error, excess or misspelled property `baz`</span></code></pre></div>
<p>A type can include an index signature to explicitly indicate that excess properties are permitted:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// Ok, `baz` matched by index signature</span></code></pre></div>
<h2>ES6 generators</h2>
<p>TypeScript 1.6 adds support for generators when targeting ES6.</p>
<p>A generator function can have a return type annotation, just like a function. The annotation represents the type of the generator returned by the function. Here is an example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Iterable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">// string is assignable to string</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">yield</span> <span class="token operator">*</span> <span class="token function">otherStringGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// otherStringGenerator must be iterable and element type assignable to string</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A generator function with no type annotation can have the type annotation inferred. So in the following case, the type will be inferred from the yield statements:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">// infer string</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">yield</span> <span class="token operator">*</span> <span class="token function">otherStringGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// infer element type of otherStringGenerator</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Experimental support for <code class="language-text">async</code> functions</h2>
<p>TypeScript 1.6 introduces experimental support of <code class="language-text">async</code> functions when targeting ES6. Async functions are expected to invoke an asynchronous operation and await its result without blocking normal execution of the program. This accomplished through the use of an ES6-compatible <code class="language-text">Promise</code> implementation, and transposition of the function body into a compatible form to resume execution when the awaited asynchronous operation completes.</p>
<p>An <em>async function</em> is a function or method that has been prefixed with the <code class="language-text">async</code> modifier. This modifier informs the compiler that function body transposition is required, and that the keyword <code class="language-text">await</code> should be treated as a unary expression instead of an identifier. An <em>Async Function</em> must provide a return type annotation that points to a compatible <code class="language-text">Promise</code> type. Return type inference can only be used if there is a globally defined, compatible <code class="language-text">Promise</code> type.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> p<span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span> <span class="token comment">// suspend execution until 'p' is settled. 'i' has type "number"</span>
  <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=></span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span> <span class="token comment">// suspends execution.</span>
<span class="token keyword">var</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span> <span class="token comment">// suspends execution. return type is inferred as "Promise&lt;number>" when compiling with --target ES6</span>
<span class="token keyword">var</span> <span class="token function-variable function">fe</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span> <span class="token comment">// suspend execution until 'p' is settled. 'i' has type "number"</span>
  <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span> <span class="token comment">// suspend execution until 'p' is settled. 'i' has type "number"</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token keyword">get</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span> <span class="token comment">// suspend execution until 'p' is settled. 'i' has type "number"</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Nightly builds</h2>
<p>While not strictly a language change, nightly builds are now available by installing with the following command:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> -g typescript@next</code></pre></div>
<h2>Adjustments in module resolution logic</h2>
<p>Starting from release 1.6 TypeScript compiler will use different set of rules to resolve module names when targeting ‘commonjs’. These <a href="https://github.com/Microsoft/TypeScript/issues/2338">rules</a> attempted to model module lookup procedure used by Node. This effectively mean that node modules can include information about its typings and TypeScript compiler will be able to find it. User however can override module resolution rules picked by the compiler by using <code class="language-text">--moduleResolution</code> command line option. Possible values are:</p>
<ul>
<li>‘classic’ - module resolution rules used by pre 1.6 TypeScript compiler</li>
<li>‘node’ - node-like module resolution</li>
</ul>
<h2>Merging ambient class and interface declaration</h2>
<p>The instance side of an ambient class declaration can be extended using an interface declaration The class constructor object is unmodified. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> x <span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    y <span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">foo <span class="token punctuation">:</span> Foo</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    foo<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// OK, declared in the class Foo</span>
    foo<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span> <span class="token comment">// OK, declared in the interface Foo</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>User-defined type guard functions</h2>
<p>TypeScript 1.6 adds a new way to narrow a variable type inside an <code class="language-text">if</code> block, in addition to <code class="language-text">typeof</code> and <code class="language-text">instanceof</code>. A user-defined type guard functions is one with a return type annotation of the form <code class="language-text">x is T</code>, where <code class="language-text">x</code> is a declared parameter in the signature, and <code class="language-text">T</code> is any type. When a user-defined type guard function is invoked on a variable in an <code class="language-text">if</code> block, the type of the variable will be narrowed to <code class="language-text">T</code>.</p>
<h5>Examples</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">isCat</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> a <span class="token keyword">is</span> Cat <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'kitty'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> x<span class="token punctuation">:</span> Cat <span class="token operator">|</span> Dog<span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isCat</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">.</span><span class="token function">meow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK, x is Cat in this block</span>
<span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">exclude</code> property support in tsconfig.json</h2>
<p>A tsconfig.json file that doesn’t specify a files property (and therefore implicitly references all *.ts files in all subdirectories) can now contain an exclude property that specifies a list of files and/or directories to exclude from the compilation. The exclude property must be an array of strings that each specify a file or folder name relative to the location of the tsconfig.json file. For example:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"out"</span><span class="token operator">:</span> <span class="token string">"test.js"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
        <span class="token string">"test.ts"</span><span class="token punctuation">,</span>
        <span class="token string">"utils/t2.ts"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">exclude</code> list does not support wilcards. It must simply be a list of files and/or directories.</p>
<h2><code class="language-text">--init</code> command line option</h2>
<p>Run <code class="language-text">tsc --init</code> in a directory to create an initial <code class="language-text">tsconfig.json</code> in this directory with preset defaults. Optionally pass command line arguments along with <code class="language-text">--init</code> to be stored in your initial tsconfig.json on creation.</p>
<h2>TypeScript 1.5</h2>
<h2>ES6 Modules</h2>
<p>TypeScript 1.5 supports ECMAScript 6 (ES6) modules. ES6 modules are effectively TypeScript external modules with a new syntax: ES6 modules are separately loaded source files that possibly import other modules and provide a number of externally accessible exports. ES6 modules feature several new export and import declarations. It is recommended that TypeScript libraries and applications be updated to use the new syntax, but this is not a requirement. The new ES6 module syntax coexists with TypeScript’s original internal and external module constructs and the constructs can be mixed and matched at will.</p>
<h4>Export Declarations</h4>
<p>In addition to the existing TypeScript support for decorating declarations with <code class="language-text">export</code>, module members can also be exported using separate export declarations, optionally specifying different names for exports using <code class="language-text">as</code> clauses.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Stream</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">writeToStream</span><span class="token punctuation">(</span><span class="token parameter">stream<span class="token punctuation">:</span> Stream<span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> Stream<span class="token punctuation">,</span> writeToStream <span class="token keyword">as</span> write <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// writeToStream exported as write</span></code></pre></div>
<p>Import declarations, as well, can optionally use <code class="language-text">as</code> clauses to specify different local names for the imports. For example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> read<span class="token punctuation">,</span> write<span class="token punctuation">,</span> standardOutput <span class="token keyword">as</span> stdout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./inout"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">write</span><span class="token punctuation">(</span>stdout<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>As an alternative to individual imports, a namespace import can be used to import an entire module:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> io <span class="token keyword">from</span> <span class="token string">"./inout"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>io<span class="token punctuation">.</span>standardOutput<span class="token punctuation">)</span><span class="token punctuation">;</span>
io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>io<span class="token punctuation">.</span>standardOutput<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h4>Re-exporting</h4>
<p>Using <code class="language-text">from</code> clause a module can copy the exports of a given module to the current module without introducing local names.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token punctuation">{</span> read<span class="token punctuation">,</span> write<span class="token punctuation">,</span> standardOutput <span class="token keyword">as</span> stdout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./inout"</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">export *</code> can be used to re-export all exports of another module. This is useful for creating modules that aggregate the exports of several other modules.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./mod1"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./mod2"</span><span class="token punctuation">;</span></code></pre></div>
<h4>Default Export</h4>
<p>An export default declaration specifies an expression that becomes the default export of a module:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Greetings!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Which in turn can be imported using default imports:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> Greeter <span class="token keyword">from</span> <span class="token string">"./greeter"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h4>Bare Import</h4>
<p>A “bare import” can be used to import a module only for its side-effects.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token string">"./polyfills"</span><span class="token punctuation">;</span></code></pre></div>
<p>For more information about module, please see the <a href="https://github.com/Microsoft/TypeScript/issues/2242">ES6 module support spec</a>.</p>
<h2>Destructuring in declarations and assignments</h2>
<p>TypeScript 1.5 adds support to ES6 destructuring declarations and assignments.</p>
<h4>Declarations</h4>
<p>A destructuring declaration introduces one or more named variables and initializes them with values extracted from properties of an object or elements of an array.</p>
<p>For example, the following sample declares variables <code class="language-text">x</code>, <code class="language-text">y</code>, and <code class="language-text">z</code>, and initializes them to <code class="language-text">getSomeObject().x</code>, <code class="language-text">getSomeObject().y</code> and <code class="language-text">getSomeObject().z</code> respectively:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getSomeObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Destructuring declarations also works for extracting values from arrays:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getSomeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Similarly, destructuring  can be used in function parameter declarations:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">drawText</span><span class="token punctuation">(</span><span class="token punctuation">{</span> text <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> location<span class="token punctuation">:</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bold <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Draw text</span>
<span class="token punctuation">}</span>

<span class="token comment">// Call drawText with an object literal</span>
<span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"someText"</span><span class="token punctuation">,</span> location<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token string">"italics"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">drawText</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h4>Assignments</h4>
<p>Destructuring patterns can also be used in regular assignment expressions. For instance, swapping two variables can be written as a single destructuring assignment:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<h2><code class="language-text">namespace</code> keyword</h2>
<p>TypeScript used the <code class="language-text">module</code> keyword to define both “internal modules” and “external modules”; this has been a bit of confusion for developers new to TypeScript. “Internal modules” are closer to what most people would call a namespace; likewise, “external modules” in JS speak really just are modules now.</p>
<blockquote>
<p>Note: Previous syntax defining internal modules are still supported.</p>
</blockquote>
<p><strong>Before</strong>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">module</span> Math <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>After</strong>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">namespace</span> Math <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2><code class="language-text">let</code> and <code class="language-text">const</code> support</h2>
<p>ES6 <code class="language-text">let</code> and <code class="language-text">const</code> declarations are now supported when targeting ES3 and ES5.</p>
<h4>Const</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token constant">MAX</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token operator">++</span><span class="token constant">MAX</span><span class="token punctuation">;</span> <span class="token comment">// Error: The operand of an increment or decrement</span>
       <span class="token comment">//        operator cannot be a constant.</span></code></pre></div>
<h4>Block scoped</h4>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token comment">// use a</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">"string"</span><span class="token punctuation">;</span>
  <span class="token comment">// use a</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: a is not defined in this scope</span></code></pre></div>
<h2>for..of support</h2>
<p>TypeScript 1.5 adds support to ES6 for..of loops on arrays for ES3/ES5 as well as full support for Iterator interfaces when targetting ES6.</p>
<h5>Example</h5>
<p>The TypeScript compiler will transpile for..of arrays to idiomatic ES3/ES5 JavaScript when targeting those versions:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> v <span class="token keyword">of</span> expr<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></code></pre></div>
<p>will be emitted as:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _a <span class="token operator">=</span> expr<span class="token punctuation">;</span> _i <span class="token operator">&lt;</span> _a<span class="token punctuation">.</span>length<span class="token punctuation">;</span> _i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> v <span class="token operator">=</span> _a<span class="token punctuation">[</span>_i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Decorators</h2>
<blockquote>
<p>TypeScript decorators are based on the <a href="https://github.com/wycats/javascript-decorators">ES7 decorator proposal</a>.</p>
</blockquote>
<p>A decorator is:</p>
<ul>
<li>an expression</li>
<li>that evaluates to a function</li>
<li>that takes the target, name, and property descriptor as arguments</li>
<li>and optionally returns a property descriptor to install on the target object</li>
</ul>
<blockquote>
<p>For more information, please see the <a href="https://github.com/Microsoft/TypeScript/issues/2249">Decorators</a> proposal.</p>
</blockquote>
<h5>Example</h5>
<p>Decorators <code class="language-text">readonly</code> and <code class="language-text">enumerable(false)</code> will be applied to the property <code class="language-text">method</code> before it is installed on class <code class="language-text">C</code>. This allows the decorator to change the implementation, and in this case, augment the descriptor to be writable: false and enumerable: false.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
  @<span class="token keyword">readonly</span>
  @<span class="token function">enumerable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token keyword">readonly</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">enumerable</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Computed properties</h2>
<p>Initializing an object with dynamic properties can be a bit of a burden. Take the following example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> NeighborMap <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Node <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> Node <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> neighbors<span class="token punctuation">:</span> NeighborMap<span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">makeNode</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> initialNeighbor<span class="token punctuation">:</span> Node</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Node <span class="token punctuation">{</span>
    <span class="token keyword">var</span> neighbors<span class="token punctuation">:</span> NeighborMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    neighbors<span class="token punctuation">[</span>initialNeighbor<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> initialNeighbor<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> name<span class="token punctuation">,</span> neighbors<span class="token punctuation">:</span> neighbors <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Here we need to create a variable to hold on to the neighbor-map so that we can initialize it. With TypeScript 1.5, we can let the compiler do the heavy lifting:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">makeNode</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> initialNeighbor<span class="token punctuation">:</span> Node</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Node <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
        neighbors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token punctuation">[</span>initialNeighbor<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> initialNeighbor
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Support for <code class="language-text">UMD</code> and <code class="language-text">System</code> module output</h2>
<p>In addition to <code class="language-text">AMD</code> and <code class="language-text">CommonJS</code> module loaders, TypeScript now supports emitting modules <code class="language-text">UMD</code> (<a href="https://github.com/umdjs/umd">Universal Module Definition</a>) and <a href="https://github.com/systemjs/systemjs"><code class="language-text">System</code></a> module formats.</p>
<p><strong>Usage</strong>:</p>
<blockquote>
<p>tsc —module umd</p>
</blockquote>
<p>and</p>
<blockquote>
<p>tsc —module system</p>
</blockquote>
<h2>Unicode codepoint escapes in strings</h2>
<p>ES6 introduces escapes that allow users to represent a Unicode codepoint using just a single escape.</p>
<p>As an example, consider the need to escape a string that contains the character ’𠮷‘.  In UTF-16/UCS2, ’𠮷’ is represented as a surrogate pair, meaning that it’s encoded using a pair of 16-bit code units of values, specifically <code class="language-text">0xD842</code> and <code class="language-text">0xDFB7</code>. Previously this meant that you’d have to escape the codepoint as <code class="language-text">&quot;\uD842\uDFB7&quot;</code>. This has the major downside that it’s difficult to discern two independent characters from a surrogate pair.</p>
<p>With ES6’s codepoint escapes, you can cleanly represent that exact character in strings and template strings with a single escape: <code class="language-text">&quot;\u{20bb7}&quot;</code>. TypeScript will emit the string in ES3/ES5 as <code class="language-text">&quot;\uD842\uDFB7&quot;</code>.</p>
<h2>Tagged template strings in ES3/ES5</h2>
<p>In TypeScript 1.4, we added support for template strings for all targets, and tagged templates for just ES6. Thanks to some considerable work done by <a href="https://github.com/ivogabe">@ivogabe</a>, we bridged the gap for for tagged templates in ES3 and ES5.</p>
<p>When targeting ES3/ES5, the following code</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">oddRawStrings</span><span class="token punctuation">(</span><span class="token parameter">strs<span class="token punctuation">:</span> TemplateStringsArray<span class="token punctuation">,</span> n1<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> strs<span class="token punctuation">.</span>raw<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">raw<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

oddRawStrings <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello \n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">123</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> \t </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">456</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n world</span><span class="token template-punctuation string">`</span></span></code></pre></div>
<p>will be emitted as</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">oddRawStrings</span><span class="token punctuation">(</span><span class="token parameter">strs<span class="token punctuation">,</span> n1<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> strs<span class="token punctuation">.</span>raw<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">raw<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> index <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">(</span>_a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Hello \n"</span><span class="token punctuation">,</span> <span class="token string">" \t "</span><span class="token punctuation">,</span> <span class="token string">"\n world"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _a<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Hello \\n"</span><span class="token punctuation">,</span> <span class="token string">" \\t "</span><span class="token punctuation">,</span> <span class="token string">"\\n world"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">oddRawStrings</span><span class="token punctuation">(</span>_a<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> _a<span class="token punctuation">;</span></code></pre></div>
<h2>AMD-dependency optional names</h2>
<p><code class="language-text">/// &lt;amd-dependency path=&quot;x&quot; /&gt;</code> informs the compiler about a non-TS module dependency that needs to be injected in the resulting module’s require call; however, there was no way to consume this module in the TS code.</p>
<p>The new <code class="language-text">amd-dependency name</code> property allows passing an optional name for an amd-dependency:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">/// &lt;amd-dependency path="legacy/moduleA" name="moduleA"/></span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> moduleA<span class="token punctuation">:</span>MyType
moduleA<span class="token punctuation">.</span><span class="token function">callStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>Generated JS code:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"require"</span><span class="token punctuation">,</span> <span class="token string">"exports"</span><span class="token punctuation">,</span> <span class="token string">"legacy/moduleA"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> moduleA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    moduleA<span class="token punctuation">.</span><span class="token function">callStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Project support through <code class="language-text">tsconfig.json</code></h2>
<p>Adding a <code class="language-text">tsconfig.json</code> file in a directory indicates that the directory is the root of a TypeScript project. The tsconfig.json file specifies the root files and the compiler options required to compile the project. A project is compiled in one of the following ways:</p>
<ul>
<li>By invoking tsc with no input files, in which case the compiler searches for the tsconfig.json file starting in the current directory and continuing up the parent directory chain.</li>
<li>By invoking tsc with no input files and a -project (or just -p) command line option that specifies the path of a directory containing a tsconfig.json file.</li>
</ul>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
        <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"sourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>See the <a href="https://github.com/Microsoft/TypeScript/wiki/tsconfig.json">tsconfig.json wiki page</a> for more details.</p>
<h2><code class="language-text">--rootDir</code> command line option</h2>
<p>Option <code class="language-text">--outDir</code> duplicates the input hierarchy in the output. The compiler computes the root of the input files as the longest common path of all input files; and then uses that to replicate all its substructure in the output.</p>
<p>Sometimes this is not desirable, for instance inputs <code class="language-text">FolderA/FolderB/1.ts</code> and <code class="language-text">FolderA/FolderB/2.ts</code> would result in output structure mirroring <code class="language-text">FolderA/FolderB/</code>. Now if a new file <code class="language-text">FolderA/3.ts</code> is added to the input, the output structure will pop out to mirror <code class="language-text">FolderA/</code>.</p>
<p><code class="language-text">--rootDir</code> specifies the input directory to be mirrored in output instead of computing it.</p>
<h2><code class="language-text">--noEmitHelpers</code> command line option</h2>
<p>The TypeScript compiler emits a few helpers like <code class="language-text">__extends</code> when needed. The helpers are emitted in every file they are referenced in. If you want to consolidate all helpers in one place, or override the default behavior, use <code class="language-text">--noEmitHelpers</code> to instructs the compiler not to emit them.</p>
<h2><code class="language-text">--newLine</code> command line option</h2>
<p>By default the output new line character is <code class="language-text">\r\n</code> on Windows based systems and <code class="language-text">\n</code> on *nix based systems. <code class="language-text">--newLine</code> command line flag allows overriding this behavior and specifying the new line character to be used in generated output files.</p>
<h2><code class="language-text">--inlineSourceMap</code> and <code class="language-text">inlineSources</code> command line options</h2>
<p><code class="language-text">--inlineSourceMap</code> causes source map files to be written inline in the generated <code class="language-text">.js</code> files instead of in a independent <code class="language-text">.js.map</code> file.  <code class="language-text">--inlineSources</code> allows for additionally inlining the source <code class="language-text">.ts</code> file into the</p>
<h2>TypeScript 1.4</h2>
<h2>Union types</h2>
<h3>Overview</h3>
<p>Union types are a powerful way to express a value that can be one of several types. For example, you might have an API for running a program that takes a commandline as either a <code class="language-text">string</code>, a <code class="language-text">string[]</code> or a function that returns a <code class="language-text">string</code>. You can now write:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">RunOptions</span> <span class="token punctuation">{</span>
   program<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
   commandline<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Assignment to union types works very intuitively — anything you could assign to one of the union type’s members is assignable to the union:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> opts<span class="token punctuation">:</span> RunOptions <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
opts<span class="token punctuation">.</span>commandline <span class="token operator">=</span> <span class="token string">'-hello world'</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
opts<span class="token punctuation">.</span>commandline <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'-hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
opts<span class="token punctuation">.</span>commandline <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Error, number is not string or string[]</span></code></pre></div>
<p>When reading from a union type, you can see any properties that are shared by them:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// OK, string and string[] both have 'length' property</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"it's empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Using Type Guards, you can easily work with a variable of a union type:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">formatCommandline</span><span class="token punctuation">(</span><span class="token parameter">c<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> c <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Stricter Generics</h3>
<p>With union types able to represent a wide range of type scenarios, we’ve decided to improve the strictness of certain generic calls. Previously, code like this would (surprisingly) compile without error:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> equal<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>lhs<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> rhs<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> lhs <span class="token operator">===</span> rhs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Previously: No error</span>
<span class="token comment">// New behavior: Error, no best common type between 'string' and 'number'</span>
<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>With union types, you can now specify the desired behavior at both the function declaration site and the call site:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// 'choose' function where types must match</span>
<span class="token keyword">function</span> choose1<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span> <span class="token operator">?</span> a <span class="token punctuation">:</span> b <span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">choose1</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> choose1<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>

<span class="token comment">// 'choose' function where types need not match</span>
<span class="token keyword">function</span> choose2<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token operator">|</span><span class="token constant">U</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.5</span> <span class="token operator">?</span> a <span class="token punctuation">:</span> b <span class="token punctuation">}</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">choose2</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK, c: string</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token function">choose2</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK, d: string|number</span></code></pre></div>
<h3>Better Type Inference</h3>
<p>Union types also allow for better type inference in arrays and other places where you might have multiple kinds of values in a collection:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// x: Array&lt;string|number></span>
x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// Error, boolean is not string or number</span></code></pre></div>
<h2><code class="language-text">let</code> declarations</h2>
<p>In JavaScript, <code class="language-text">var</code> declarations are “hoisted” to the top of their enclosing scope. This can result in confusing bugs:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// meant to write 'y' here</span>
<span class="token comment">/* later in the same block */</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span></code></pre></div>
<p>The new ES6 keyword <code class="language-text">let</code>, now supported in TypeScript, declares a variable with more intuitive “block” semantics. A <code class="language-text">let</code> variable can only be referred to after its declaration, and is scoped to the syntactic block where it is defined:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, cannot refer to x before its declaration</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, x is not declared in this block</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">let</code> is only available when targeting ECMAScript 6 (<code class="language-text">--target ES6</code>).</p>
<h2><code class="language-text">const</code> declarations</h2>
<p>The other new ES6 declaration type supported in TypeScript is <code class="language-text">const</code>. A <code class="language-text">const</code> variable may not be assigned to, and must be initialized where it is declared. This is useful for declarations where you don’t want to change the value after its initialization:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> halfPi <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
halfPi <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// Error, can't assign to a `const`</span></code></pre></div>
<p><code class="language-text">const</code> is only available when targeting ECMAScript 6 (<code class="language-text">--target ES6</code>).</p>
<h2>Template strings</h2>
<p>TypeScript now supports ES6 template strings. These are an easy way to embed arbitrary expressions in strings:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"TypeScript"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> greeting  <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">! Your name has </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> characters</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre></div>
<p>When compiling to pre-ES6 targets, the string is decomposed:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"TypeScript!"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> greeting <span class="token operator">=</span> <span class="token string">"Hello, "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"! Your name has "</span> <span class="token operator">+</span> name<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">" characters"</span><span class="token punctuation">;</span></code></pre></div>
<h2>Type Guards</h2>
<p>A common pattern in JavaScript is to use <code class="language-text">typeof</code> or <code class="language-text">instanceof</code> to examine the type of an expression at runtime. TypeScript now understands these conditions and will change type inference accordingly when used in an <code class="language-text">if</code> block.</p>
<p>Using <code class="language-text">typeof</code> to test a variable:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">subtr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, 'subtr' does not exist on 'string'</span>
<span class="token punctuation">}</span>
<span class="token comment">// x is still any here</span>
x<span class="token punctuation">.</span><span class="token function">unknown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span></code></pre></div>
<p>Using <code class="language-text">typeof</code> with union types and <code class="language-text">else</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HTMLElement <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// x is string here, as shown above</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// x is HTMLElement here</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Using <code class="language-text">instanceof</code> with classes and union types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span> <span class="token function">woof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span> <span class="token function">meow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> pet<span class="token punctuation">:</span> Dog<span class="token operator">|</span>Cat <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pet <span class="token keyword">instanceof</span> <span class="token class-name">Dog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pet<span class="token punctuation">.</span><span class="token function">woof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    pet<span class="token punctuation">.</span><span class="token function">woof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Type Aliases</h2>
<p>You can now define an <em>alias</em> for a type using the <code class="language-text">type</code> keyword:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> PrimitiveArray <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">boolean</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">type</span> MyNumber <span class="token operator">=</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> NgScope <span class="token operator">=</span> ng<span class="token punctuation">.</span>IScope<span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token function-variable function">Callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span></code></pre></div>
<p>Type aliases are exactly the same as their original types; they are simply alternative names.</p>
<h2><code class="language-text">const enum</code> (completely inlined enums)</h2>
<p>Enums are very useful, but some programs don’t actually need the generated code and would benefit from simply inlining all instances of enum members with their numeric equivalents. The new <code class="language-text">const enum</code> declaration works just like a regular <code class="language-text">enum</code> for type safety, but erases completely at compile time.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token keyword">enum</span> Suit <span class="token punctuation">{</span> Clubs<span class="token punctuation">,</span> Diamonds<span class="token punctuation">,</span> Hearts<span class="token punctuation">,</span> Spades <span class="token punctuation">}</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> Suit<span class="token punctuation">.</span>Diamonds<span class="token punctuation">;</span></code></pre></div>
<p>Compiles to exactly:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre></div>
<p>TypeScript will also now compute enum values when possible:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">enum</span> MyFlags <span class="token punctuation">{</span>
  None <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Neat <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Cool <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
  Awesome <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
  Best <span class="token operator">=</span> Neat <span class="token operator">|</span> Cool <span class="token operator">|</span> Awesome
<span class="token punctuation">}</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> MyFlags<span class="token punctuation">.</span>Best<span class="token punctuation">;</span> <span class="token comment">// emits var b = 7;</span></code></pre></div>
<h2><code class="language-text">-noEmitOnError</code> commandline option</h2>
<p>The default behavior for the TypeScript compiler is to still emit .js files if there were type errors (for example, an attempt to assign a <code class="language-text">string</code> to a <code class="language-text">number</code>). This can be undesirable on build servers or other scenarios where only output from a “clean” build is desired. The new flag <code class="language-text">noEmitOnError</code> prevents the compiler from emitting .js code if there were any errors.</p>
<p>This is now the default for MSBuild projects; this allows MSBuild incremental build to work as expected, as outputs are only generated on clean builds.</p>
<h2>AMD Module names</h2>
<p>By default AMD modules are generated anonymous. This can lead to problems when other tools are used to process the resulting modules like a bundler (e.g. <code class="language-text">r.js</code>).</p>
<p>The new <code class="language-text">amd-module name</code> tag allows passing an optional module name to the compiler:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">//// [amdModule.ts]</span>
<span class="token comment">///&lt;amd-module name='NamedModule'/></span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Will result in assigning the name <code class="language-text">NamedModule</code> to the module as part of calling the AMD <code class="language-text">define</code>:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">//// [amdModule.js]</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"NamedModule"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"require"</span><span class="token punctuation">,</span> <span class="token string">"exports"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exports<span class="token punctuation">.</span><span class="token constant">C</span> <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>TypeScript 1.3</h2>
<h2>Protected</h2>
<p>The new <code class="language-text">protected</code> modifier in classes works like it does in familiar languages like C++, C#, and Java. A <code class="language-text">protected</code> member of a class is visible only inside subclasses of the class in which it is declared:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Thing</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyThing</span> <span class="token keyword">extends</span> <span class="token class-name">Thing</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">myMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// OK, can access protected member from subclass</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, cannot call protected member from outside class</span></code></pre></div>
<h2>Tuple types</h2>
<p>Tuple types express an array where the type of certain elements is known, but need not be the same. For example, you may want to represent an array with a <code class="language-text">string</code> at position 0 and a <code class="language-text">number</code> at position 1:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Declare a tuple type</span>
<span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Initialize it</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token comment">// Initialize it incorrectly</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Error</span></code></pre></div>
<p>When accessing an element with a known index, the correct type is retrieved:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, 'number' does not have 'substr'</span></code></pre></div>
<p>Note that in TypeScript 1.4, when accessing an element outside the set of known indices, a union type is used instead:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts">x<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK, 'string' and 'number' both have toString</span>
x<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// Error, boolean isn't number or string</span></code></pre></div>
<h2>TypeScript 1.1</h2>
<h2>Performance Improvements</h2>
<p>The 1.1 compiler is typically around 4x faster than any previous release. See <a href="http://blogs.msdn.com/b/typescript/archive/2014/10/06/announcing-typescript-1-1-ctp.aspx">this blog post for some impressive charts.</a></p>
<h2>Better Module Visibility Rules</h2>
<p>TypeScript now only strictly enforces the visibility of types in modules if the <code class="language-text">--declaration</code> flag is provided. This is very useful for Angular scenarios, for example:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">module</span> MyControllers <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">ZooScope</span> <span class="token keyword">extends</span> <span class="token class-name">ng<span class="token punctuation">.</span>IScope</span> <span class="token punctuation">{</span>
    animals<span class="token punctuation">:</span> Animal<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ZooController</span> <span class="token punctuation">{</span>
    <span class="token comment">// Used to be an error (cannot expose ZooScope), but now is only</span>
    <span class="token comment">// an error when trying to generate .d.ts files</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> $scope<span class="token punctuation">:</span> ZooScope</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token comment">/* more code */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>{% endraw %}</p></div><hr/><ul><li></li><li></li></ul></main><footer><a href="/deprecated">Old stuff</a>© <!-- -->2019<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/handbook/release-notes/overview.html";window.webpackCompilationHash="9ba7cceb403e6d704a1e";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-352c7c1acacfeb7cf5bd.js"],"component---src-templates-handbook-tsx":["/component---src-templates-handbook-tsx-16ee75366df1adfb048f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-ef23bbb3e08c1ed9925d.js"],"component---src-pages-playground-dev-tsx":["/component---src-pages-playground-dev-tsx-fb42bbd649daceeb46f4.js"]};/*]]>*/</script><script src="/webpack-runtime-5e1ec6c861ae70872e2b.js" async=""></script><script src="/app-352c7c1acacfeb7cf5bd.js" async=""></script><script src="/component---src-templates-handbook-tsx-16ee75366df1adfb048f.js" async=""></script></body></html>