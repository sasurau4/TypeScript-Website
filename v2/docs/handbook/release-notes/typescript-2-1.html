<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.13.67"/><style>@keyframes css-1{from{opacity:0;}to{opacity:1;}}@keyframes css-2{from{opacity:1;}to{opacity:0;}}@keyframes css-3{from{transform:translate3d(-10px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-4{from{transform:translate3d(-20px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-5{from{transform:translate3d(-40px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-6{from{transform:translate3d(-400px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-7{from{transform:translate3d(10px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-8{from{transform:translate3d(20px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-9{from{transform:translate3d(40px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-10{from{transform:translate3d(400px,0,0);}to{transform:translate3d(0,0,0);}}@keyframes css-11{from{transform:translate3d(0,10px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-12{from{transform:translate3d(0,20px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-13{from{transform:translate3d(0,-10px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-14{from{transform:translate3d(0,-20px,0);}to{transform:translate3d(0,0,0);}}@keyframes css-15{from{transform:translate3d(0,0,0);}to{transform:translate3d(10px,0,0);}}@keyframes css-16{from{transform:translate3d(0,0,0);}to{transform:translate3d(20px,0,0);}}@keyframes css-17{from{transform:translate3d(0,0,0);}to{transform:translate3d(40px,0,0);}}@keyframes css-18{from{transform:translate3d(0,0,0);}to{transform:translate3d(400px,0,0);}}@keyframes css-19{from{transform:translate3d(0,0,0);}to{transform:translate3d(-10px,0,0);}}@keyframes css-20{from{transform:translate3d(0,0,0);}to{transform:translate3d(-20px,0,0);}}@keyframes css-21{from{transform:translate3d(0,0,0);}to{transform:translate3d(-40px,0,0);}}@keyframes css-22{from{transform:translate3d(0,0,0);}to{transform:translate3d(-400px,0,0);}}@keyframes css-23{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,-10px,0);}}@keyframes css-24{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,-20px,0);}}@keyframes css-25{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,10px,0);}}@keyframes css-26{from{transform:translate3d(0,0,0);}to{transform:translate3d(0,20px,0);}}@keyframes css-27{from{transform:scale3d(.98,.98,1);}to{transform:scale3d(1,1,1);}}@keyframes css-28{from{transform:scale3d(1,1,1);}to{transform:scale3d(.98,.98,1);}}@keyframes css-29{from{transform:scale3d(1.03,1.03,1);}to{transform:scale3d(1,1,1);}}@keyframes css-30{from{transform:scale3d(1,1,1);}to{transform:scale3d(1.03,1.03,1);}}@keyframes css-31{from{transform:rotateZ(0deg);}to{transform:rotateZ(90deg);}}@keyframes css-32{from{transform:rotateZ(0deg);}to{transform:rotateZ(-90deg);}}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Arabic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Cyrillic)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (East European)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Greek)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Hebrew)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (Vietnamese)';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI Light'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI SemiLight'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:'Segoe UI Web (West European)';src:local('Segoe UI SemiBold'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-light.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-light.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semilight.woff') format('woff');font-weight:300;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-regular.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-regular.woff') format('woff');font-weight:400;font-style:normal;}@font-face{font-family:''Selawik Web'';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semibold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/selawik/selawik-semibold.woff') format('woff');font-weight:600;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff') format('woff');font-weight:100;font-style:normal;}@font-face{font-family:'Leelawadee UI Web';src:url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-bold.woff2') format('woff2'),url('https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-bold.woff') format('woff');font-weight:600;font-style:normal;}@keyframes css-37{0%{transform:translate(0, 0);animation-timing-function:linear;}78.57%{transform:translate(0, 0);animation-timing-function:cubic-bezier(0.62, 0, 0.56, 1);}82.14%{transform:translate(0, -5px);animation-timing-function:cubic-bezier(0.58, 0, 0, 1);}84.88%{transform:translate(0, 9px);animation-timing-function:cubic-bezier(1, 0, 0.56, 1);}88.1%{transform:translate(0, -2px);animation-timing-function:cubic-bezier(0.58, 0, 0.67, 1);}90.12%{transform:translate(0, 0);animation-timing-function:linear;}100%{transform:translate(0, 0);}}@keyframes css-38{0%{transform: scale(0);animation-timing-function:linear;}14.29%{transform:scale(0);animation-timing-function:cubic-bezier(0.84, 0, 0.52, 0.99);}16.67%{transform:scale(1.15);animation-timing-function:cubic-bezier(0.48, -0.01, 0.52, 1.01);}19.05%{transform:scale(0.95);animation-timing-function:cubic-bezier(0.48, 0.02, 0.52, 0.98);}21.43%{transform:scale(1);animation-timing-function:linear;}42.86%{transform:scale(1);animation-timing-function:cubic-bezier(0.48, -0.02, 0.52, 1.02);}45.71%{transform:scale(0.8);animation-timing-function:cubic-bezier(0.48, 0.01, 0.52, 0.99);}50%{transform:scale(1);animation-timing-function:linear;}90.12%{transform:scale(1);animation-timing-function:cubic-bezier(0.48, -0.02, 0.52, 1.02);}92.98%{transform:scale(0.8);animation-timing-function:cubic-bezier(0.48, 0.01, 0.52, 0.99);}97.26%{transform:scale(1);animation-timing-function:linear;}100%{transform:scale(1);}}@keyframes css-39{0%{transform:rotate(0deg);animation-timing-function:linear;}83.33%{transform: rotate(0deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}83.93%{transform:rotate(15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}84.52%{transform:rotate(-15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}85.12%{transform:rotate(15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}85.71%{transform:rotate(-15deg);animation-timing-function:cubic-bezier(0.33, 0, 0.67, 1);}86.31%{transform:rotate(0deg);animation-timing-function:linear;}100%{transform:rotate(0deg);}}@keyframes css-40{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}@keyframes css-41{0%{left:-30%;}100%{left:100%;}}@keyframes css-42{100%{right:-30%;}0%{right:100%;}}@keyframes css-43{0%{background-position:-1000%;}100%{background-position:1000%;}}@keyframes css-44{100%{background-position:-1000%;}0%{background-position:1000%;}}@keyframes css-45{0%{opacity:0;animation-timing-function:cubic-bezier(.1,.9,.2,1);transform:scale3d(.90,.90,.90);}100%{opacity:1;transform:scale3d(1,1,1);}}</style><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link as="script" rel="preload" href="/component---src-templates-handbook-tsx-16ee75366df1adfb048f.js"/><link as="script" rel="preload" href="/app-352c7c1acacfeb7cf5bd.js"/><link as="script" rel="preload" href="/webpack-runtime-5e1ec6c861ae70872e2b.js"/><link as="fetch" rel="preload" href="/page-data/docs/handbook/release-notes/typescript-2-1.html/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/"></a></h3></header><main><div><p>{% raw %}## <code class="language-text">keyof</code> and Lookup Types</p>
<p>In JavaScript it is fairly common to have APIs that expect property names as parameters, but so far it hasn’t been possible to express the type relationships that occur in those APIs.</p>
<p>Enter Index Type Query or <code class="language-text">keyof</code>;
An indexed type query <code class="language-text">keyof T</code> yields the type of permitted property names for <code class="language-text">T</code>.
A <code class="language-text">keyof T</code> type is considered a subtype of <code class="language-text">string</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token constant">K1</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">;</span> <span class="token comment">// "name" | "age" | "location"</span>
<span class="token keyword">type</span> <span class="token constant">K2</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// "length" | "push" | "pop" | "concat" | ...</span>
<span class="token keyword">type</span> <span class="token constant">K3</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> Person <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// string</span></code></pre></div>
<p>The dual of this is <em>indexed access types</em>, also called <em>lookup types</em>.
Syntactically, they look exactly like an element access, but are written as types:</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token constant">P1</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token constant">P2</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">"name"</span> <span class="token operator">|</span> <span class="token string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
<span class="token keyword">type</span> <span class="token constant">P3</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token string">"charAt"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// (pos: number) => string</span>
<span class="token keyword">type</span> <span class="token constant">P4</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"push"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// (...items: string[]) => number</span>
<span class="token keyword">type</span> <span class="token constant">P5</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string</span></code></pre></div>
<p>You can use this pattern with other parts of the type system to get type-safe lookups.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> getProperty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Inferred type is T[K]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> setProperty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> key<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">"hello!"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string</span>

<span class="token keyword">let</span> oops <span class="token operator">=</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"wargarbl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error! "wargarbl" is not "foo" | "bar"</span>

<span class="token function">setProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error!, string expected number</span></code></pre></div>
<h2>Mapped Types</h2>
<p>One common task is to take an existing type and make each of its properties entirely optional.
Let’s say we have a <code class="language-text">Person</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>A partial version of it would be:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name">PartialPerson</span> <span class="token punctuation">{</span>
    name<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>with Mapped types, <code class="language-text">PartialPerson</code> can be written as a generalized transformation on the type <code class="language-text">Person</code> as:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> PartialPerson <span class="token operator">=</span> Partial<span class="token operator">&lt;</span>Person<span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>Mapped types are produced by taking a union of literal types, and computing a set of properties for a new object type.
They’re like <a href="https://docs.python.org/2/tutorial/datastructures.html#nested-list-comprehensions">list comprehensions in Python</a>, but instead of producing new elements in a list, they produce new properties in a type.</p>
<p>In addition to <code class="language-text">Partial</code>, Mapped Types can express many useful transformations on types:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Keep types the same, but make each property to be read-only.</span>
<span class="token keyword">type</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Same property names, but make the value a promise instead of a concrete one</span>
<span class="token keyword">type</span> Deferred<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Wrap proxies around properties of T</span>
<span class="token keyword">type</span> Proxify<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">(</span>v<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2><code class="language-text">Partial</code>, <code class="language-text">Readonly</code>, <code class="language-text">Record</code>, and <code class="language-text">Pick</code></h2>
<p><code class="language-text">Partial</code> and <code class="language-text">Readonly</code>, as described earlier, are very useful constructs.
You can use them to describe some common JS routines like:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> assign<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> freeze<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>Because of that, they are now included by default in the standard library.</p>
<p>We’re also including two other utility types as well: <code class="language-text">Record</code> and <code class="language-text">Pick</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// From T pick a set of properties K</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>keys<span class="token punctuation">:</span> <span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nameAndAgeOnly <span class="token operator">=</span> <span class="token function">pick</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { name: string, age: number }</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// For every properties K of type T, transform it to U</span>
<span class="token keyword">function</span> mapObject<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token function-variable function">f</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Record<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span>

<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">"world"</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token string">"bye"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lengths <span class="token operator">=</span> <span class="token function">mapObject</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token parameter">s</span> <span class="token operator">=></span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// { foo: number, bar: number, baz: number }</span></code></pre></div>
<h2>Object Spread and Rest</h2>
<p>TypeScript 2.1 brings support for <a href="https://github.com/sebmarkbage/ecmascript-rest-spread">ESnext Spread and Rest</a>.</p>
<p>Similar to array spread, spreading an object can be handy to get a shallow copy:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> copy <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>original <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Similarly, you can merge several different objects.
In the following example, <code class="language-text">merged</code> will have properties from <code class="language-text">foo</code>, <code class="language-text">bar</code>, and <code class="language-text">baz</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> merged <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>foo<span class="token punctuation">,</span> <span class="token operator">...</span>bar<span class="token punctuation">,</span> <span class="token operator">...</span>baz <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>You can also override existing properties and add new ones:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>obj<span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// { x: number, y: number, z: number }</span></code></pre></div>
<p>The order of specifying spread operations determines what properties end up in the resulting object;
properties in later spreads “win out” over previously created properties.</p>
<p>Object rests are the dual of object spreads, in that they can extract any extra properties that don’t get picked up when destructuring an element:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> z<span class="token punctuation">,</span> <span class="token operator">...</span>obj1 <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
obj1<span class="token punctuation">;</span> <span class="token comment">// {x: number, y:number};</span></code></pre></div>
<h2>Downlevel Async Functions</h2>
<p>This feature was supported before TypeScript 2.1, but only when targeting ES6/ES2015.
TypeScript 2.1 brings the capability to ES3 and ES5 run-times, meaning you’ll be free to take advantage of it no matter what environment you’re using.</p>
<blockquote>
<p>Note: first, we need to make sure our run-time has an ECMAScript-compliant <code class="language-text">Promise</code> available globally.
That might involve grabbing <a href="https://github.com/stefanpenner/es6-promise">a polyfill</a> for <code class="language-text">Promise</code>, or relying on one that you might have in the run-time that you’re targeting.
We also need to make sure that TypeScript knows <code class="language-text">Promise</code> exists by setting your <code class="language-text">lib</code> flag to something like <code class="language-text">&quot;dom&quot;, &quot;es2015&quot;</code> or <code class="language-text">&quot;dom&quot;, &quot;es2015.promise&quot;, &quot;es5&quot;</code></p>
</blockquote>
<h5>Example</h5>
<h5>tsconfig.json</h5>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"dom"</span><span class="token punctuation">,</span> <span class="token string">"es2015.promise"</span><span class="token punctuation">,</span> <span class="token string">"es5"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h5>dramaticWelcome.ts</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">milliseconds<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> milliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dramaticWelcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">dramaticWelcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Compiling and running the output should result in the correct behavior on an ES3/ES5 engine.</p>
<h2>Support for external helpers library (<code class="language-text">tslib</code>)</h2>
<p>TypeScript injects a handful of helper functions such as <code class="language-text">__extends</code> for inheritance, <code class="language-text">__assign</code> for spread operator in object literals and JSX elements, and <code class="language-text">__awaiter</code> for async functions.</p>
<p>Previously there were two options:</p>
<ol>
<li>inject helpers in <em>every</em> file that needs them, or</li>
<li>no helpers at all with <code class="language-text">--noEmitHelpers</code>.</li>
</ol>
<p>The two options left more to be desired;
bundling the helpers in every file was a pain point for customers trying to keep their package size small.
And not including helpers, meant customers had to maintain their own helpers library.</p>
<p>TypeScript 2.1 allows for including these files in your project once in a separate module, and the compiler will emit imports to them as needed.</p>
<p>First, install the <a href="https://github.com/Microsoft/tslib"><code class="language-text">tslib</code></a> utility library:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">npm install tslib</code></pre></div>
<p>Second, compile your files using <code class="language-text">--importHelpers</code>:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">tsc --module commonjs --importHelpers a.ts</code></pre></div>
<p>So given the following input, the resulting <code class="language-text">.js</code> file will include an import to <code class="language-text">tslib</code> and use the <code class="language-text">__assign</code> helper from it instead of inlining it.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"o"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> copy <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>o <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> tslib_1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tslib"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>o <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"o"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>copy <span class="token operator">=</span> tslib_1<span class="token punctuation">.</span><span class="token function">__assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> exports<span class="token punctuation">.</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2>Untyped imports</h2>
<p>TypeScript has traditionally been overly strict about how you can import modules.
This was to avoid typos and prevent users from using modules incorrectly.</p>
<p>However, a lot of the time, you might just want to import an existing module that may not have its own <code class="language-text">.d.ts</code> file.
Previously this was an error.
Starting with TypeScript 2.1 this is now much easier.</p>
<p>With TypeScript 2.1, you can import a JavaScript module without needing a type declaration.
A type declaration (such as <code class="language-text">declare module &quot;foo&quot; { ... }</code> or <code class="language-text">node_modules/@types/foo</code>) still takes priority if it exists.</p>
<p>An import to a module with no declaration file will still be flagged as an error under <code class="language-text">--noImplicitAny</code>.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// Succeeds if `node_modules/asdf/index.js` exists</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> x <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"asdf"</span><span class="token punctuation">;</span></code></pre></div>
<h2>Support for <code class="language-text">--target ES2016</code>, <code class="language-text">--target ES2017</code> and <code class="language-text">--target ESNext</code></h2>
<p>TypeScript 2.1 supports three new target values <code class="language-text">--target ES2016</code>, <code class="language-text">--target ES2017</code> and <code class="language-text">--target ESNext</code>.</p>
<p>Using target <code class="language-text">--target ES2016</code> will instruct the compiler not to transform ES2016-specific features, e.g. <code class="language-text">**</code> operator.</p>
<p>Similarly, <code class="language-text">--target ES2017</code> will instruct the compiler not to transform ES2017-specific features like <code class="language-text">async</code>/<code class="language-text">await</code>.</p>
<p><code class="language-text">--target ESNext</code> targets latest supported <a href="https://github.com/tc39/proposals">ES proposed features</a>.</p>
<h2>Improved <code class="language-text">any</code> Inference</h2>
<p>Previously, if TypeScript couldn’t figure out the type of a variable, it would choose the <code class="language-text">any</code> type.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">;</span>      <span class="token comment">// implicitly 'any'</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// implicitly 'any[]'</span>

<span class="token keyword">let</span> z<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// explicitly 'any'.</span></code></pre></div>
<p>With TypeScript 2.1, instead of just choosing <code class="language-text">any</code>, TypeScript will infer types based on what you end up assigning later on.</p>
<p>This is only enabled if <code class="language-text">--noImplicitAny</code> is set.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> x<span class="token punctuation">;</span>

<span class="token comment">// You can still assign anything you want to 'x'.</span>
<span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token comment">// After that last assignment, TypeScript 2.1 knows that 'x' has type '() => number'.</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Thanks to that, it will now tell you that you can't add a number to a function!</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//          ~~~~~</span>
<span class="token comment">// Error! Operator '+' cannot be applied to types '() => number' and 'number'.</span>

<span class="token comment">// TypeScript still allows you to assign anything you want to 'x'.</span>
x <span class="token operator">=</span> <span class="token string">"Hello world!"</span><span class="token punctuation">;</span>

<span class="token comment">// But now it also knows that 'x' is a 'string'!</span>
x<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The same sort of tracking is now also done for empty arrays.</p>
<p>A variable declared with no type annotation and an initial value of <code class="language-text">[]</code> is considered an implicit <code class="language-text">any[]</code> variable.
However, each subsequent <code class="language-text">x.push(value)</code>, <code class="language-text">x.unshift(value)</code> or <code class="language-text">x[n] = value</code> operation <em>evolves</em> the type of the variable in accordance with what elements are added to it.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>  <span class="token comment">// (string | number | boolean)[]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">cond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">cond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>  <span class="token comment">// string[] | null</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Implicit any errors</h2>
<p>One great benefit of this is that you’ll see <em>way fewer</em> implicit <code class="language-text">any</code> errors when running with <code class="language-text">--noImplicitAny</code>.
Implicit <code class="language-text">any</code> errors are only reported when the compiler is unable to know the type of a variable without a type annotation.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Error: Variable 'x' implicitly has type 'any[]' in some locations where its type cannot be determined.</span>
    x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>    <span class="token comment">// Error: Variable 'x' implicitly has an 'any[]' type.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Better inference for literal types</h2>
<p>String, numeric and boolean literal types (e.g. <code class="language-text">&quot;abc&quot;</code>, <code class="language-text">1</code>, and <code class="language-text">true</code>) were previously inferred only in the presence of an explicit type annotation.
Starting with TypeScript 2.1, literal types are <em>always</em> inferred for <code class="language-text">const</code> variables and <code class="language-text">readonly</code> properties.</p>
<p>The type inferred for a <code class="language-text">const</code> variable or <code class="language-text">readonly</code> property without a type annotation is the type of the literal initializer.
The type inferred for a <code class="language-text">let</code> variable, <code class="language-text">var</code> variable, parameter, or non-<code class="language-text">readonly</code> property with an initializer and no type annotation is the widened literal type of the initializer.
Where the widened type for a string literal type is <code class="language-text">string</code>, <code class="language-text">number</code> for numeric literal types, <code class="language-text">boolean</code> for <code class="language-text">true</code> or <code class="language-text">false</code> and the containing enum for enum literal types.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Type 1</span>
<span class="token keyword">const</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">;</span>  <span class="token comment">// Type 1</span>
<span class="token keyword">const</span> c3 <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>  <span class="token comment">// Type "abc"</span>
<span class="token keyword">const</span> c4 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// Type true</span>
<span class="token keyword">const</span> c5 <span class="token operator">=</span> cond <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token string">"abc"</span><span class="token punctuation">;</span>  <span class="token comment">// Type 1 | "abc"</span>

<span class="token keyword">let</span> v1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Type number</span>
<span class="token keyword">let</span> v2 <span class="token operator">=</span> c2<span class="token punctuation">;</span>  <span class="token comment">// Type number</span>
<span class="token keyword">let</span> v3 <span class="token operator">=</span> c3<span class="token punctuation">;</span>  <span class="token comment">// Type string</span>
<span class="token keyword">let</span> v4 <span class="token operator">=</span> c4<span class="token punctuation">;</span>  <span class="token comment">// Type boolean</span>
<span class="token keyword">let</span> v5 <span class="token operator">=</span> c5<span class="token punctuation">;</span>  <span class="token comment">// Type number | string</span></code></pre></div>
<p>Literal type widening can be controlled through explicit type annotations.
Specifically, when an expression of a literal type is inferred for a const location without a type annotation, that <code class="language-text">const</code> variable gets a widening literal type inferred.
But when a <code class="language-text">const</code> location has an explicit literal type annotation, the <code class="language-text">const</code> variable gets a non-widening literal type.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>  <span class="token comment">// Widening type "hello"</span>
<span class="token keyword">let</span> v1 <span class="token operator">=</span> c1<span class="token punctuation">;</span>  <span class="token comment">// Type string</span>

<span class="token keyword">const</span> c2<span class="token punctuation">:</span> <span class="token string">"hello"</span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>  <span class="token comment">// Type "hello"</span>
<span class="token keyword">let</span> v2 <span class="token operator">=</span> c2<span class="token punctuation">;</span>  <span class="token comment">// Type "hello"</span></code></pre></div>
<h2>Use returned values from super calls as ‘this’</h2>
<p>In ES2015, constructors which return an object implicitly substitute the value of <code class="language-text">this</code> for any callers of <code class="language-text">super()</code>.
As a result, it is necessary to capture any potential return value of <code class="language-text">super()</code> and replace it with <code class="language-text">this</code>.
This change enables working with <a href="https://w3c.github.io/webcomponents/spec/custom/#htmlelement-constructor">Custom Elements</a>, which takes advantage of this to initialize browser-allocated elements with user-written constructors.</p>
<h5>Example</h5>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// return a new object other than `this`</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Generates:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> Derived <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_super</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">__extends</span><span class="token punctuation">(</span>Derived<span class="token punctuation">,</span> _super<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token function">_super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        _this<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> _this<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Derived<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<blockquote>
<p>This change entails a break in the behavior of extending built-in classes like <code class="language-text">Error</code>, <code class="language-text">Array</code>, <code class="language-text">Map</code>, etc.. Please see the <a href="https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work">extending built-ins breaking change documentation</a> for more details.</p>
</blockquote>
<h2>Configuration inheritance</h2>
<p>Often a project has multiple output targets, e.g. <code class="language-text">ES5</code> and <code class="language-text">ES2015</code>, debug and production or <code class="language-text">CommonJS</code> and <code class="language-text">System</code>;
Just a few configuration options change between these two targets, and maintaining multiple <code class="language-text">tsconfig.json</code> files can be a hassle.</p>
<p>TypeScript 2.1 supports inheriting configuration using <code class="language-text">extends</code>, where:</p>
<ul>
<li><code class="language-text">extends</code> is a new top-level property in <code class="language-text">tsconfig.json</code> (alongside <code class="language-text">compilerOptions</code>, <code class="language-text">files</code>, <code class="language-text">include</code>, and <code class="language-text">exclude</code>).</li>
<li>The value of <code class="language-text">extends</code> must be a string containing a path to another configuration file to inherit from.</li>
<li>The configuration from the base file are loaded first, then overridden by those in the inheriting config file.</li>
<li>Circularity between configuration files is not allowed.</li>
<li><code class="language-text">files</code>, <code class="language-text">include</code> and <code class="language-text">exclude</code> from the inheriting config file <em>overwrite</em> those from the base config file.</li>
<li>All relative paths found in the configuration file will be resolved relative to the configuration file they originated in.</li>
</ul>
<h5>Example</h5>
<p><code class="language-text">configs/base.json</code>:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strictNullChecks"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">tsconfig.json</code>:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./configs/base"</span><span class="token punctuation">,</span>
  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"main.ts"</span><span class="token punctuation">,</span>
    <span class="token string">"supplemental.ts"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">tsconfig.nostrictnull.json</code>:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"./tsconfig"</span><span class="token punctuation">,</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"strictNullChecks"</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>New <code class="language-text">--alwaysStrict</code></h2>
<p>Invoking the compiler with <code class="language-text">--alwaysStrict</code> causes:</p>
<ol>
<li>Parses all the code in strict mode.</li>
<li>Writes <code class="language-text">&quot;use strict&quot;;</code> directive atop every generated file.</li>
</ol>
<p>Modules are parsed automatically in strict mode.
The new flag is recommended for non-module code.</p>
<p>{% endraw %}</p></div><hr/><ul><li></li><li></li></ul></main><footer><a href="/deprecated">Old stuff</a>© <!-- -->2019<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/handbook/release-notes/typescript-2-1.html";window.webpackCompilationHash="9ba7cceb403e6d704a1e";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-352c7c1acacfeb7cf5bd.js"],"component---src-templates-handbook-tsx":["/component---src-templates-handbook-tsx-16ee75366df1adfb048f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-ef23bbb3e08c1ed9925d.js"],"component---src-pages-playground-dev-tsx":["/component---src-pages-playground-dev-tsx-fb42bbd649daceeb46f4.js"]};/*]]>*/</script><script src="/webpack-runtime-5e1ec6c861ae70872e2b.js" async=""></script><script src="/app-352c7c1acacfeb7cf5bd.js" async=""></script><script src="/component---src-templates-handbook-tsx-16ee75366df1adfb048f.js" async=""></script></body></html>