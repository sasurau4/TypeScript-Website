{"componentChunkName":"component---src-templates-handbook-tsx","path":"/docs/handbook/migrating-from-javascript.html","webpackCompilationHash":"9ba7cceb403e6d704a1e","result":{"data":{"markdownRemark":{"id":"b055ac8d-8365-52ba-bc02-a11637e7455e","excerpt":"{% raw %}TypeScript doesn’t exist in a vacuum.\nIt was built with the JavaScript ecosystem in mind, and a lot of JavaScript exists today.\nConverting a JavaScript…","html":"<p>{% raw %}TypeScript doesn’t exist in a vacuum.\nIt was built with the JavaScript ecosystem in mind, and a lot of JavaScript exists today.\nConverting a JavaScript codebase over to TypeScript is, while somewhat tedious, usually not challenging.\nIn this tutorial, we’re going to look at how you might start out.\nWe assume you’ve read enough of the handbook to write new TypeScript code.</p>\n<p>If you’re looking to convert a React project, we recommend looking at the <a href=\"https://github.com/Microsoft/TypeScript-React-Conversion-Guide#typescript-react-conversion-guide\">React Conversion Guide</a> first.</p>\n<h1>Setting up your Directories</h1>\n<p>If you’re writing in plain JavaScript, it’s likely that you’re running your JavaScript directly,\nwhere your <code class=\"language-text\">.js</code> files are in a <code class=\"language-text\">src</code>, <code class=\"language-text\">lib</code>, or <code class=\"language-text\">dist</code> directory, and then ran as desired.</p>\n<p>If that’s the case, the files that you’ve written are going to be used as inputs to TypeScript, and you’ll run the outputs it produces.\nDuring our JS to TS migration, we’ll need to separate our input files to prevent TypeScript from overwriting them.\nIf your output files need to reside in a specific directory, then that will be your output directory.</p>\n<p>You might also be running some intermediate steps on your JavaScript, such as bundling or using another transpiler like Babel.\nIn this case, you might already have a folder structure like this set up.</p>\n<p>From this point on, we’re going to assume that your directory is set up something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">projectRoot\n├── src\n│   ├── file1.js\n│   └── file2.js\n├── built\n└── tsconfig.json</code></pre></div>\n<p>If you have a <code class=\"language-text\">tests</code> folder outside of your <code class=\"language-text\">src</code> directory, you might have one <code class=\"language-text\">tsconfig.json</code> in <code class=\"language-text\">src</code>, and one in <code class=\"language-text\">tests</code> as well.</p>\n<h1>Writing a Configuration File</h1>\n<p>TypeScript uses a file called <code class=\"language-text\">tsconfig.json</code> for managing your project’s options, such as which files you want to include, and what sorts of checking you want to perform.\nLet’s create a bare-bones one for our project:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./built\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"include\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"./src/**/*\"</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Here we’re specifying a few things to TypeScript:</p>\n<ol>\n<li>Read in any files it understands in the <code class=\"language-text\">src</code> directory (with <code class=\"language-text\">include</code>).</li>\n<li>Accept JavaScript files as inputs (with <code class=\"language-text\">allowJs</code>).</li>\n<li>Emit all of the output files in <code class=\"language-text\">built</code> (with <code class=\"language-text\">outDir</code>).</li>\n<li>Translate newer JavaScript constructs down to an older version like ECMAScript 5 (using <code class=\"language-text\">target</code>).</li>\n</ol>\n<p>At this point, if you try running <code class=\"language-text\">tsc</code> at the root of your project, you should see output files in the <code class=\"language-text\">built</code> directory.\nThe layout of files in <code class=\"language-text\">built</code> should look identical to the layout of <code class=\"language-text\">src</code>.\nYou should now have TypeScript working with your project.</p>\n<h2>Early Benefits</h2>\n<p>Even at this point you can get some great benefits from TypeScript understanding your project.\nIf you open up an editor like <a href=\"https://code.visualstudio.com\">VS Code</a> or <a href=\"https://visualstudio.com\">Visual Studio</a>, you’ll see that you can often get some tooling support like completion.\nYou can also catch certain bugs with options like:</p>\n<ul>\n<li><code class=\"language-text\">noImplicitReturns</code> which prevents you from forgetting to return at the end of a function.</li>\n<li><code class=\"language-text\">noFallthroughCasesInSwitch</code> which is helpful if you never want to forget a <code class=\"language-text\">break</code> statement between <code class=\"language-text\">case</code>s in a <code class=\"language-text\">switch</code> block.</li>\n</ul>\n<p>TypeScript will also warn about unreachable code and labels, which you can disable with <code class=\"language-text\">allowUnreachableCode</code> and <code class=\"language-text\">allowUnusedLabels</code> respectively.</p>\n<h1>Integrating with Build Tools</h1>\n<p>You might have some more build steps in your pipeline.\nPerhaps you concatenate something to each of your files.\nEach build tool is different, but we’ll do our best to cover the gist of things.</p>\n<h2>Gulp</h2>\n<p>If you’re using Gulp in some fashion, we have a tutorial on <a href=\"/9399f4ca4bba341f4c407e29a1242417/Gulp.md\">using Gulp</a> with TypeScript, and integrating with common build tools like Browserify, Babelify, and Uglify.\nYou can read more there.</p>\n<h2>Webpack</h2>\n<p>Webpack integration is pretty simple.\nYou can use <code class=\"language-text\">awesome-typescript-loader</code>, a TypeScript loader, combined with <code class=\"language-text\">source-map-loader</code> for easier debugging.\nSimply run</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> awesome-typescript-loader source-map-loader</code></pre></div>\n<p>and merge in options from the following into your <code class=\"language-text\">webpack.config.js</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    entry<span class=\"token punctuation\">:</span> <span class=\"token string\">\"./src/index.ts\"</span><span class=\"token punctuation\">,</span>\n    output<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        filename<span class=\"token punctuation\">:</span> <span class=\"token string\">\"./dist/bundle.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// Enable sourcemaps for debugging webpack's output.</span>\n    devtool<span class=\"token punctuation\">:</span> <span class=\"token string\">\"source-map\"</span><span class=\"token punctuation\">,</span>\n\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Add '.ts' and '.tsx' as resolvable extensions.</span>\n        extensions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".webpack.js\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".web.js\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".ts\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".tsx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".js\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    module<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        loaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token comment\">// All files with a '.ts' or '.tsx' extension will be handled by 'awesome-typescript-loader'.</span>\n            <span class=\"token punctuation\">{</span> test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.tsx?$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token punctuation\">:</span> <span class=\"token string\">\"awesome-typescript-loader\"</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n        preLoaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token comment\">// All output '.js' files will have any sourcemaps re-processed by 'source-map-loader'.</span>\n            <span class=\"token punctuation\">{</span> test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token punctuation\">:</span> <span class=\"token string\">\"source-map-loader\"</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// Other options...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It’s important to note that awesome-typescript-loader will need to run before any other loader that deals with <code class=\"language-text\">.js</code> files.</p>\n<p>The same goes for <a href=\"https://github.com/TypeStrong/ts-loader\">ts-loader</a>, another TypeScript loader for Webpack.\nYou can read more about the differences between the two <a href=\"https://github.com/s-panferov/awesome-typescript-loader#differences-between-ts-loader\">here</a>.</p>\n<p>You can see an example of using Webpack in our <a href=\"./React%20&#x26;%20Webpack.md\">tutorial on React and Webpack</a>.</p>\n<h1>Moving to TypeScript Files</h1>\n<p>At this point, you’re probably ready to start using TypeScript files.\nThe first step is to rename one of your <code class=\"language-text\">.js</code> files to <code class=\"language-text\">.ts</code>.\nIf your file uses JSX, you’ll need to rename it to <code class=\"language-text\">.tsx</code>.</p>\n<p>Finished with that step?\nGreat!\nYou’ve successfully migrated a file from JavaScript to TypeScript!</p>\n<p>Of course, that might not feel right.\nIf you open that file in an editor with TypeScript support (or if you run <code class=\"language-text\">tsc --pretty</code>), you might see red squiggles on certain lines.\nYou should think of these the same way you’d think of red squiggles in an editor like Microsoft Word.\nTypeScript will still translate your code, just like Word will still let you print your documents.</p>\n<p>If that sounds too lax for you, you can tighten that behavior up.\nIf, for instance, you <em>don’t</em> want TypeScript to compile to JavaScript in the face of errors, you can use the <code class=\"language-text\">noEmitOnError</code> option.\nIn that sense, TypeScript has a dial on its strictness, and you can turn that knob up as high as you want.</p>\n<p>If you plan on using the stricter settings that are available, it’s best to turn them on now (see <a href=\"#getting-stricter-checks\">Getting Stricter Checks</a> below).\nFor instance, if you never want TypeScript to silently infer <code class=\"language-text\">any</code> for a type without you explicitly saying so, you can use <code class=\"language-text\">noImplicitAny</code> before you start modifying your files.\nWhile it might feel somewhat overwhelming, the long-term gains become apparent much more quickly.</p>\n<h2>Weeding out Errors</h2>\n<p>Like we mentioned, it’s not unexpected to get error messages after conversion.\nThe important thing is to actually go one by one through these and decide how to deal with the errors.\nOften these will be legitimate bugs, but sometimes you’ll have to explain what you’re trying to do a little better to TypeScript.</p>\n<h3>Importing from Modules</h3>\n<p>You might start out getting a bunch of errors like <code class=\"language-text\">Cannot find name &#39;require&#39;.</code>, and <code class=\"language-text\">Cannot find name &#39;define&#39;.</code>.\nIn these cases, it’s likely that you’re using modules.\nWhile you can just convince TypeScript that these exist by writing out</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// For Node/CommonJS</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">path<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// For RequireJS/AMD</span>\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">function</span> <span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>it’s better to get rid of those calls and use TypeScript syntax for imports.</p>\n<p>First, you’ll need to enable some module system by setting TypeScript’s <code class=\"language-text\">module</code> flag.\nValid options are <code class=\"language-text\">commonjs</code>, <code class=\"language-text\">amd</code>, <code class=\"language-text\">system</code>, and <code class=\"language-text\">umd</code>.</p>\n<p>If you had the following Node/CommonJS code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfoo<span class=\"token punctuation\">.</span><span class=\"token function\">doStuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>or the following RequireJS/AMD code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">foo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    foo<span class=\"token punctuation\">.</span><span class=\"token function\">doStuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>then you would write the following TypeScript code:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> foo <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfoo<span class=\"token punctuation\">.</span><span class=\"token function\">doStuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Getting Declaration Files</h3>\n<p>If you started converting over to TypeScript imports, you’ll probably run into errors like <code class=\"language-text\">Cannot find module &#39;foo&#39;.</code>.\nThe issue here is that you likely don’t have <em>declaration files</em> to describe your library.\nLuckily this is pretty easy.\nIf TypeScript complains about a package like <code class=\"language-text\">lodash</code>, you can just write</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -S @types/lodash</code></pre></div>\n<p>If you’re using a module option other than <code class=\"language-text\">commonjs</code>, you’ll need to set your <code class=\"language-text\">moduleResolution</code> option to <code class=\"language-text\">node</code>.</p>\n<p>After that, you’ll be able to import lodash with no issues, and get accurate completions.</p>\n<h3>Exporting from Modules</h3>\n<p>Typically, exporting from a module involves adding properties to a value like <code class=\"language-text\">exports</code> or <code class=\"language-text\">module.exports</code>.\nTypeScript allows you to use top-level export statements.\nFor instance, if you exported a function like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">feedPets</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pets</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>you could write that out as the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">feedPets</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pets</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sometimes you’ll entirely overwrite the exports object.\nThis is a common pattern people use to make their modules immediately callable like in this snippet:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You might have previously written that like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> foo<span class=\"token punctuation\">;</span></code></pre></div>\n<p>In TypeScript, you can model this with the <code class=\"language-text\">export =</code> construct.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token operator\">=</span> foo<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Too many/too few arguments</h3>\n<p>You’ll sometimes find yourself calling a function with too many/few arguments.\nTypically, this is a bug, but in some cases, you might have declared a function that uses the <code class=\"language-text\">arguments</code> object instead of writing out any parameters:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">myCoolFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> f <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">myCoolFunction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">myCoolFunction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this case, we need to use TypeScript to tell any of our callers about the ways <code class=\"language-text\">myCoolFunction</code> can be called using function overloads.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">myCoolFunction</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">f</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> nums<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myCoolFunction</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">f</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>nums<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myCoolFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> f <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We added two overload signatures to <code class=\"language-text\">myCoolFunction</code>.\nThe first checks states that <code class=\"language-text\">myCoolFunction</code> takes a function (which takes a <code class=\"language-text\">number</code>), and then a list of <code class=\"language-text\">number</code>s.\nThe second one says that it will take a function as well, and then uses a rest parameter (<code class=\"language-text\">...nums</code>) to state that any number of arguments after that need to be <code class=\"language-text\">number</code>s.</p>\n<h3>Sequentially Added Properties</h3>\n<p>Some people find it more aesthetically pleasing to create an object and add properties immediately after like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\noptions<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">;</span>\noptions<span class=\"token punctuation\">.</span>volume <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>TypeScript will say that you can’t assign to <code class=\"language-text\">color</code> and <code class=\"language-text\">volume</code> because it first figured out the type of <code class=\"language-text\">options</code> as <code class=\"language-text\">{}</code> which doesn’t have any properties.\nIf you instead moved the declarations into the object literal themselves, you’d get no errors:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">let</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span>\n    volume<span class=\"token punctuation\">:</span> <span class=\"token number\">11</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You could also define the type of <code class=\"language-text\">options</code> and add a type assertion on the object literal.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Options</span> <span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> volume<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> Options<span class=\"token punctuation\">;</span>\noptions<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">;</span>\noptions<span class=\"token punctuation\">.</span>volume <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Alternatively, you can just say <code class=\"language-text\">options</code> has the type <code class=\"language-text\">any</code> which is the easiest thing to do, but which will benefit you the least.</p>\n<h3><code class=\"language-text\">any</code>, <code class=\"language-text\">Object</code>, and <code class=\"language-text\">{}</code></h3>\n<p>You might be tempted to use <code class=\"language-text\">Object</code> or <code class=\"language-text\">{}</code> to say that a value can have any property on it because <code class=\"language-text\">Object</code> is, for most purposes, the most general type.\nHowever <strong><code class=\"language-text\">any</code> is actually the type you want to use</strong> in those situations, since it’s the most <em>flexible</em> type.</p>\n<p>For instance, if you have something that’s typed as <code class=\"language-text\">Object</code> you won’t be able to call methods like <code class=\"language-text\">toLowerCase()</code> on it.\nBeing more general usually means you can do less with a type, but <code class=\"language-text\">any</code> is special in that it is the most general type while still allowing you to do anything with it.\nThat means you can call it, construct it, access properties on it, etc.\nKeep in mind though, whenever you use <code class=\"language-text\">any</code>, you lose out on most of the error checking and editor support that TypeScript gives you.</p>\n<p>If a decision ever comes down to <code class=\"language-text\">Object</code> and <code class=\"language-text\">{}</code>, you should prefer <code class=\"language-text\">{}</code>.\nWhile they are mostly the same, technically <code class=\"language-text\">{}</code> is a more general type than <code class=\"language-text\">Object</code> in certain esoteric cases.</p>\n<h2>Getting Stricter Checks</h2>\n<p>TypeScript comes with certain checks to give you more safety and analysis of your program.\nOnce you’ve converted your codebase to TypeScript, you can start enabling these checks for greater safety.</p>\n<h3>No Implicit <code class=\"language-text\">any</code></h3>\n<p>There are certain cases where TypeScript can’t figure out what certain types should be.\nTo be as lenient as possible, it will decide to use the type <code class=\"language-text\">any</code> in its place.\nWhile this is great for migration, using <code class=\"language-text\">any</code> means that you’re not getting any type safety, and you won’t get the same tooling support you’d get elsewhere.\nYou can tell TypeScript to flag these locations down and give an error with the <code class=\"language-text\">noImplicitAny</code> option.</p>\n<h3>Strict <code class=\"language-text\">null</code> &#x26; <code class=\"language-text\">undefined</code> Checks</h3>\n<p>By default, TypeScript assumes that <code class=\"language-text\">null</code> and <code class=\"language-text\">undefined</code> are in the domain of every type.\nThat means anything declared with the type <code class=\"language-text\">number</code> could be <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code>.\nSince <code class=\"language-text\">null</code> and <code class=\"language-text\">undefined</code> are such a frequent source of bugs in JavaScript and TypeScript, TypeScript has the <code class=\"language-text\">strictNullChecks</code> option to spare you the stress of worrying about these issues.</p>\n<p>When <code class=\"language-text\">strictNullChecks</code> is enabled, <code class=\"language-text\">null</code> and <code class=\"language-text\">undefined</code> get their own types called <code class=\"language-text\">null</code> and <code class=\"language-text\">undefined</code> respectively.\nWhenever anything is <em>possibly</em> <code class=\"language-text\">null</code>, you can use a union type with the original type.\nSo for instance, if something could be a <code class=\"language-text\">number</code> or <code class=\"language-text\">null</code>, you’d write the type out as <code class=\"language-text\">number | null</code>.</p>\n<p>If you ever have a value that TypeScript thinks is possibly <code class=\"language-text\">null</code>/<code class=\"language-text\">undefined</code>, but you know better, you can use the postfix <code class=\"language-text\">!</code> operator to tell it otherwise.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">var</span> foo<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\nfoo<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// error - 'foo' is possibly 'null'</span>\n\nfoo<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> <span class=\"token comment\">// okay - 'foo!' just has type 'string[]'</span></code></pre></div>\n<p>As a heads up, when using <code class=\"language-text\">strictNullChecks</code>, your dependencies may need to be updated to use <code class=\"language-text\">strictNullChecks</code> as well.</p>\n<h3>No Implicit <code class=\"language-text\">any</code> for <code class=\"language-text\">this</code></h3>\n<p>When you use the <code class=\"language-text\">this</code> keyword outside of classes, it has the type <code class=\"language-text\">any</code> by default.\nFor instance, imagine a <code class=\"language-text\">Point</code> class, and imagine a function that we wish to add as a method:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Point</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">public</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">public</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p<span class=\"token punctuation\">:</span> Point</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> dx <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> dy <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>dx <span class=\"token operator\">**</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> dy <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token comment\">// Reopen the interface.</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Point</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">distanceFromOrigin</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">:</span> Point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Point</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">distanceFromOrigin</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">point<span class=\"token punctuation\">:</span> Point</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This has the same problems we mentioned above - we could easily have misspelled <code class=\"language-text\">getDistance</code> and not gotten an error.\nFor this reason, TypeScript has the <code class=\"language-text\">noImplicitThis</code> option.\nWhen that option is set, TypeScript will issue an error when <code class=\"language-text\">this</code> is used without an explicit (or inferred) type.\nThe fix is to use a <code class=\"language-text\">this</code>-parameter to give an explicit type in the interface or in the function itself:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token class-name\">Point</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">distanceFromOrigin</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">:</span> Point<span class=\"token punctuation\">,</span> point<span class=\"token punctuation\">:</span> Point</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>{% endraw %}</p>","frontmatter":{"permalink":"/docs/handbook/migrating-from-javascript.html"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/docs/handbook/migrating-from-javascript.html","isOldHandbook":true}}}